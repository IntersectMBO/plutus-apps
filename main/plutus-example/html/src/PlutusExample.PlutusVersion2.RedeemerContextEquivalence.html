<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds         #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell   #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications  #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies      #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusExample.PlutusVersion2.RedeemerContextEquivalence</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceScript"><span class="hs-identifier">v2ScriptContextEquivalenceScript</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceSbs"><span class="hs-identifier">v2ScriptContextEquivalenceSbs</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2mintEquivScript"><span class="hs-identifier">v2mintEquivScript</span></a></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2mintEquivScriptShortBs"><span class="hs-identifier">v2mintEquivScriptShortBs</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">($)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api.Shelley</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">($)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator">(&amp;&amp;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Codec.Serialise</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Short</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SBS</span></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Typed</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Scripts</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.V2.Ledger.Api</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V2</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.V2.Ledger.Contexts</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V2</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx</span></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx.Prelude</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PlutusPrelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unless</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">newtype</span><span> </span><span id="MyCustomDatumV2"><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#MyCustomDatumV2"><span class="hs-identifier hs-var">MyCustomDatumV2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MyCustomDatumV2"><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#MyCustomDatumV2"><span class="hs-identifier hs-var">MyCustomDatumV2</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">data</span><span> </span><span id="PV2CustomRedeemer"><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-var">PV2CustomRedeemer</span></a></span></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PV2CustomRedeemer"><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-var">PV2CustomRedeemer</span></a></span></span><span>
</span><span id="line-36"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="pv2Inputs"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; [TxInInfo]
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Inputs"><span class="hs-identifier hs-var hs-var">pv2Inputs</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">V2.TxInInfo</span></span><span class="hs-special">]</span><span>
</span><span id="line-37"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2RefInputs"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; [TxInInfo]
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2RefInputs"><span class="hs-identifier hs-var hs-var">pv2RefInputs</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">V2.TxInInfo</span></span><span class="hs-special">]</span><span>
</span><span id="line-38"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Outputs"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; [TxOut]
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Outputs"><span class="hs-identifier hs-var hs-var">pv2Outputs</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">V2.TxOut</span></span><span class="hs-special">]</span><span>
</span><span id="line-39"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Fee"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; Value
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Fee"><span class="hs-identifier hs-var hs-var">pv2Fee</span></a></span></span><span>           </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Value</span></span><span>
</span><span id="line-40"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Mint"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; Value
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Mint"><span class="hs-identifier hs-var hs-var">pv2Mint</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Value</span></span><span>
</span><span id="line-41"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2DCert"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; [DCert]
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2DCert"><span class="hs-identifier hs-var hs-var">pv2DCert</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">V2.DCert</span></span><span class="hs-special">]</span><span>
</span><span id="line-42"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Wdrl"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; Map StakingCredential Integer
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Wdrl"><span class="hs-identifier hs-var hs-var">pv2Wdrl</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.StakingCredential</span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span><span>
</span><span id="line-43"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2ValidRange"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; POSIXTimeRange
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2ValidRange"><span class="hs-identifier hs-var hs-var">pv2ValidRange</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.POSIXTimeRange</span></span><span>
</span><span id="line-44"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Signatories"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; [PubKeyHash]
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Signatories"><span class="hs-identifier hs-var hs-var">pv2Signatories</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">V2.PubKeyHash</span></span><span class="hs-special">]</span><span>
</span><span id="line-45"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Redeemers"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; Map ScriptPurpose Redeemer
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Redeemers"><span class="hs-identifier hs-var hs-var">pv2Redeemers</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptPurpose</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Redeemer</span></span><span>
</span><span id="line-46"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2Data"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; Map DatumHash Datum
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2Data"><span class="hs-identifier hs-var hs-var">pv2Data</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.DatumHash</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Datum</span></span><span>
</span><span id="line-47"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="pv2ScriptPurpose"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; Maybe ScriptPurpose
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#pv2ScriptPurpose"><span class="hs-identifier hs-var hs-var">pv2ScriptPurpose</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.ScriptPurpose</span></span><span>
</span><span id="line-48"></span><span>      </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679205290"><span id="local-6989586621679205292"><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool
(PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool)
-&gt; (PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool)
-&gt; Eq PV2CustomRedeemer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool
$c/= :: PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool
== :: PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool
$c== :: PV2CustomRedeemer -&gt; PV2CustomRedeemer -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Prelude.Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679205283"><span id="local-6989586621679205285"><span id="local-6989586621679205287"><span class="annot"><span class="annottext">Int -&gt; PV2CustomRedeemer -&gt; ShowS
[PV2CustomRedeemer] -&gt; ShowS
PV2CustomRedeemer -&gt; String
(Int -&gt; PV2CustomRedeemer -&gt; ShowS)
-&gt; (PV2CustomRedeemer -&gt; String)
-&gt; ([PV2CustomRedeemer] -&gt; ShowS)
-&gt; Show PV2CustomRedeemer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PV2CustomRedeemer] -&gt; ShowS
$cshowList :: [PV2CustomRedeemer] -&gt; ShowS
show :: PV2CustomRedeemer -&gt; String
$cshow :: PV2CustomRedeemer -&gt; String
showsPrec :: Int -&gt; PV2CustomRedeemer -&gt; ShowS
$cshowsPrec :: Int -&gt; PV2CustomRedeemer -&gt; ShowS
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span id="local-6989586621679205276"><span id="local-6989586621679205278"><span id="local-6989586621679205280"><span class="hs-identifier">PlutusTx.unstableMakeIsData</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">MyCustomDatumV2</span></span></span></span><span>
</span><span id="line-51"></span><span id="local-6989586621679205264"><span id="local-6989586621679205266"><span id="local-6989586621679205268"><span class="hs-identifier">PlutusTx.unstableMakeIsData</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">PV2CustomRedeemer</span></span></span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- @(PV2CustomRedeemer inputs refInputs outputs fee mint dCert wdrl validRange signatories redeemers data)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkValidator"><span class="hs-pragma hs-type">mkValidator</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-56"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkValidator"><span class="hs-identifier hs-type">mkValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#MyCustomDatumV2"><span class="hs-identifier hs-type">MyCustomDatumV2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.ScriptContext</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-57"></span><span id="mkValidator"><span class="annot"><span class="annottext">mkValidator :: MyCustomDatumV2 -&gt; PV2CustomRedeemer -&gt; ScriptContext -&gt; Bool
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkValidator"><span class="hs-identifier hs-var hs-var">mkValidator</span></a></span></span><span> </span><span class="annot"><span class="annottext">MyCustomDatumV2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205262"><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span> </span><span id="local-6989586621679205261"><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205261"><span class="hs-identifier hs-var">scriptContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-comment">-- These all work fine</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205260"><span class="hs-identifier hs-var">inputsAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205257"><span class="hs-identifier hs-var">referenceInputsAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205256"><span class="hs-identifier hs-var">certsAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205255"><span class="hs-identifier hs-var">reqSignersAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205254"><span class="hs-identifier hs-var">datumHashMapsAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205253"><span class="hs-identifier hs-var">outputsAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205252"><span class="hs-identifier hs-var">correctNumberOfRedeemers</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205262"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var">txInfo</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-comment">-- These below are failing</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-comment">-- validtyIntervalsAreEquivalent redeemer txInfo</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-comment">-- Inequality for validity interval doesnt work. Also the interval reported by the script context is a little ahead of</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-comment">-- what is in the transaction</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-comment">-- TODO: You can't check the fee with the build command due to how it's constructed</span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-comment">-- These below have not been tested</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-comment">-- withdrawalsAreEquivalent redeemer txInfo</span><span>
</span><span id="line-73"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="#local-6989586621679205259"><span class="hs-identifier hs-type">txInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679205259"><span class="annot"><span class="annottext">txInfo :: TxInfo
</span><a href="#local-6989586621679205259"><span class="hs-identifier hs-var hs-var">txInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptContext -&gt; TxInfo
</span><span class="hs-identifier hs-var hs-var">V2.scriptContextTxInfo</span></span><span> </span><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205261"><span class="hs-identifier hs-var">scriptContext</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="#local-6989586621679205260"><span class="hs-identifier hs-type">inputsAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span id="local-6989586621679205260"><span class="annot"><span class="annottext">inputsAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205260"><span class="hs-identifier hs-var hs-var">inputsAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span id="local-6989586621679205250"><span class="annot"><span class="annottext">[TxInInfo]
</span><a href="#local-6989586621679205250"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205249"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205249"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxInInfo -&gt; TxOut) -&gt; [TxInInfo] -&gt; [TxOut]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxInInfo -&gt; TxOut
</span><span class="hs-identifier hs-var hs-var">txInInfoResolved</span></span><span> </span><span class="annot"><span class="annottext">([TxInInfo] -&gt; [TxOut]) -&gt; [TxInInfo] -&gt; [TxOut]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxInfo -&gt; [TxInInfo]
</span><span class="hs-identifier hs-var hs-var">V2.txInfoInputs</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205249"><span class="hs-identifier hs-var">tInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOut] -&gt; [TxOut] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="annottext">(TxInInfo -&gt; TxOut) -&gt; [TxInInfo] -&gt; [TxOut]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxInInfo -&gt; TxOut
</span><span class="hs-identifier hs-var hs-var">txInInfoResolved</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><a href="#local-6989586621679205250"><span class="hs-identifier hs-var">inputs</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><a href="#local-6989586621679205257"><span class="hs-identifier hs-type">referenceInputsAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621679205257"><span class="annot"><span class="annottext">referenceInputsAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205257"><span class="hs-identifier hs-var hs-var">referenceInputsAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205243"><span class="annot"><span class="annottext">[TxInInfo]
</span><a href="#local-6989586621679205243"><span class="hs-identifier hs-var">refInputs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205242"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205242"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxInInfo -&gt; TxOut) -&gt; [TxInInfo] -&gt; [TxOut]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxInInfo -&gt; TxOut
</span><span class="hs-identifier hs-var hs-var">txInInfoResolved</span></span><span> </span><span class="annot"><span class="annottext">([TxInInfo] -&gt; [TxOut]) -&gt; [TxInInfo] -&gt; [TxOut]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TxInfo -&gt; [TxInInfo]
</span><span class="hs-identifier hs-var hs-var">V2.txInfoReferenceInputs</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205242"><span class="hs-identifier hs-var">tInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOut] -&gt; [TxOut] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><span class="annottext">(TxInInfo -&gt; TxOut) -&gt; [TxInInfo] -&gt; [TxOut]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxInInfo -&gt; TxOut
</span><span class="hs-identifier hs-var hs-var">txInInfoResolved</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><a href="#local-6989586621679205243"><span class="hs-identifier hs-var">refInputs</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="#local-6989586621679205253"><span class="hs-identifier hs-type">outputsAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span id="local-6989586621679205253"><span class="annot"><span class="annottext">outputsAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205253"><span class="hs-identifier hs-var hs-var">outputsAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205240"><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205240"><span class="hs-identifier hs-var">outputs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205239"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205239"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679205238"><span class="annot"><span class="annottext">scOuts :: [TxOut]
</span><a href="#local-6989586621679205238"><span class="hs-identifier hs-var hs-var">scOuts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxInfo -&gt; [TxOut]
</span><span class="hs-identifier hs-var hs-var">V2.txInfoOutputs</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205239"><span class="hs-identifier hs-var">tInfo</span></a></span><span>
</span><span id="line-90"></span><span>        </span><span id="local-6989586621679205236"><span class="annot"><span class="annottext">scOutAddrs :: [Address]
</span><a href="#local-6989586621679205236"><span class="hs-identifier hs-var hs-var">scOutAddrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Address) -&gt; [TxOut] -&gt; [Address]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Address
</span><span class="hs-identifier hs-var hs-var">V2.txOutAddress</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205238"><span class="hs-identifier hs-var">scOuts</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span id="local-6989586621679205234"><span class="annot"><span class="annottext">scOutValue :: [Value]
</span><a href="#local-6989586621679205234"><span class="hs-identifier hs-var hs-var">scOutValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Value) -&gt; [TxOut] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Value
</span><span class="hs-identifier hs-var hs-var">V2.txOutValue</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205238"><span class="hs-identifier hs-var">scOuts</span></a></span><span>
</span><span id="line-92"></span><span>        </span><span id="local-6989586621679205232"><span class="annot"><span class="annottext">scOutDatums :: [OutputDatum]
</span><a href="#local-6989586621679205232"><span class="hs-identifier hs-var hs-var">scOutDatums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; OutputDatum) -&gt; [TxOut] -&gt; [OutputDatum]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; OutputDatum
</span><span class="hs-identifier hs-var hs-var">V2.txOutDatum</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205238"><span class="hs-identifier hs-var">scOuts</span></a></span><span>
</span><span id="line-93"></span><span>        </span><span id="local-6989586621679205230"><span class="annot"><span class="annottext">scOutReferenceScripts :: [Maybe ScriptHash]
</span><a href="#local-6989586621679205230"><span class="hs-identifier hs-var hs-var">scOutReferenceScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Maybe ScriptHash) -&gt; [TxOut] -&gt; [Maybe ScriptHash]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Maybe ScriptHash
</span><span class="hs-identifier hs-var hs-var">V2.txOutReferenceScript</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205238"><span class="hs-identifier hs-var">scOuts</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>        </span><span id="local-6989586621679205228"><span class="annot"><span class="annottext">redeemerOutAddrs :: [Address]
</span><a href="#local-6989586621679205228"><span class="hs-identifier hs-var hs-var">redeemerOutAddrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Address) -&gt; [TxOut] -&gt; [Address]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Address
</span><span class="hs-identifier hs-var hs-var">V2.txOutAddress</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205240"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-96"></span><span>        </span><span id="local-6989586621679205227"><span class="annot"><span class="annottext">redeemerOutValue :: [Value]
</span><a href="#local-6989586621679205227"><span class="hs-identifier hs-var hs-var">redeemerOutValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Value) -&gt; [TxOut] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Value
</span><span class="hs-identifier hs-var hs-var">V2.txOutValue</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205240"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-97"></span><span>        </span><span id="local-6989586621679205226"><span class="annot"><span class="annottext">redeemerOutDatums :: [OutputDatum]
</span><a href="#local-6989586621679205226"><span class="hs-identifier hs-var hs-var">redeemerOutDatums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; OutputDatum) -&gt; [TxOut] -&gt; [OutputDatum]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; OutputDatum
</span><span class="hs-identifier hs-var hs-var">V2.txOutDatum</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205240"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-98"></span><span>        </span><span id="local-6989586621679205225"><span class="annot"><span class="annottext">redeemerOutReferenceScripts :: [Maybe ScriptHash]
</span><a href="#local-6989586621679205225"><span class="hs-identifier hs-var hs-var">redeemerOutReferenceScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxOut -&gt; Maybe ScriptHash) -&gt; [TxOut] -&gt; [Maybe ScriptHash]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">PlutusPrelude.map</span></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Maybe ScriptHash
</span><span class="hs-identifier hs-var hs-var">V2.txOutReferenceScript</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><a href="#local-6989586621679205240"><span class="hs-identifier hs-var">outputs</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Address]
</span><a href="#local-6989586621679205236"><span class="hs-identifier hs-var">scOutAddrs</span></a></span><span> </span><span class="annot"><span class="annottext">[Address] -&gt; [Address] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">[Address]
</span><a href="#local-6989586621679205228"><span class="hs-identifier hs-var">redeemerOutAddrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-100"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[OutputDatum]
</span><a href="#local-6989586621679205232"><span class="hs-identifier hs-var">scOutDatums</span></a></span><span> </span><span class="annot"><span class="annottext">[OutputDatum] -&gt; [OutputDatum] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">[OutputDatum]
</span><a href="#local-6989586621679205226"><span class="hs-identifier hs-var">redeemerOutDatums</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-101"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Maybe ScriptHash]
</span><a href="#local-6989586621679205230"><span class="hs-identifier hs-var">scOutReferenceScripts</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe ScriptHash] -&gt; [Maybe ScriptHash] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">[Maybe ScriptHash]
</span><a href="#local-6989586621679205225"><span class="hs-identifier hs-var">redeemerOutReferenceScripts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-102"></span><span>       </span><span class="hs-comment">-- We want to see if out tx out specified in our tx is equal to one of the txouts in the</span><span>
</span><span id="line-103"></span><span>       </span><span class="hs-comment">-- script context. So we have a total of 4 outputs when we combine the outputs in the script</span><span>
</span><span id="line-104"></span><span>       </span><span class="hs-comment">-- context and the redeemer. This would be the two &quot;normal&quot; outputs and the two &quot;change outputs&quot;</span><span>
</span><span id="line-105"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; Integer
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Integer
</span><span class="hs-identifier hs-var">PlutusPrelude.length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679205234"><span class="hs-identifier hs-var">scOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; [Value] -&gt; [Value]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">PlutusPrelude.++</span></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679205227"><span class="hs-identifier hs-var">redeemerOutValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-106"></span><span>       </span><span class="hs-comment">-- You would expect calling nub on the combined values, we should expect a length of 2. However</span><span>
</span><span id="line-107"></span><span>       </span><span class="hs-comment">-- the change outputs will be different because of how we construct the redeemer. Essentially we</span><span>
</span><span id="line-108"></span><span>       </span><span class="hs-comment">-- use an idential tx to generate our redeemer (and the redeemer in this tx is a default redeemer with nothing in it)</span><span>
</span><span id="line-109"></span><span>       </span><span class="hs-comment">-- and then we add that redeemer to a new transaction built with the `build` command. The problem is</span><span>
</span><span id="line-110"></span><span>       </span><span class="hs-comment">-- the fee and the change outputs created from the initial tx will be different because the size of</span><span>
</span><span id="line-111"></span><span>       </span><span class="hs-comment">-- the total tx is now different. Therefore we expect the length to be 3 since only the &quot;normal&quot;</span><span>
</span><span id="line-112"></span><span>       </span><span class="hs-comment">-- txouts are equivalent but the change outputs are different!</span><span>
</span><span id="line-113"></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; Integer
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Integer
</span><span class="hs-identifier hs-var">PlutusPrelude.length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Value] -&gt; [Value]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nub</span></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; [Value]) -&gt; [Value] -&gt; [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679205234"><span class="hs-identifier hs-var">scOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; [Value] -&gt; [Value]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">PlutusPrelude.++</span></span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621679205227"><span class="hs-identifier hs-var">redeemerOutValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="#local-6989586621679205256"><span class="hs-identifier hs-type">certsAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621679205256"><span class="annot"><span class="annottext">certsAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205256"><span class="hs-identifier hs-var hs-var">certsAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205221"><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679205221"><span class="hs-identifier hs-var">certs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205220"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205220"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">TxInfo -&gt; [DCert]
</span><span class="hs-identifier hs-var hs-var">V2.txInfoDCert</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205220"><span class="hs-identifier hs-var">tInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[DCert] -&gt; [DCert] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><a href="#local-6989586621679205221"><span class="hs-identifier hs-var">certs</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-comment">--validtyIntervalsAreEquivalent :: PV2CustomRedeemer -&gt; V2.TxInfo -&gt; Bool</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-comment">--validtyIntervalsAreEquivalent (PV2CustomRedeemer _ _ _ _ _ _ _ validInterval _ _ _) tInfo =</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-comment">--   (V2.txInfoValidRange tInfo) PlutusPrelude./= validInterval</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-comment">-- V2.ivFrom (V2.txInfoValidRange tInfo) PlutusPrelude.== V2.ivFrom validInterval Fails</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><a href="#local-6989586621679205255"><span class="hs-identifier hs-type">reqSignersAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679205255"><span class="annot"><span class="annottext">reqSignersAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205255"><span class="hs-identifier hs-var hs-var">reqSignersAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205218"><span class="annot"><span class="annottext">[PubKeyHash]
</span><a href="#local-6989586621679205218"><span class="hs-identifier hs-var">reqSigners</span></a></span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205217"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205217"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><span class="annottext">TxInfo -&gt; [PubKeyHash]
</span><span class="hs-identifier hs-var hs-var">V2.txInfoSignatories</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205217"><span class="hs-identifier hs-var">tInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash] -&gt; [PubKeyHash] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><a href="#local-6989586621679205218"><span class="hs-identifier hs-var">reqSigners</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><a href="#local-6989586621679205254"><span class="hs-identifier hs-type">datumHashMapsAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621679205254"><span class="annot"><span class="annottext">datumHashMapsAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205254"><span class="hs-identifier hs-var hs-var">datumHashMapsAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205215"><span class="annot"><span class="annottext">Map DatumHash Datum
</span><a href="#local-6989586621679205215"><span class="hs-identifier hs-var">datumHashMap</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205214"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205214"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="annottext">TxInfo -&gt; Map DatumHash Datum
</span><span class="hs-identifier hs-var hs-var">V2.txInfoData</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205214"><span class="hs-identifier hs-var">tInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum -&gt; Map DatumHash Datum -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><a href="#local-6989586621679205215"><span class="hs-identifier hs-var">datumHashMap</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="#local-6989586621679205252"><span class="hs-identifier hs-type">correctNumberOfRedeemers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621679205252"><span class="annot"><span class="annottext">correctNumberOfRedeemers :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205252"><span class="hs-identifier hs-var hs-var">correctNumberOfRedeemers</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205212"><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><a href="#local-6989586621679205212"><span class="hs-identifier hs-var">redeemers</span></a></span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205211"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205211"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer -&gt; Integer
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Integer
</span><span class="hs-identifier hs-var">PlutusPrelude.length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxInfo -&gt; Map ScriptPurpose Redeemer
</span><span class="hs-identifier hs-var hs-var">V2.txInfoRedeemers</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205211"><span class="hs-identifier hs-var">tInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer -&gt; Integer
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Integer
</span><span class="hs-identifier hs-var">PlutusPrelude.length</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><a href="#local-6989586621679205212"><span class="hs-identifier hs-var">redeemers</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-comment">-- TODO: not done yet</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-comment">--withdrawalsAreEquivalent :: PV2CustomRedeemer -&gt; V2.TxInfo -&gt; Bool</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-comment">--withdrawalsAreEquivalent (PV2CustomRedeemer _ _ _ _ _ _ wdrwls _ _ _ _) tInfo =</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-comment">-- V2.txInfoWdrl tInfo PlutusPrelude.== wdrwls</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-comment">-- TODO: Also need to do separate minting script</span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#validator"><span class="hs-identifier hs-type">validator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Validator</span></span><span>
</span><span id="line-143"></span><span id="validator"><span class="annot"><span class="annottext">validator :: Validator
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#validator"><span class="hs-identifier hs-var hs-var">validator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompiledCode (BuiltinData -&gt; BuiltinData -&gt; BuiltinData -&gt; ())
-&gt; Validator
</span><span class="hs-identifier hs-var">V2.mkValidatorScript</span></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.compile</span></span><span> </span><span class="hs-special">[||</span><span> </span><span class="hs-identifier">wrap</span><span> </span><span class="hs-special">||]</span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679205207"><span class="annot"><span class="annottext">wrap :: BuiltinData -&gt; BuiltinData -&gt; BuiltinData -&gt; ()
</span><a href="#local-6989586621679205207"><span class="hs-identifier hs-var hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MyCustomDatumV2 -&gt; PV2CustomRedeemer -&gt; ScriptContext -&gt; Bool)
-&gt; BuiltinData -&gt; BuiltinData -&gt; BuiltinData -&gt; ()
forall sc d r.
(IsScriptContext sc, UnsafeFromData d, UnsafeFromData r) =&gt;
(d -&gt; r -&gt; sc -&gt; Bool)
-&gt; BuiltinData -&gt; BuiltinData -&gt; BuiltinData -&gt; ()
</span><span class="hs-identifier hs-var">Scripts.mkUntypedValidator</span></span><span> </span><span class="annot"><span class="annottext">MyCustomDatumV2 -&gt; PV2CustomRedeemer -&gt; ScriptContext -&gt; Bool
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkValidator"><span class="hs-identifier hs-var">mkValidator</span></a></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalencePlutusScript"><span class="hs-identifier hs-type">v2ScriptContextEquivalencePlutusScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Script</span></span><span>
</span><span id="line-149"></span><span id="v2ScriptContextEquivalencePlutusScript"><span class="annot"><span class="annottext">v2ScriptContextEquivalencePlutusScript :: Script
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalencePlutusScript"><span class="hs-identifier hs-var hs-var">v2ScriptContextEquivalencePlutusScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validator -&gt; Script
</span><span class="hs-identifier hs-var">V2.unValidatorScript</span></span><span> </span><span class="annot"><span class="annottext">Validator
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#validator"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceSbs"><span class="hs-identifier hs-type">v2ScriptContextEquivalenceSbs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SBS.ShortByteString</span></span><span>
</span><span id="line-152"></span><span id="v2ScriptContextEquivalenceSbs"><span class="annot"><span class="annottext">v2ScriptContextEquivalenceSbs :: ShortByteString
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceSbs"><span class="hs-identifier hs-var hs-var">v2ScriptContextEquivalenceSbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="annottext">ByteString -&gt; ShortByteString
</span><span class="hs-identifier hs-var">SBS.toShort</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ShortByteString)
-&gt; (ByteString -&gt; ByteString) -&gt; ByteString -&gt; ShortByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">LBS.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ShortByteString) -&gt; ByteString -&gt; ShortByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Script -&gt; ByteString
forall a. Serialise a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">serialise</span></span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalencePlutusScript"><span class="hs-identifier hs-var">v2ScriptContextEquivalencePlutusScript</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceScript"><span class="hs-identifier hs-type">v2ScriptContextEquivalenceScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusScript</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptV2</span></span><span>
</span><span id="line-156"></span><span id="v2ScriptContextEquivalenceScript"><span class="annot"><span class="annottext">v2ScriptContextEquivalenceScript :: PlutusScript PlutusScriptV2
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceScript"><span class="hs-identifier hs-var hs-var">v2ScriptContextEquivalenceScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; PlutusScript PlutusScriptV2
forall lang. ShortByteString -&gt; PlutusScript lang
</span><span class="hs-identifier hs-var">PlutusScriptSerialised</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2ScriptContextEquivalenceSbs"><span class="hs-identifier hs-var">v2ScriptContextEquivalenceSbs</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- Mint field and script purpose equivalence equivalence</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-pragma">{-# INLINABLE</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkMintEquivalenceValidator"><span class="hs-pragma hs-type">mkMintEquivalenceValidator</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-161"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkMintEquivalenceValidator"><span class="hs-identifier hs-type">mkMintEquivalenceValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.ScriptContext</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-162"></span><span id="mkMintEquivalenceValidator"><span class="annot"><span class="annottext">mkMintEquivalenceValidator :: PV2CustomRedeemer -&gt; ScriptContext -&gt; Bool
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkMintEquivalenceValidator"><span class="hs-identifier hs-var hs-var">mkMintEquivalenceValidator</span></a></span></span><span> </span><span id="local-6989586621679205194"><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205194"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span> </span><span id="local-6989586621679205193"><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205193"><span class="hs-identifier hs-var">scriptContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-comment">-- Minted value is equivalent</span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205192"><span class="hs-identifier hs-var">mintingFieldsAreEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205194"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205191"><span class="hs-identifier hs-var">txInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.&amp;&amp;</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-comment">-- Script purpose is equivalent</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><span class="annottext">ScriptContext -&gt; PV2CustomRedeemer -&gt; Bool
</span><a href="#local-6989586621679205190"><span class="hs-identifier hs-var">scriptPurposeIsEquivalent</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205193"><span class="hs-identifier hs-var">scriptContext</span></a></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer
</span><a href="#local-6989586621679205194"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-167"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>   </span><span class="annot"><a href="#local-6989586621679205191"><span class="hs-identifier hs-type">txInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span>
</span><span id="line-169"></span><span>   </span><span id="local-6989586621679205191"><span class="annot"><span class="annottext">txInfo :: TxInfo
</span><a href="#local-6989586621679205191"><span class="hs-identifier hs-var hs-var">txInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptContext -&gt; TxInfo
</span><span class="hs-identifier hs-var hs-var">V2.scriptContextTxInfo</span></span><span> </span><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205193"><span class="hs-identifier hs-var">scriptContext</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>   </span><span class="annot"><a href="#local-6989586621679205192"><span class="hs-identifier hs-type">mintingFieldsAreEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.TxInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-172"></span><span>   </span><span id="local-6989586621679205192"><span class="annot"><span class="annottext">mintingFieldsAreEquivalent :: PV2CustomRedeemer -&gt; TxInfo -&gt; Bool
</span><a href="#local-6989586621679205192"><span class="hs-identifier hs-var hs-var">mintingFieldsAreEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205189"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679205189"><span class="hs-identifier hs-var">mint</span></a></span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679205188"><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205188"><span class="hs-identifier hs-var">tInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">TxInfo -&gt; Value
</span><span class="hs-identifier hs-var hs-var">V2.txInfoMint</span></span><span> </span><span class="annot"><span class="annottext">TxInfo
</span><a href="#local-6989586621679205188"><span class="hs-identifier hs-var">tInfo</span></a></span><span>  </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679205189"><span class="hs-identifier hs-var">mint</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>   </span><span class="annot"><a href="#local-6989586621679205190"><span class="hs-identifier hs-type">scriptPurposeIsEquivalent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.ScriptContext</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-176"></span><span>   </span><span id="local-6989586621679205190"><span class="annot"><span class="annottext">scriptPurposeIsEquivalent :: ScriptContext -&gt; PV2CustomRedeemer -&gt; Bool
</span><a href="#local-6989586621679205190"><span class="hs-identifier hs-var hs-var">scriptPurposeIsEquivalent</span></a></span></span><span> </span><span id="local-6989586621679205186"><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205186"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#PV2CustomRedeemer"><span class="hs-identifier hs-type">PV2CustomRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxInInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TxOut]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[DCert]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map StakingCredential Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">POSIXTimeRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[PubKeyHash]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map ScriptPurpose Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679205185"><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><a href="#local-6989586621679205185"><span class="hs-identifier hs-var">mScPurpose</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><a href="#local-6989586621679205185"><span class="hs-identifier hs-var">mScPurpose</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-178"></span><span>      </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679205184"><span class="annot"><span class="annottext">ScriptPurpose
</span><a href="#local-6989586621679205184"><span class="hs-identifier hs-var">sPurp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScriptContext -&gt; ScriptPurpose
</span><span class="hs-identifier hs-var hs-var">V2.scriptContextPurpose</span></span><span> </span><span class="annot"><span class="annottext">ScriptContext
</span><a href="#local-6989586621679205186"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptPurpose -&gt; ScriptPurpose -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusPrelude.==</span></span><span> </span><span class="annot"><span class="annottext">ScriptPurpose
</span><a href="#local-6989586621679205184"><span class="hs-identifier hs-var">sPurp</span></a></span><span>
</span><span id="line-179"></span><span>      </span><span class="annot"><span class="annottext">Maybe ScriptPurpose
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Bool
forall a. () -&gt; a
</span><span class="hs-identifier hs-var">PlutusPrelude.error</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#policy"><span class="hs-identifier hs-type">policy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.MintingPolicy</span></span><span>
</span><span id="line-182"></span><span id="policy"><span class="annot"><span class="annottext">policy :: MintingPolicy
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#policy"><span class="hs-identifier hs-var hs-var">policy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompiledCode (BuiltinData -&gt; BuiltinData -&gt; ()) -&gt; MintingPolicy
</span><span class="hs-identifier hs-var">V2.mkMintingPolicyScript</span></span><span> </span><span class="hs-special">$$(</span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.compile</span></span><span> </span><span class="hs-special">[||</span><span> </span><span class="hs-identifier">wrap</span><span> </span><span class="hs-special">||]</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-184"></span><span>  </span><span id="local-6989586621679205179"><span class="annot"><span class="annottext">wrap :: BuiltinData -&gt; BuiltinData -&gt; ()
</span><a href="#local-6989586621679205179"><span class="hs-identifier hs-var hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV2CustomRedeemer -&gt; ScriptContext -&gt; Bool)
-&gt; BuiltinData -&gt; BuiltinData -&gt; ()
forall sc r.
(IsScriptContext sc, UnsafeFromData r) =&gt;
(r -&gt; sc -&gt; Bool) -&gt; BuiltinData -&gt; BuiltinData -&gt; ()
</span><span class="hs-identifier hs-var">Scripts.mkUntypedMintingPolicy</span></span><span> </span><span class="annot"><span class="annottext">PV2CustomRedeemer -&gt; ScriptContext -&gt; Bool
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mkMintEquivalenceValidator"><span class="hs-identifier hs-var">mkMintEquivalenceValidator</span></a></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#plutusMintEquivScript"><span class="hs-identifier hs-type">plutusMintEquivScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Script</span></span><span>
</span><span id="line-187"></span><span id="plutusMintEquivScript"><span class="annot"><span class="annottext">plutusMintEquivScript :: Script
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#plutusMintEquivScript"><span class="hs-identifier hs-var hs-var">plutusMintEquivScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><span class="annottext">MintingPolicy -&gt; Script
</span><span class="hs-identifier hs-var">V2.unMintingPolicyScript</span></span><span> </span><span class="annot"><span class="annottext">MintingPolicy
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#policy"><span class="hs-identifier hs-var">policy</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mintEquivValidator"><span class="hs-identifier hs-type">mintEquivValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">V2.Validator</span></span><span>
</span><span id="line-191"></span><span id="mintEquivValidator"><span class="annot"><span class="annottext">mintEquivValidator :: Validator
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mintEquivValidator"><span class="hs-identifier hs-var hs-var">mintEquivValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Script -&gt; Validator
</span><span class="hs-identifier hs-var">V2.Validator</span></span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#plutusMintEquivScript"><span class="hs-identifier hs-var">plutusMintEquivScript</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#scriptAsCbor"><span class="hs-identifier hs-type">scriptAsCbor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LBS.ByteString</span></span><span>
</span><span id="line-194"></span><span id="scriptAsCbor"><span class="annot"><span class="annottext">scriptAsCbor :: ByteString
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#scriptAsCbor"><span class="hs-identifier hs-var hs-var">scriptAsCbor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validator -&gt; ByteString
forall a. Serialise a =&gt; a -&gt; ByteString
</span><span class="hs-identifier hs-var">serialise</span></span><span> </span><span class="annot"><span class="annottext">Validator
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#mintEquivValidator"><span class="hs-identifier hs-var">mintEquivValidator</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2mintEquivScript"><span class="hs-identifier hs-type">v2mintEquivScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusScript</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptV2</span></span><span>
</span><span id="line-197"></span><span id="v2mintEquivScript"><span class="annot"><span class="annottext">v2mintEquivScript :: PlutusScript PlutusScriptV2
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2mintEquivScript"><span class="hs-identifier hs-var hs-var">v2mintEquivScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; PlutusScript PlutusScriptV2
forall lang. ShortByteString -&gt; PlutusScript lang
</span><span class="hs-identifier hs-var">PlutusScriptSerialised</span></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; PlutusScript PlutusScriptV2)
-&gt; (ByteString -&gt; ShortByteString)
-&gt; ByteString
-&gt; PlutusScript PlutusScriptV2
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ShortByteString
</span><span class="hs-identifier hs-var">SBS.toShort</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; PlutusScript PlutusScriptV2)
-&gt; ByteString -&gt; PlutusScript PlutusScriptV2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">LBS.toStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#scriptAsCbor"><span class="hs-identifier hs-var">scriptAsCbor</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="annot"><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2mintEquivScriptShortBs"><span class="hs-identifier hs-type">v2mintEquivScriptShortBs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SBS.ShortByteString</span></span><span>
</span><span id="line-200"></span><span id="v2mintEquivScriptShortBs"><span class="annot"><span class="annottext">v2mintEquivScriptShortBs :: ShortByteString
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#v2mintEquivScriptShortBs"><span class="hs-identifier hs-var hs-var">v2mintEquivScriptShortBs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ShortByteString
</span><span class="hs-identifier hs-var">SBS.toShort</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ShortByteString)
-&gt; (ByteString -&gt; ByteString) -&gt; ByteString -&gt; ShortByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">LBS.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ShortByteString) -&gt; ByteString -&gt; ShortByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="PlutusExample.PlutusVersion2.RedeemerContextEquivalence.html#scriptAsCbor"><span class="hs-identifier hs-var">scriptAsCbor</span></a></span><span>
</span><span id="line-201"></span></pre></body></html>