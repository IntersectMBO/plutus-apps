<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BlockArguments           #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DisambiguateRecordFields #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE EmptyCase                #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts         #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GADTs                    #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns           #-}</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Code temporarily copied over from cardano-api,</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- until https://github.com/input-output-hk/cardano-node/pull/2936 or something similar gets merged.</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Ledger.Tx.CardanoAPITemp</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#makeTransactionBody%27"><span class="hs-identifier">makeTransactionBody'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier">toShelleyTxOut</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Maybe</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence.Strict</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Word</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Word64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api.Shelley</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toShelleyTxOut</span></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.AuxiliaryData</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="Ledger.html"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hashAuxiliaryData</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">StrictMaybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">maybeToStrictMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Crypto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">StandardCrypto</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Serialization</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CBOR</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mkSized</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Shelley.Eras</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">StandardBabbage</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Core</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="Ledger.html"><span class="hs-identifier">Ledger</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Era</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="Ledger.html"><span class="hs-identifier">Ledger</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Alonzo.Data</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alonzo</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Alonzo.Language</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alonzo</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Alonzo.Scripts</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alonzo</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Alonzo.Tx</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alonzo</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Alonzo.TxBody</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alonzo</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Alonzo.TxWitness</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alonzo</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Babbage</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Babbage</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Babbage.PParams</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Babbage</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Babbage.Tx</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Babbage</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Babbage.TxBody</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Babbage</span></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.ShelleyMA.TxBody</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Allegra</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Keys</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Shelley</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.Tx</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Shelley</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Ledger.Shelley.TxBody</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Shelley</span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#makeTransactionBody%27"><span class="hs-identifier hs-type">makeTransactionBody'</span></a></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Babbage.PParams</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Babbage.BabbageEra</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardCrypto</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.RdmrPtr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.ExUnits</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxBodyContent</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BuildTx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BabbageEra</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxBodyError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxBody</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BabbageEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span id="makeTransactionBody%27"><span class="annot"><span class="annottext">makeTransactionBody' :: Maybe (PParams (BabbageEra StandardCrypto))
-&gt; Map RdmrPtr ExUnits
-&gt; TxBodyContent BuildTx BabbageEra
-&gt; Either TxBodyError (TxBody BabbageEra)
</span><a href="Ledger.Tx.CardanoAPITemp.html#makeTransactionBody%27"><span class="hs-identifier hs-var hs-var">makeTransactionBody'</span></a></span></span><span>
</span><span id="line-53"></span><span>    </span><span id="local-6989586621679737035"><span class="annot"><span class="annottext">Maybe (PParams (BabbageEra StandardCrypto))
</span><a href="#local-6989586621679737035"><span class="hs-identifier hs-var">mpparams</span></a></span></span><span>
</span><span id="line-54"></span><span>    </span><span id="local-6989586621679737034"><span class="annot"><span class="annottext">Map RdmrPtr ExUnits
</span><a href="#local-6989586621679737034"><span class="hs-identifier hs-var">exUnits</span></a></span></span><span>
</span><span id="line-55"></span><span>    </span><span id="local-6989586621679737033"><span class="annot"><span class="annottext">txbodycontent :: TxBodyContent BuildTx BabbageEra
</span><a href="#local-6989586621679737033"><span class="hs-identifier hs-var">txbodycontent</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">TxBodyContent</span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-56"></span><span>        </span><span id="local-6989586621679737031"><span class="annot"><span class="annottext">TxIns BuildTx BabbageEra
txIns :: forall build era. TxBodyContent build era -&gt; TxIns build era
txIns :: TxIns BuildTx BabbageEra
</span><span class="hs-identifier hs-var hs-var">txIns</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>        </span><span id="local-6989586621679737029"><span class="annot"><span class="annottext">TxInsCollateral BabbageEra
txInsCollateral :: forall build era. TxBodyContent build era -&gt; TxInsCollateral era
txInsCollateral :: TxInsCollateral BabbageEra
</span><span class="hs-identifier hs-var hs-var">txInsCollateral</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span id="local-6989586621679737027"><span class="annot"><span class="annottext">TxInsReference BuildTx BabbageEra
txInsReference :: forall build era.
TxBodyContent build era -&gt; TxInsReference build era
txInsReference :: TxInsReference BuildTx BabbageEra
</span><span class="hs-identifier hs-var hs-var">txInsReference</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span id="local-6989586621679737025"><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
txOuts :: forall build era. TxBodyContent build era -&gt; [TxOut CtxTx era]
txOuts :: [TxOut CtxTx BabbageEra]
</span><span class="hs-identifier hs-var hs-var">txOuts</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span id="local-6989586621679737023"><span class="annot"><span class="annottext">TxReturnCollateral CtxTx BabbageEra
txReturnCollateral :: forall build era.
TxBodyContent build era -&gt; TxReturnCollateral CtxTx era
txReturnCollateral :: TxReturnCollateral CtxTx BabbageEra
</span><span class="hs-identifier hs-var hs-var">txReturnCollateral</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span id="local-6989586621679737021"><span class="annot"><span class="annottext">TxTotalCollateral BabbageEra
txTotalCollateral :: forall build era. TxBodyContent build era -&gt; TxTotalCollateral era
txTotalCollateral :: TxTotalCollateral BabbageEra
</span><span class="hs-identifier hs-var hs-var">txTotalCollateral</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span id="local-6989586621679737019"><span class="annot"><span class="annottext">TxFee BabbageEra
txFee :: forall build era. TxBodyContent build era -&gt; TxFee era
txFee :: TxFee BabbageEra
</span><span class="hs-identifier hs-var hs-var">txFee</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><span class="annottext">txValidityRange :: forall build era.
TxBodyContent build era
-&gt; (TxValidityLowerBound era, TxValidityUpperBound era)
</span><span class="hs-identifier hs-var">txValidityRange</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679737016"><span class="annot"><span class="annottext">TxValidityLowerBound BabbageEra
</span><a href="#local-6989586621679737016"><span class="hs-identifier hs-var">lowerBound</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679737015"><span class="annot"><span class="annottext">TxValidityUpperBound BabbageEra
</span><a href="#local-6989586621679737015"><span class="hs-identifier hs-var">upperBound</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span id="local-6989586621679737014"><span class="annot"><span class="annottext">TxExtraKeyWitnesses BabbageEra
txExtraKeyWits :: forall build era.
TxBodyContent build era -&gt; TxExtraKeyWitnesses era
txExtraKeyWits :: TxExtraKeyWitnesses BabbageEra
</span><span class="hs-identifier hs-var hs-var">txExtraKeyWits</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span id="local-6989586621679737012"><span class="annot"><span class="annottext">TxWithdrawals BuildTx BabbageEra
txWithdrawals :: forall build era.
TxBodyContent build era -&gt; TxWithdrawals build era
txWithdrawals :: TxWithdrawals BuildTx BabbageEra
</span><span class="hs-identifier hs-var hs-var">txWithdrawals</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span id="local-6989586621679737010"><span class="annot"><span class="annottext">TxCertificates BuildTx BabbageEra
txCertificates :: forall build era.
TxBodyContent build era -&gt; TxCertificates build era
txCertificates :: TxCertificates BuildTx BabbageEra
</span><span class="hs-identifier hs-var hs-var">txCertificates</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span id="local-6989586621679737008"><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
txMintValue :: forall build era. TxBodyContent build era -&gt; TxMintValue build era
txMintValue :: TxMintValue BuildTx BabbageEra
</span><span class="hs-identifier hs-var hs-var">txMintValue</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>        </span><span id="local-6989586621679737006"><span class="annot"><span class="annottext">TxScriptValidity BabbageEra
txScriptValidity :: forall build era. TxBodyContent build era -&gt; TxScriptValidity era
txScriptValidity :: TxScriptValidity BabbageEra
</span><span class="hs-identifier hs-var hs-var">txScriptValidity</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>        </span><span id="local-6989586621679737004"><span class="annot"><span class="annottext">TxMetadataInEra BabbageEra
txMetadata :: forall build era. TxBodyContent build era -&gt; TxMetadataInEra era
txMetadata :: TxMetadataInEra BabbageEra
</span><span class="hs-identifier hs-var hs-var">txMetadata</span></span></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>        </span><span id="local-6989586621679737002"><span class="annot"><span class="annottext">TxAuxScripts BabbageEra
txAuxScripts :: forall build era. TxBodyContent build era -&gt; TxAuxScripts era
txAuxScripts :: TxAuxScripts BabbageEra
</span><span class="hs-identifier hs-var hs-var">txAuxScripts</span></span></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="annottext">TxBody BabbageEra -&gt; Either TxBodyError (TxBody BabbageEra)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBody BabbageEra -&gt; Either TxBodyError (TxBody BabbageEra))
-&gt; TxBody BabbageEra -&gt; Either TxBodyError (TxBody BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-73"></span><span>      </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
-&gt; TxBody (ShelleyLedgerEra BabbageEra)
-&gt; [Script (ShelleyLedgerEra BabbageEra)]
-&gt; TxBodyScriptData BabbageEra
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra BabbageEra))
-&gt; TxScriptValidity BabbageEra
-&gt; TxBody BabbageEra
forall era.
ShelleyBasedEra era
-&gt; TxBody (ShelleyLedgerEra era)
-&gt; [Script (ShelleyLedgerEra era)]
-&gt; TxBodyScriptData era
-&gt; Maybe (AuxiliaryData (ShelleyLedgerEra era))
-&gt; TxScriptValidity era
-&gt; TxBody era
</span><span class="hs-identifier hs-var">ShelleyTxBody</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
</span><a href="#local-6989586621679736999"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-74"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody :: forall era.
BabbageBody era =&gt;
Set (TxIn (Crypto era))
-&gt; Set (TxIn (Crypto era))
-&gt; Set (TxIn (Crypto era))
-&gt; StrictSeq (Sized (TxOut era))
-&gt; StrictMaybe (Sized (TxOut era))
-&gt; StrictMaybe Coin
-&gt; StrictSeq (DCert (Crypto era))
-&gt; Wdrl (Crypto era)
-&gt; Coin
-&gt; ValidityInterval
-&gt; StrictMaybe (Update era)
-&gt; Set (KeyHash 'Witness (Crypto era))
-&gt; Value (Crypto era)
-&gt; StrictMaybe (ScriptIntegrityHash (Crypto era))
-&gt; StrictMaybe (AuxiliaryDataHash (Crypto era))
-&gt; StrictMaybe Network
-&gt; TxBody era
</span><span class="hs-identifier hs-type">Babbage.TxBody</span></span><span>
</span><span id="line-75"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">inputs :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.inputs</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxIn StandardCrypto] -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
 -&gt; TxIn StandardCrypto)
-&gt; TxIns BuildTx BabbageEra -&gt; [TxIn StandardCrypto]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyTxIn</span></span><span> </span><span class="annot"><span class="annottext">(TxIn -&gt; TxIn StandardCrypto)
-&gt; ((TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
    -&gt; TxIn)
-&gt; (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
-&gt; TxIn StandardCrypto
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra)) -&gt; TxIn
forall a b. (a, b) -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxIns BuildTx BabbageEra
</span><a href="#local-6989586621679737031"><span class="hs-identifier hs-var">txIns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">collateral :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.collateral</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-77"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxInsCollateral BabbageEra
</span><a href="#local-6989586621679737029"><span class="hs-identifier hs-var">txInsCollateral</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-78"></span><span>                </span><span class="annot"><span class="annottext">TxInsCollateral BabbageEra
</span><span class="hs-identifier hs-var">TxInsCollateralNone</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (TxIn (Crypto (BabbageEra StandardCrypto)))
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-79"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxInsCollateral</span></span><span> </span><span class="annot"><span class="annottext">CollateralSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736989"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679736989"><span class="hs-identifier hs-var">txins</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[TxIn StandardCrypto] -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxIn -&gt; TxIn StandardCrypto) -&gt; [TxIn] -&gt; [TxIn StandardCrypto]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyTxIn</span></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679736989"><span class="hs-identifier hs-var">txins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">referenceInputs :: Set (TxIn (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.referenceInputs</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-81"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxInsReference BuildTx BabbageEra
</span><a href="#local-6989586621679737027"><span class="hs-identifier hs-var">txInsReference</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-82"></span><span>                </span><span class="annot"><span class="annottext">TxInsReference BuildTx BabbageEra
</span><span class="hs-identifier hs-var">TxInsReferenceNone</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (TxIn (Crypto (BabbageEra StandardCrypto)))
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-83"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxInsReference</span></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736985"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679736985"><span class="hs-identifier hs-var">txins</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[TxIn StandardCrypto] -&gt; Set (TxIn StandardCrypto)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxIn -&gt; TxIn StandardCrypto) -&gt; [TxIn] -&gt; [TxIn StandardCrypto]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn -&gt; TxIn StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyTxIn</span></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679736985"><span class="hs-identifier hs-var">txins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">outputs :: StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.outputs</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Sized (TxOut (BabbageEra StandardCrypto))]
-&gt; StrictSeq (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. [a] -&gt; StrictSeq a
</span><span class="hs-identifier hs-var">Seq.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxOut CtxTx BabbageEra
 -&gt; Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; [TxOut CtxTx BabbageEra]
-&gt; [Sized (TxOut (BabbageEra StandardCrypto))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut (BabbageEra StandardCrypto)
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
forall a. ToCBOR a =&gt; a -&gt; Sized a
</span><span class="hs-identifier hs-var">CBOR.mkSized</span></span><span> </span><span class="annot"><span class="annottext">(TxOut (BabbageEra StandardCrypto)
 -&gt; Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; (TxOut CtxTx BabbageEra -&gt; TxOut (BabbageEra StandardCrypto))
-&gt; TxOut CtxTx BabbageEra
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
-&gt; TxOut CtxTx BabbageEra -&gt; TxOut (BabbageEra StandardCrypto)
forall era ledgerera.
(ShelleyLedgerEra era ~ ledgerera, IsShelleyBasedEra era) =&gt;
ShelleyBasedEra era -&gt; TxOut CtxTx era -&gt; TxOut ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
</span><a href="#local-6989586621679736999"><span class="hs-identifier hs-var">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
</span><a href="#local-6989586621679737025"><span class="hs-identifier hs-var">txOuts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">collateralReturn :: StrictMaybe (Sized (TxOut (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.collateralReturn</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxReturnCollateral CtxTx BabbageEra
</span><a href="#local-6989586621679737023"><span class="hs-identifier hs-var">txReturnCollateral</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-87"></span><span>                </span><span class="annot"><span class="annottext">TxReturnCollateral CtxTx BabbageEra
</span><span class="hs-identifier hs-var">TxReturnCollateralNone</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-88"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxReturnCollateral</span></span><span> </span><span class="annot"><span class="annottext">TxTotalAndReturnCollateralSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736978"><span class="annot"><span class="annottext">TxOut CtxTx BabbageEra
</span><a href="#local-6989586621679736978"><span class="hs-identifier hs-var">colTxOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Sized (TxOut (BabbageEra StandardCrypto))
-&gt; StrictMaybe (Sized (TxOut (BabbageEra StandardCrypto)))
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">(Sized (TxOut (BabbageEra StandardCrypto))
 -&gt; StrictMaybe (Sized (TxOut (BabbageEra StandardCrypto))))
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
-&gt; StrictMaybe (Sized (TxOut (BabbageEra StandardCrypto)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut (BabbageEra StandardCrypto)
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
forall a. ToCBOR a =&gt; a -&gt; Sized a
</span><span class="hs-identifier hs-var">CBOR.mkSized</span></span><span> </span><span class="annot"><span class="annottext">(TxOut (BabbageEra StandardCrypto)
 -&gt; Sized (TxOut (BabbageEra StandardCrypto)))
-&gt; TxOut (BabbageEra StandardCrypto)
-&gt; Sized (TxOut (BabbageEra StandardCrypto))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
-&gt; TxOut CtxTx BabbageEra -&gt; TxOut (BabbageEra StandardCrypto)
forall era ledgerera.
(ShelleyLedgerEra era ~ ledgerera, IsShelleyBasedEra era) =&gt;
ShelleyBasedEra era -&gt; TxOut CtxTx era -&gt; TxOut ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
</span><a href="#local-6989586621679736999"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut CtxTx BabbageEra
</span><a href="#local-6989586621679736978"><span class="hs-identifier hs-var">colTxOut</span></a></span><span>
</span><span id="line-89"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">totalCollateral :: StrictMaybe Coin
</span><span class="hs-identifier hs-var">Babbage.totalCollateral</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxTotalCollateral BabbageEra
</span><a href="#local-6989586621679737021"><span class="hs-identifier hs-var">txTotalCollateral</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-91"></span><span>                </span><span class="annot"><span class="annottext">TxTotalCollateral BabbageEra
</span><span class="hs-identifier hs-var">TxTotalCollateralNone</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe Coin
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-92"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxTotalCollateral</span></span><span> </span><span class="annot"><span class="annottext">TxTotalAndReturnCollateralSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736973"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736973"><span class="hs-identifier hs-var">lv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Coin -&gt; StrictMaybe Coin
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">(Coin -&gt; StrictMaybe Coin) -&gt; Coin -&gt; StrictMaybe Coin
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Coin
</span><span class="hs-identifier hs-var">toShelleyLovelace</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736973"><span class="hs-identifier hs-var">lv</span></a></span><span>
</span><span id="line-93"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txcerts :: StrictSeq (DCert (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.txcerts</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-94"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxCertificates BuildTx BabbageEra
</span><a href="#local-6989586621679737010"><span class="hs-identifier hs-var">txCertificates</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-95"></span><span>                </span><span class="annot"><span class="annottext">TxCertificates BuildTx BabbageEra
</span><span class="hs-identifier hs-var">TxCertificatesNone</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictSeq (DCert (Crypto (BabbageEra StandardCrypto)))
forall a. StrictSeq a
</span><span class="hs-identifier hs-var">Seq.empty</span></span><span>
</span><span id="line-96"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxCertificates</span></span><span> </span><span class="annot"><span class="annottext">CertificatesSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736967"><span class="annot"><span class="annottext">[Certificate]
</span><a href="#local-6989586621679736967"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="annot"><span class="annottext">BuildTxWith
  BuildTx (Map StakeCredential (Witness WitCtxStake BabbageEra))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[DCert StandardCrypto] -&gt; StrictSeq (DCert StandardCrypto)
forall a. [a] -&gt; StrictSeq a
</span><span class="hs-identifier hs-var">Seq.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Certificate -&gt; DCert StandardCrypto)
-&gt; [Certificate] -&gt; [DCert StandardCrypto]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Certificate -&gt; DCert StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyCertificate</span></span><span> </span><span class="annot"><span class="annottext">[Certificate]
</span><a href="#local-6989586621679736967"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txwdrls :: Wdrl (Crypto (BabbageEra StandardCrypto))
</span><span class="hs-identifier hs-var">Babbage.txwdrls</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-98"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxWithdrawals BuildTx BabbageEra
</span><a href="#local-6989586621679737012"><span class="hs-identifier hs-var">txWithdrawals</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-99"></span><span>                </span><span class="annot"><span class="annottext">TxWithdrawals BuildTx BabbageEra
</span><span class="hs-identifier hs-var">TxWithdrawalsNone</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map (RewardAcnt StandardCrypto) Coin -&gt; Wdrl StandardCrypto
forall crypto. Map (RewardAcnt crypto) Coin -&gt; Wdrl crypto
</span><span class="hs-identifier hs-var">Shelley.Wdrl</span></span><span> </span><span class="annot"><span class="annottext">Map (RewardAcnt StandardCrypto) Coin
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-100"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxWithdrawals</span></span><span> </span><span class="annot"><span class="annottext">WithdrawalsSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736960"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace,
  BuildTxWith BuildTx (Witness WitCtxStake BabbageEra))]
</span><a href="#local-6989586621679736960"><span class="hs-identifier hs-var">ws</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace,
  BuildTxWith BuildTx (Witness WitCtxStake BabbageEra))]
-&gt; Wdrl StandardCrypto
forall a. [(StakeAddress, Lovelace, a)] -&gt; Wdrl StandardCrypto
</span><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyWithdrawal"><span class="hs-identifier hs-var">toShelleyWithdrawal</span></a></span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace,
  BuildTxWith BuildTx (Witness WitCtxStake BabbageEra))]
</span><a href="#local-6989586621679736960"><span class="hs-identifier hs-var">ws</span></a></span><span>
</span><span id="line-101"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txfee :: Coin
</span><span class="hs-identifier hs-var">Babbage.txfee</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-102"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxFee BabbageEra
</span><a href="#local-6989586621679737019"><span class="hs-identifier hs-var">txFee</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-103"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxFeeImplicit</span></span><span> </span><span id="local-6989586621679736956"><span class="annot"><span class="annottext">TxFeesImplicitInEra BabbageEra
</span><a href="#local-6989586621679736956"><span class="hs-identifier hs-var">era'</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxFeesImplicitInEra BabbageEra
</span><a href="#local-6989586621679736956"><span class="hs-identifier hs-var">era'</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxFeeExplicit</span></span><span> </span><span class="annot"><span class="annottext">TxFeesExplicitInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736954"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736954"><span class="hs-identifier hs-var">fee</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Coin
</span><span class="hs-identifier hs-var">toShelleyLovelace</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736954"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-105"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txvldt :: ValidityInterval
</span><span class="hs-identifier hs-var">Babbage.txvldt</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-106"></span><span>              </span><span class="annot"><span class="annottext">ValidityInterval :: StrictMaybe SlotNo -&gt; StrictMaybe SlotNo -&gt; ValidityInterval
</span><span class="hs-identifier hs-type">Allegra.ValidityInterval</span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-107"></span><span>                </span><span class="annot"><span class="annottext">invalidBefore :: StrictMaybe SlotNo
</span><span class="hs-identifier hs-var">invalidBefore</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxValidityLowerBound BabbageEra
</span><a href="#local-6989586621679737016"><span class="hs-identifier hs-var">lowerBound</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-108"></span><span>                                              </span><span class="annot"><span class="annottext">TxValidityLowerBound BabbageEra
</span><span class="hs-identifier hs-var">TxValidityNoLowerBound</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-109"></span><span>                                              </span><span class="annot"><span class="hs-identifier hs-type">TxValidityLowerBound</span></span><span> </span><span class="annot"><span class="annottext">ValidityLowerBoundSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736948"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679736948"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; StrictMaybe SlotNo
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679736948"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>                </span><span class="annot"><span class="annottext">invalidHereafter :: StrictMaybe SlotNo
</span><span class="hs-identifier hs-var">invalidHereafter</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxValidityUpperBound BabbageEra
</span><a href="#local-6989586621679737015"><span class="hs-identifier hs-var">upperBound</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-111"></span><span>                                              </span><span class="annot"><span class="hs-identifier hs-type">TxValidityNoUpperBound</span></span><span> </span><span class="annot"><span class="annottext">ValidityNoUpperBoundSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe SlotNo
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-112"></span><span>                                              </span><span class="annot"><span class="hs-identifier hs-type">TxValidityUpperBound</span></span><span> </span><span class="annot"><span class="annottext">ValidityUpperBoundSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736944"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679736944"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; StrictMaybe SlotNo
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679736944"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-113"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-114"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txUpdates :: StrictMaybe (Update (BabbageEra StandardCrypto))
</span><span class="hs-identifier hs-var">Babbage.txUpdates</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Update (BabbageEra StandardCrypto))
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span> </span><span class="hs-comment">-- ignoring txUpdateProposal in CardanoAPITemp</span><span>
</span><span id="line-115"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reqSignerHashes :: Set (KeyHash 'Witness (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.reqSignerHashes</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-116"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxExtraKeyWitnesses BabbageEra
</span><a href="#local-6989586621679737014"><span class="hs-identifier hs-var">txExtraKeyWits</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-117"></span><span>                </span><span class="annot"><span class="annottext">TxExtraKeyWitnesses BabbageEra
</span><span class="hs-identifier hs-var">TxExtraKeyWitnessesNone</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (Crypto (BabbageEra StandardCrypto)))
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-118"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxExtraKeyWitnesses</span></span><span> </span><span class="annot"><span class="annottext">TxExtraKeyWitnessesSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736939"><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621679736939"><span class="hs-identifier hs-var">khs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[KeyHash 'Witness StandardCrypto]
-&gt; Set (KeyHash 'Witness StandardCrypto)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span>
</span><span id="line-119"></span><span>                                                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment StandardCrypto -&gt; KeyHash 'Witness StandardCrypto
forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) crypto
       (r' :: KeyRole).
HasKeyRole a =&gt;
a r crypto -&gt; a r' crypto
</span><span class="hs-identifier hs-var">Shelley.coerceKeyRole</span></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment StandardCrypto
</span><a href="#local-6989586621679736937"><span class="hs-identifier hs-var">kh</span></a></span><span>
</span><span id="line-120"></span><span>                                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PaymentKeyHash</span></span><span> </span><span id="local-6989586621679736937"><span class="annot"><a href="#local-6989586621679736937"><span class="hs-identifier hs-var">kh</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Hash PaymentKey]
</span><a href="#local-6989586621679736939"><span class="hs-identifier hs-var">khs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-121"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mint :: Value (Crypto (BabbageEra StandardCrypto))
</span><span class="hs-identifier hs-var">Babbage.mint</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
</span><a href="#local-6989586621679737008"><span class="hs-identifier hs-var">txMintValue</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-123"></span><span>                </span><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
</span><span class="hs-identifier hs-var">TxMintNone</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value (Crypto (BabbageEra StandardCrypto))
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-124"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">TxMintValue</span></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736932"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736932"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">BuildTxWith
  BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value StandardCrypto
</span><span class="hs-identifier hs-var">toMaryValue</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736932"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-125"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">scriptIntegrityHash :: StrictMaybe
  (ScriptIntegrityHash (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.scriptIntegrityHash</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (PParams (BabbageEra StandardCrypto))
</span><a href="#local-6989586621679737035"><span class="hs-identifier hs-var">mpparams</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-127"></span><span>                </span><span class="annot"><span class="annottext">Maybe (PParams (BabbageEra StandardCrypto))
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictMaybe
  (ScriptIntegrityHash (Crypto (BabbageEra StandardCrypto)))
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-128"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679736929"><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736929"><span class="hs-identifier hs-var">pparams</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-129"></span><span>                  </span><span class="annot"><span class="annottext">Set LangDepView
-&gt; Redeemers (BabbageEra StandardCrypto)
-&gt; TxDats (BabbageEra StandardCrypto)
-&gt; StrictMaybe
     (ScriptIntegrityHash (Crypto (BabbageEra StandardCrypto)))
forall era.
Era era =&gt;
Set LangDepView
-&gt; Redeemers era
-&gt; TxDats era
-&gt; StrictMaybe (ScriptIntegrityHash (Crypto era))
</span><span class="hs-identifier hs-var">Alonzo.hashScriptIntegrity</span></span><span>
</span><span id="line-130"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Language -&gt; LangDepView) -&gt; Set Language -&gt; Set LangDepView
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span>
</span><span id="line-131"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto) -&gt; Language -&gt; LangDepView
forall era.
HasField &quot;_costmdls&quot; (PParams era) CostModels =&gt;
PParams era -&gt; Language -&gt; LangDepView
</span><span class="hs-identifier hs-var">Alonzo.getLanguageView</span></span><span> </span><span class="annot"><span class="annottext">PParams (BabbageEra StandardCrypto)
PParams (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736929"><span class="hs-identifier hs-var">pparams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>                        </span><span class="annot"><span class="annottext">Set Language
</span><a href="#local-6989586621679736925"><span class="hs-identifier hs-var">languages</span></a></span><span>
</span><span id="line-133"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>                    </span><span class="annot"><span class="annottext">Redeemers (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736924"><span class="hs-identifier hs-var">redeemers</span></a></span><span>
</span><span id="line-135"></span><span>                    </span><span class="annot"><span class="annottext">TxDats (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736923"><span class="hs-identifier hs-var">datums</span></a></span><span>
</span><span id="line-136"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">adHash :: StrictMaybe
  (AuxiliaryDataHash (Crypto (BabbageEra StandardCrypto)))
</span><span class="hs-identifier hs-var">Babbage.adHash</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-137"></span><span>              </span><span class="annot"><span class="annottext">Maybe (AuxiliaryDataHash StandardCrypto)
-&gt; StrictMaybe (AuxiliaryDataHash StandardCrypto)
forall a. Maybe a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">maybeToStrictMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AuxiliaryData (BabbageEra StandardCrypto)
-&gt; AuxiliaryDataHash StandardCrypto
forall era c.
ValidateAuxiliaryData era c =&gt;
AuxiliaryData era -&gt; AuxiliaryDataHash c
</span><span class="hs-identifier hs-var">Ledger.hashAuxiliaryData</span></span><span> </span><span class="annot"><span class="annottext">(AuxiliaryData (BabbageEra StandardCrypto)
 -&gt; AuxiliaryDataHash StandardCrypto)
-&gt; Maybe (AuxiliaryData (BabbageEra StandardCrypto))
-&gt; Maybe (AuxiliaryDataHash StandardCrypto)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (BabbageEra StandardCrypto))
Maybe (AuxiliaryData (BabbageEra StandardCrypto))
</span><a href="#local-6989586621679736920"><span class="hs-identifier hs-var">txAuxData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txnetworkid :: StrictMaybe Network
</span><span class="hs-identifier hs-var">Babbage.txnetworkid</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe Network
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-139"></span><span>          </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><span class="annottext">[Script (BabbageEra StandardCrypto)]
[Script (ShelleyLedgerEra BabbageEra)]
</span><a href="#local-6989586621679736918"><span class="hs-identifier hs-var">scripts</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptDataSupportedInEra BabbageEra
-&gt; TxDats (ShelleyLedgerEra BabbageEra)
-&gt; Redeemers (ShelleyLedgerEra BabbageEra)
-&gt; TxBodyScriptData BabbageEra
forall era.
ScriptDataSupportedInEra era
-&gt; TxDats (ShelleyLedgerEra era)
-&gt; Redeemers (ShelleyLedgerEra era)
-&gt; TxBodyScriptData era
</span><span class="hs-identifier hs-var">TxBodyScriptData</span></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra BabbageEra
</span><span class="hs-identifier hs-var">ScriptDataInBabbageEra</span></span><span> </span><span class="annot"><span class="annottext">TxDats (BabbageEra StandardCrypto)
TxDats (ShelleyLedgerEra BabbageEra)
</span><a href="#local-6989586621679736923"><span class="hs-identifier hs-var">datums</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemers (BabbageEra StandardCrypto)
Redeemers (ShelleyLedgerEra BabbageEra)
</span><a href="#local-6989586621679736924"><span class="hs-identifier hs-var">redeemers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (BabbageEra StandardCrypto))
Maybe (AuxiliaryData (ShelleyLedgerEra BabbageEra))
</span><a href="#local-6989586621679736920"><span class="hs-identifier hs-var">txAuxData</span></a></span><span>
</span><span id="line-143"></span><span>        </span><span class="annot"><span class="annottext">TxScriptValidity BabbageEra
</span><a href="#local-6989586621679737006"><span class="hs-identifier hs-var">txScriptValidity</span></a></span><span>
</span><span id="line-144"></span><span>        </span><span class="hs-comment">-- TODO alonzo: support the supplementary script data</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>    </span><span id="local-6989586621679736999"><span class="annot"><span class="annottext">era :: ShelleyBasedEra BabbageEra
</span><a href="#local-6989586621679736999"><span class="hs-identifier hs-var hs-var">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra BabbageEra
</span><span class="hs-identifier hs-var">ShelleyBasedEraBabbage</span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="#local-6989586621679736914"><span class="hs-identifier hs-type">witnesses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptWitnessIndex</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyScriptWitness</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BabbageEra</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-149"></span><span>    </span><span id="local-6989586621679736914"><span class="annot"><span class="annottext">witnesses :: [(ScriptWitnessIndex, AnyScriptWitness BabbageEra)]
</span><a href="#local-6989586621679736914"><span class="hs-identifier hs-var hs-var">witnesses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx BabbageEra
-&gt; [(ScriptWitnessIndex, AnyScriptWitness BabbageEra)]
forall era.
TxBodyContent BuildTx era
-&gt; [(ScriptWitnessIndex, AnyScriptWitness era)]
</span><span class="hs-identifier hs-var">collectTxBodyScriptWitnesses</span></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx BabbageEra
</span><a href="#local-6989586621679737033"><span class="hs-identifier hs-var">txbodycontent</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="#local-6989586621679736918"><span class="hs-identifier hs-type">scripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Ledger.Script</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardBabbage</span></span><span class="hs-special">]</span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621679736918"><span class="annot"><span class="annottext">scripts :: [Script (BabbageEra StandardCrypto)]
</span><a href="#local-6989586621679736918"><span class="hs-identifier hs-var hs-var">scripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe (Script (BabbageEra StandardCrypto))]
-&gt; [Script (BabbageEra StandardCrypto)]
forall a. [Maybe a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Maybe.catMaybes</span></a></span><span>
</span><span id="line-153"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScriptInEra BabbageEra -&gt; Script (BabbageEra StandardCrypto)
forall era. ScriptInEra era -&gt; Script (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">toShelleyScript</span></span><span> </span><span class="annot"><span class="annottext">(ScriptInEra BabbageEra -&gt; Script (BabbageEra StandardCrypto))
-&gt; Maybe (ScriptInEra BabbageEra)
-&gt; Maybe (Script (BabbageEra StandardCrypto))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness witctx BabbageEra -&gt; Maybe (ScriptInEra BabbageEra)
forall witctx era.
ScriptWitness witctx era -&gt; Maybe (ScriptInEra era)
</span><span class="hs-identifier hs-var">scriptWitnessScript</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitness witctx BabbageEra
</span><a href="#local-6989586621679736909"><span class="hs-identifier hs-var">scriptwitness</span></a></span><span>
</span><span id="line-154"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyScriptWitness</span></span><span> </span><span id="local-6989586621679736909"><span class="annot"><span class="annottext">ScriptWitness witctx BabbageEra
</span><a href="#local-6989586621679736909"><span class="hs-identifier hs-var">scriptwitness</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(ScriptWitnessIndex, AnyScriptWitness BabbageEra)]
</span><a href="#local-6989586621679736914"><span class="hs-identifier hs-var">witnesses</span></a></span><span>
</span><span id="line-155"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><a href="#local-6989586621679736923"><span class="hs-identifier hs-type">datums</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.TxDats</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardBabbage</span></span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621679736923"><span class="annot"><span class="annottext">datums :: TxDats (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736923"><span class="hs-identifier hs-var hs-var">datums</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-159"></span><span>      </span><span class="annot"><span class="annottext">Map
  (DataHash (Crypto (BabbageEra StandardCrypto)))
  (Data (BabbageEra StandardCrypto))
-&gt; TxDats (BabbageEra StandardCrypto)
forall era.
Typeable era =&gt;
Map (DataHash (Crypto era)) (Data era) -&gt; TxDats era
</span><span class="hs-identifier hs-var">Alonzo.TxDats</span></span><span> </span><span class="annot"><span class="annottext">(Map
   (DataHash (Crypto (BabbageEra StandardCrypto)))
   (Data (BabbageEra StandardCrypto))
 -&gt; TxDats (BabbageEra StandardCrypto))
-&gt; Map
     (DataHash (Crypto (BabbageEra StandardCrypto)))
     (Data (BabbageEra StandardCrypto))
-&gt; TxDats (BabbageEra StandardCrypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="annottext">[(DataHash StandardCrypto, Data (BabbageEra StandardCrypto))]
-&gt; Map (DataHash StandardCrypto) (Data (BabbageEra StandardCrypto))
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-161"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
-&gt; DataHash (Crypto (BabbageEra StandardCrypto))
forall era. Era era =&gt; Data era -&gt; DataHash (Crypto era)
</span><span class="hs-identifier hs-var">Alonzo.hashData</span></span><span> </span><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736904"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736904"><span class="hs-identifier hs-var">d'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679736903"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736903"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ScriptData]
</span><a href="#local-6989586621679736902"><span class="hs-identifier hs-var">scriptdata</span></a></span><span>
</span><span id="line-163"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679736904"><span class="annot"><span class="annottext">d' :: Data (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736904"><span class="hs-identifier hs-var hs-var">d'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptData -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. ScriptData -&gt; Data ledgerera
</span><span class="hs-identifier hs-var">toAlonzoData</span></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736903"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-164"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="#local-6989586621679736902"><span class="hs-identifier hs-type">scriptdata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ScriptData</span></span><span class="hs-special">]</span><span>
</span><span id="line-167"></span><span>    </span><span id="local-6989586621679736902"><span class="annot"><span class="annottext">scriptdata :: [ScriptData]
</span><a href="#local-6989586621679736902"><span class="hs-identifier hs-var hs-var">scriptdata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ScriptData] -&gt; [ScriptData]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">List.nub</span></a></span><span> </span><span class="annot"><span class="annottext">([ScriptData] -&gt; [ScriptData]) -&gt; [ScriptData] -&gt; [ScriptData]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736899"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxOutValue BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumInTx</span></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736899"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736899"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReferenceScript BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
</span><a href="#local-6989586621679737025"><span class="hs-identifier hs-var">txOuts</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-169"></span><span>      </span><span class="annot"><span class="annottext">[ScriptData] -&gt; [ScriptData] -&gt; [ScriptData]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736896"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyScriptWitness</span></span><span>
</span><span id="line-170"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptWitness</span></span><span>
</span><span id="line-171"></span><span>                        </span><span class="annot"><span class="annottext">ScriptLanguageInEra lang BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptOrReferenceInput lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptDatumForTxIn</span></span><span> </span><span id="local-6989586621679736896"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736896"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExecutionUnits
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(ScriptWitnessIndex, AnyScriptWitness BabbageEra)]
</span><a href="#local-6989586621679736914"><span class="hs-identifier hs-var">witnesses</span></a></span><span>
</span><span id="line-172"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><a href="#local-6989586621679736924"><span class="hs-identifier hs-type">redeemers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.Redeemers</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardBabbage</span></span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621679736924"><span class="annot"><span class="annottext">redeemers :: Redeemers (BabbageEra StandardCrypto)
</span><a href="#local-6989586621679736924"><span class="hs-identifier hs-var hs-var">redeemers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="annottext">Map RdmrPtr (Data (BabbageEra StandardCrypto), ExUnits)
-&gt; Redeemers (BabbageEra StandardCrypto)
forall era.
Era era =&gt;
Map RdmrPtr (Data era, ExUnits) -&gt; Redeemers era
</span><span class="hs-identifier hs-var">Alonzo.Redeemers</span></span><span> </span><span class="annot"><span class="annottext">(Map RdmrPtr (Data (BabbageEra StandardCrypto), ExUnits)
 -&gt; Redeemers (BabbageEra StandardCrypto))
-&gt; Map RdmrPtr (Data (BabbageEra StandardCrypto), ExUnits)
-&gt; Redeemers (BabbageEra StandardCrypto)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-177"></span><span>        </span><span class="annot"><span class="annottext">[(RdmrPtr, (Data (BabbageEra StandardCrypto), ExUnits))]
-&gt; Map RdmrPtr (Data (BabbageEra StandardCrypto), ExUnits)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-178"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679736892"><span class="annot"><span class="annottext">ptr :: RdmrPtr
</span><a href="#local-6989586621679736892"><span class="hs-identifier hs-var hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptWitnessIndex -&gt; RdmrPtr
</span><span class="hs-identifier hs-var">toAlonzoRdmrPtr</span></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><a href="#local-6989586621679736890"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdmrPtr
</span><a href="#local-6989586621679736892"><span class="hs-identifier hs-var">ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptData -&gt; Data (BabbageEra StandardCrypto)
forall ledgerera. ScriptData -&gt; Data ledgerera
</span><span class="hs-identifier hs-var">toAlonzoData</span></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736889"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExUnits -&gt; Maybe ExUnits -&gt; ExUnits
forall a. a -&gt; Maybe a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Maybe.fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExecutionUnits -&gt; ExUnits
</span><span class="hs-identifier hs-var">toAlonzoExUnits</span></span><span> </span><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="#local-6989586621679736886"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe ExUnits -&gt; ExUnits) -&gt; Maybe ExUnits -&gt; ExUnits
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RdmrPtr -&gt; Map RdmrPtr ExUnits -&gt; Maybe ExUnits
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">RdmrPtr
</span><a href="#local-6989586621679736892"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">Map RdmrPtr ExUnits
</span><a href="#local-6989586621679737034"><span class="hs-identifier hs-var">exUnits</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679736890"><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><a href="#local-6989586621679736890"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyScriptWitness</span></span><span>
</span><span id="line-180"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra lang BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptOrReferenceInput lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptDatum witctx
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736889"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736889"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621679736886"><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="#local-6989586621679736886"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(ScriptWitnessIndex, AnyScriptWitness BabbageEra)]
</span><a href="#local-6989586621679736914"><span class="hs-identifier hs-var">witnesses</span></a></span><span>
</span><span id="line-181"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><a href="#local-6989586621679736925"><span class="hs-identifier hs-type">languages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.Language</span></span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621679736925"><span class="annot"><span class="annottext">languages :: Set Language
</span><a href="#local-6989586621679736925"><span class="hs-identifier hs-var hs-var">languages</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>      </span><span class="annot"><span class="annottext">[Language] -&gt; Set Language
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">([Language] -&gt; Set Language) -&gt; [Language] -&gt; Set Language
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe Language] -&gt; [Language]
forall a. [Maybe a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Maybe.catMaybes</span></a></span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScriptWitness witctx BabbageEra -&gt; Maybe Language
forall witctx era. ScriptWitness witctx era -&gt; Maybe Language
</span><a href="#local-6989586621679736884"><span class="hs-identifier hs-var">getScriptLanguage</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitness witctx BabbageEra
</span><a href="#local-6989586621679736883"><span class="hs-identifier hs-var">sw</span></a></span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptWitnessIndex
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyScriptWitness</span></span><span> </span><span id="local-6989586621679736883"><span class="annot"><span class="annottext">ScriptWitness witctx BabbageEra
</span><a href="#local-6989586621679736883"><span class="hs-identifier hs-var">sw</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(ScriptWitnessIndex, AnyScriptWitness BabbageEra)]
</span><a href="#local-6989586621679736914"><span class="hs-identifier hs-var">witnesses</span></a></span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621679737099"><span id="local-6989586621679737100"><span class="annot"><a href="#local-6989586621679736884"><span class="hs-identifier hs-type">getScriptLanguage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptWitness</span></span><span> </span><span class="annot"><a href="#local-6989586621679737100"><span class="hs-identifier hs-type">witctx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679737099"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.Language</span></span></span></span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621679736884"><span class="annot"><span class="annottext">getScriptLanguage :: ScriptWitness witctx era -&gt; Maybe Language
</span><a href="#local-6989586621679736884"><span class="hs-identifier hs-var hs-var">getScriptLanguage</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PlutusScriptWitness</span></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra lang era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736882"><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><a href="#local-6989586621679736882"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptOrReferenceInput lang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptDatum witctx
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExecutionUnits
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">Language -&gt; Maybe Language
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Language -&gt; Maybe Language) -&gt; Language -&gt; Maybe Language
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AnyPlutusScriptVersion -&gt; Language
</span><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoLanguage"><span class="hs-identifier hs-var">toAlonzoLanguage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlutusScriptVersion lang -&gt; AnyPlutusScriptVersion
forall lang. PlutusScriptVersion lang -&gt; AnyPlutusScriptVersion
</span><span class="hs-identifier hs-var">AnyPlutusScriptVersion</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><a href="#local-6989586621679736882"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><a href="#local-6989586621679736884"><span class="hs-identifier hs-var">getScriptLanguage</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SimpleScriptWitness</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Language
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><a href="#local-6989586621679736920"><span class="hs-identifier hs-type">txAuxData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ledger.AuxiliaryData</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardBabbage</span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>    </span><span id="local-6989586621679736920"><span class="annot"><span class="annottext">txAuxData :: Maybe (AuxiliaryData (BabbageEra StandardCrypto))
</span><a href="#local-6989586621679736920"><span class="hs-identifier hs-var hs-var">txAuxData</span></a></span></span><span>
</span><span id="line-197"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue -&gt; Bool
forall k a. Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.null</span></span><span> </span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736877"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ScriptInEra BabbageEra] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptInEra BabbageEra]
</span><a href="#local-6989586621679736875"><span class="hs-identifier hs-var">ss</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (AuxiliaryData (BabbageEra StandardCrypto))
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AuxiliaryData (BabbageEra StandardCrypto)
-&gt; Maybe (AuxiliaryData (BabbageEra StandardCrypto))
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
-&gt; [ScriptInEra BabbageEra]
-&gt; AuxiliaryData (BabbageEra StandardCrypto)
forall era ledgerera.
(ShelleyLedgerEra era ~ ledgerera,
 AuxiliaryData ledgerera ~ AuxiliaryData ledgerera,
 Script ledgerera ~ Script ledgerera, Era ledgerera) =&gt;
Map Word64 TxMetadataValue
-&gt; [ScriptInEra era] -&gt; AuxiliaryData ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoAuxiliaryData"><span class="hs-identifier hs-var">toAlonzoAuxiliaryData</span></a></span><span> </span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736877"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="annot"><span class="annottext">[ScriptInEra BabbageEra]
</span><a href="#local-6989586621679736875"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-201"></span><span>        </span><span id="local-6989586621679736877"><span class="annot"><span class="annottext">ms :: Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736877"><span class="hs-identifier hs-var hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxMetadataInEra BabbageEra
</span><a href="#local-6989586621679737004"><span class="hs-identifier hs-var">txMetadata</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-202"></span><span>               </span><span class="annot"><span class="annottext">TxMetadataInEra BabbageEra
</span><span class="hs-identifier hs-var">TxMetadataNone</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-203"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">TxMetadataInEra</span></span><span> </span><span class="annot"><span class="annottext">TxMetadataSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxMetadata</span></span><span> </span><span id="local-6989586621679736870"><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736870"><span class="hs-identifier hs-var">ms'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736870"><span class="hs-identifier hs-var">ms'</span></a></span><span>
</span><span id="line-204"></span><span>        </span><span id="local-6989586621679736875"><span class="annot"><span class="annottext">ss :: [ScriptInEra BabbageEra]
</span><a href="#local-6989586621679736875"><span class="hs-identifier hs-var hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxAuxScripts BabbageEra
</span><a href="#local-6989586621679737002"><span class="hs-identifier hs-var">txAuxScripts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-205"></span><span>               </span><span class="annot"><span class="annottext">TxAuxScripts BabbageEra
</span><span class="hs-identifier hs-var">TxAuxScriptsNone</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-206"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">TxAuxScripts</span></span><span> </span><span class="annot"><span class="annottext">AuxScriptsSupportedInEra BabbageEra
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736867"><span class="annot"><span class="annottext">[ScriptInEra BabbageEra]
</span><a href="#local-6989586621679736867"><span class="hs-identifier hs-var">ss'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[ScriptInEra BabbageEra]
</span><a href="#local-6989586621679736867"><span class="hs-identifier hs-var">ss'</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621679737183"><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyWithdrawal"><span class="hs-identifier hs-type">toShelleyWithdrawal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StakeAddress</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lovelace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679737183"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Shelley.Wdrl</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardCrypto</span></span></span><span>
</span><span id="line-210"></span><span id="toShelleyWithdrawal"><span class="annot"><span class="annottext">toShelleyWithdrawal :: [(StakeAddress, Lovelace, a)] -&gt; Wdrl StandardCrypto
</span><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyWithdrawal"><span class="hs-identifier hs-var hs-var">toShelleyWithdrawal</span></a></span></span><span> </span><span id="local-6989586621679736866"><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, a)]
</span><a href="#local-6989586621679736866"><span class="hs-identifier hs-var">withdrawals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">Map (RewardAcnt StandardCrypto) Coin -&gt; Wdrl StandardCrypto
forall crypto. Map (RewardAcnt crypto) Coin -&gt; Wdrl crypto
</span><span class="hs-identifier hs-var">Shelley.Wdrl</span></span><span> </span><span class="annot"><span class="annottext">(Map (RewardAcnt StandardCrypto) Coin -&gt; Wdrl StandardCrypto)
-&gt; Map (RewardAcnt StandardCrypto) Coin -&gt; Wdrl StandardCrypto
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-212"></span><span>      </span><span class="annot"><span class="annottext">[(RewardAcnt StandardCrypto, Coin)]
-&gt; Map (RewardAcnt StandardCrypto) Coin
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-213"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakeAddress -&gt; RewardAcnt StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyStakeAddr</span></span><span> </span><span class="annot"><span class="annottext">StakeAddress
</span><a href="#local-6989586621679736864"><span class="hs-identifier hs-var">stakeAddr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Lovelace -&gt; Coin
</span><span class="hs-identifier hs-var">toShelleyLovelace</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736863"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679736864"><span class="annot"><span class="annottext">StakeAddress
</span><a href="#local-6989586621679736864"><span class="hs-identifier hs-var">stakeAddr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679736863"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736863"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(StakeAddress, Lovelace, a)]
</span><a href="#local-6989586621679736866"><span class="hs-identifier hs-var">withdrawals</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-type">toShelleyTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679737200"><span class="annot"><a href="#local-6989586621679737200"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679737199"><span class="annot"><a href="#local-6989586621679737199"><span class="hs-identifier hs-type">ledgerera</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-217"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737200"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679737199"><span class="hs-identifier hs-type">ledgerera</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737200"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737200"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679737200"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.TxOut</span></span><span> </span><span class="annot"><a href="#local-6989586621679737199"><span class="hs-identifier hs-type">ledgerera</span></a></span><span>
</span><span id="line-219"></span><span id="toShelleyTxOut"><span class="annot"><span class="annottext">toShelleyTxOut :: ShelleyBasedEra era -&gt; TxOut CtxTx era -&gt; TxOut ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var hs-var">toShelleyTxOut</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutAdaOnly</span></span><span> </span><span class="annot"><span class="annottext">OnlyAdaSupportedInEra era
</span><span class="hs-identifier hs-var">AdaOnlyInByronEra</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
forall era. IsShelleyBasedEra era =&gt; ShelleyBasedEra era
</span><span class="hs-identifier hs-var">shelleyBasedEra</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShelleyBasedEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737200"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span id="local-6989586621679736859"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736859"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutAdaOnly</span></span><span> </span><span class="annot"><span class="annottext">OnlyAdaSupportedInEra era
</span><span class="hs-identifier hs-var">AdaOnlyInShelleyEra</span></span><span> </span><span id="local-6989586621679736857"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736857"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">Addr (Crypto (ShelleyEra StandardCrypto))
-&gt; Value (ShelleyEra StandardCrypto)
-&gt; TxOut (ShelleyEra StandardCrypto)
forall era.
(Era era, Show (Value era), Compactible (Value era)) =&gt;
Addr (Crypto era) -&gt; Value era -&gt; TxOut era
</span><span class="hs-identifier hs-var">Shelley.TxOut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressInEra era -&gt; Addr StandardCrypto
forall era. AddressInEra era -&gt; Addr StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyAddr</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736859"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lovelace -&gt; Coin
</span><span class="hs-identifier hs-var">toShelleyLovelace</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736857"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span id="local-6989586621679736854"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736854"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutAdaOnly</span></span><span> </span><span class="annot"><span class="annottext">OnlyAdaSupportedInEra era
</span><span class="hs-identifier hs-var">AdaOnlyInAllegraEra</span></span><span> </span><span id="local-6989586621679736852"><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736852"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>    </span><span class="annot"><span class="annottext">Addr (Crypto (ShelleyMAEra 'Allegra StandardCrypto))
-&gt; Value (ShelleyMAEra 'Allegra StandardCrypto)
-&gt; TxOut (ShelleyMAEra 'Allegra StandardCrypto)
forall era.
(Era era, Show (Value era), Compactible (Value era)) =&gt;
Addr (Crypto era) -&gt; Value era -&gt; TxOut era
</span><span class="hs-identifier hs-var">Shelley.TxOut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressInEra era -&gt; Addr StandardCrypto
forall era. AddressInEra era -&gt; Addr StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyAddr</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736854"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lovelace -&gt; Coin
</span><span class="hs-identifier hs-var">toShelleyLovelace</span></span><span> </span><span class="annot"><span class="annottext">Lovelace
</span><a href="#local-6989586621679736852"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span id="local-6989586621679736851"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736851"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutValue</span></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra era
</span><span class="hs-identifier hs-var">MultiAssetInMaryEra</span></span><span> </span><span id="local-6989586621679736848"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736848"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-229"></span><span>    </span><span class="annot"><span class="annottext">Addr (Crypto (ShelleyMAEra 'Mary StandardCrypto))
-&gt; Value (ShelleyMAEra 'Mary StandardCrypto)
-&gt; TxOut (ShelleyMAEra 'Mary StandardCrypto)
forall era.
(Era era, Show (Value era), Compactible (Value era)) =&gt;
Addr (Crypto era) -&gt; Value era -&gt; TxOut era
</span><span class="hs-identifier hs-var">Shelley.TxOut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressInEra era -&gt; Addr StandardCrypto
forall era. AddressInEra era -&gt; Addr StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyAddr</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736851"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value StandardCrypto
</span><span class="hs-identifier hs-var">toMaryValue</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736848"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-comment">-- | Copied from Cardano API to handle all TxOut contexts, we can</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- propose a PR to cardano-node to propagate this version and remove the code duplication</span><span>
</span><span id="line-233"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span id="local-6989586621679736847"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736847"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutValue</span></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra era
</span><span class="hs-identifier hs-var">MultiAssetInAlonzoEra</span></span><span> </span><span id="local-6989586621679736845"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736845"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679736844"><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621679736844"><span class="hs-identifier hs-var">txoutdata</span></a></span></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><span class="annottext">Addr (Crypto (AlonzoEra StandardCrypto))
-&gt; Value (AlonzoEra StandardCrypto)
-&gt; StrictMaybe (DataHash (Crypto (AlonzoEra StandardCrypto)))
-&gt; TxOut (AlonzoEra StandardCrypto)
forall era.
(Era era, Compactible (Value era), Val (Value era),
 HasCallStack) =&gt;
Addr (Crypto era)
-&gt; Value era -&gt; StrictMaybe (DataHash (Crypto era)) -&gt; TxOut era
</span><span class="hs-identifier hs-var">Alonzo.TxOut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressInEra era -&gt; Addr StandardCrypto
forall era. AddressInEra era -&gt; Addr StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyAddr</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736847"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value StandardCrypto
</span><span class="hs-identifier hs-var">toMaryValue</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736845"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutDatum CtxTx era -&gt; StrictMaybe (DataHash StandardCrypto)
forall era.
TxOutDatum CtxTx era -&gt; StrictMaybe (DataHash StandardCrypto)
</span><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoTxOutDataHash"><span class="hs-identifier hs-var">toAlonzoTxOutDataHash</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621679736844"><span class="hs-identifier hs-var">txoutdata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toShelleyTxOut"><span class="hs-identifier hs-var">toShelleyTxOut</span></a></span><span> </span><span id="local-6989586621679736841"><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621679736841"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOut</span></span><span> </span><span id="local-6989586621679736840"><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736840"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutValue</span></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra era
</span><span class="hs-identifier hs-var">MultiAssetInBabbageEra</span></span><span> </span><span id="local-6989586621679736838"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736838"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679736837"><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621679736837"><span class="hs-identifier hs-var">txoutdata</span></a></span></span><span> </span><span id="local-6989586621679736836"><span class="annot"><span class="annottext">ReferenceScript era
</span><a href="#local-6989586621679736836"><span class="hs-identifier hs-var">refScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679736835"><span class="annot"><span class="annottext">cEra :: CardanoEra era
</span><a href="#local-6989586621679736835"><span class="hs-identifier hs-var hs-var">cEra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era -&gt; CardanoEra era
forall era. ShelleyBasedEra era -&gt; CardanoEra era
</span><span class="hs-identifier hs-var">shelleyBasedToCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">ShelleyBasedEra era
</span><a href="#local-6989586621679736841"><span class="hs-identifier hs-var">era</span></a></span><span>
</span><span id="line-239"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Addr (Crypto (BabbageEra StandardCrypto))
-&gt; Value (BabbageEra StandardCrypto)
-&gt; Datum (BabbageEra StandardCrypto)
-&gt; StrictMaybe (Script (BabbageEra StandardCrypto))
-&gt; TxOut (BabbageEra StandardCrypto)
forall era.
(Era era, Compactible (Value era), Val (Value era),
 HasCallStack) =&gt;
Addr (Crypto era)
-&gt; Value era -&gt; Datum era -&gt; StrictMaybe (Script era) -&gt; TxOut era
</span><span class="hs-identifier hs-var">Babbage.TxOut</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AddressInEra era -&gt; Addr StandardCrypto
forall era. AddressInEra era -&gt; Addr StandardCrypto
</span><span class="hs-identifier hs-var">toShelleyAddr</span></span><span> </span><span class="annot"><span class="annottext">AddressInEra era
</span><a href="#local-6989586621679736840"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Value StandardCrypto
</span><span class="hs-identifier hs-var">toMaryValue</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679736838"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutDatum CtxTx era -&gt; Datum (ShelleyLedgerEra era)
forall era.
(Crypto (ShelleyLedgerEra era) ~ StandardCrypto) =&gt;
TxOutDatum CtxTx era -&gt; Datum (ShelleyLedgerEra era)
</span><a href="Ledger.Tx.CardanoAPITemp.html#toBabbageTxOutDatum"><span class="hs-identifier hs-var">toBabbageTxOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><a href="#local-6989586621679736837"><span class="hs-identifier hs-var">txoutdata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra era
-&gt; ReferenceScript era
-&gt; StrictMaybe (Script (ShelleyLedgerEra era))
forall era.
CardanoEra era
-&gt; ReferenceScript era
-&gt; StrictMaybe (Script (ShelleyLedgerEra era))
</span><span class="hs-identifier hs-var">refScriptToShelleyScript</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><a href="#local-6989586621679736835"><span class="hs-identifier hs-var">cEra</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScript era
</span><a href="#local-6989586621679736836"><span class="hs-identifier hs-var">refScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span id="local-6989586621679737062"><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoTxOutDataHash"><span class="hs-identifier hs-type">toAlonzoTxOutDataHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxOutDatum</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679737062"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-245"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StrictMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Alonzo.DataHash</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardCrypto</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-246"></span><span id="toAlonzoTxOutDataHash"><span class="annot"><span class="annottext">toAlonzoTxOutDataHash :: TxOutDatum CtxTx era -&gt; StrictMaybe (DataHash StandardCrypto)
</span><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoTxOutDataHash"><span class="hs-identifier hs-var hs-var">toAlonzoTxOutDataHash</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><span class="hs-identifier hs-var">TxOutDatumNone</span></span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictMaybe (DataHash StandardCrypto)
forall a. StrictMaybe a
</span><span class="hs-identifier hs-var">SNothing</span></span><span>
</span><span id="line-247"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoTxOutDataHash"><span class="hs-identifier hs-var">toAlonzoTxOutDataHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumHash</span></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptDataHash</span></span><span> </span><span id="local-6989586621679736827"><span class="annot"><a href="#local-6989586621679736827"><span class="hs-identifier hs-var">dh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto -&gt; StrictMaybe (DataHash StandardCrypto)
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
</span><a href="#local-6989586621679736827"><span class="hs-identifier hs-var">dh</span></a></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoTxOutDataHash"><span class="hs-identifier hs-var">toAlonzoTxOutDataHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumInTx</span></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736826"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736826"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptDataHash</span></span><span> </span><span id="local-6989586621679736825"><span class="annot"><a href="#local-6989586621679736825"><span class="hs-identifier hs-var">dh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptData -&gt; Hash ScriptData
</span><span class="hs-identifier hs-var">hashScriptData</span></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736826"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto -&gt; StrictMaybe (DataHash StandardCrypto)
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
</span><a href="#local-6989586621679736825"><span class="hs-identifier hs-var">dh</span></a></span><span>
</span><span id="line-249"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoTxOutDataHash"><span class="hs-identifier hs-var">toAlonzoTxOutDataHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumInline</span></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736822"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736822"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptDataHash</span></span><span> </span><span id="local-6989586621679736821"><span class="annot"><a href="#local-6989586621679736821"><span class="hs-identifier hs-var">dh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptData -&gt; Hash ScriptData
</span><span class="hs-identifier hs-var">hashScriptData</span></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736822"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto -&gt; StrictMaybe (DataHash StandardCrypto)
forall a. a -&gt; StrictMaybe a
</span><span class="hs-identifier hs-var">SJust</span></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
</span><a href="#local-6989586621679736821"><span class="hs-identifier hs-var">dh</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span id="local-6989586621679737057"><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toBabbageTxOutDatum"><span class="hs-identifier hs-type">toBabbageTxOutDatum</span></a></span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.Crypto</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737057"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardCrypto</span></span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxOutDatum</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CtxTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679737057"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Babbage.Datum</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737057"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-254"></span><span id="toBabbageTxOutDatum"><span class="annot"><span class="annottext">toBabbageTxOutDatum :: TxOutDatum CtxTx era -&gt; Datum (ShelleyLedgerEra era)
</span><a href="Ledger.Tx.CardanoAPITemp.html#toBabbageTxOutDatum"><span class="hs-identifier hs-var hs-var">toBabbageTxOutDatum</span></a></span></span><span>  </span><span class="annot"><span class="annottext">TxOutDatum CtxTx era
</span><span class="hs-identifier hs-var">TxOutDatumNone</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Datum (ShelleyLedgerEra era)
forall era. Datum era
</span><span class="hs-identifier hs-var">Babbage.NoDatum</span></span><span>
</span><span id="line-255"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toBabbageTxOutDatum"><span class="hs-identifier hs-var">toBabbageTxOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumHash</span></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ScriptDataHash</span></span><span> </span><span id="local-6989586621679736819"><span class="annot"><a href="#local-6989586621679736819"><span class="hs-identifier hs-var">dh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataHash (Crypto (ShelleyLedgerEra era))
-&gt; Datum (ShelleyLedgerEra era)
forall era. DataHash (Crypto era) -&gt; Datum era
</span><span class="hs-identifier hs-var">Babbage.DatumHash</span></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
DataHash (Crypto (ShelleyLedgerEra era))
</span><a href="#local-6989586621679736819"><span class="hs-identifier hs-var">dh</span></a></span><span>
</span><span id="line-256"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toBabbageTxOutDatum"><span class="hs-identifier hs-var">toBabbageTxOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumInTx</span></span><span> </span><span class="annot"><span class="annottext">ScriptDataSupportedInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736817"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736817"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptDataHash</span></span><span> </span><span id="local-6989586621679736816"><span class="annot"><a href="#local-6989586621679736816"><span class="hs-identifier hs-var">dh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptData -&gt; Hash ScriptData
</span><span class="hs-identifier hs-var">hashScriptData</span></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736817"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">DataHash (Crypto (ShelleyLedgerEra era))
-&gt; Datum (ShelleyLedgerEra era)
forall era. DataHash (Crypto era) -&gt; Datum era
</span><span class="hs-identifier hs-var">Babbage.DatumHash</span></span><span> </span><span class="annot"><span class="annottext">DataHash StandardCrypto
DataHash (Crypto (ShelleyLedgerEra era))
</span><a href="#local-6989586621679736816"><span class="hs-identifier hs-var">dh</span></a></span><span>
</span><span id="line-257"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toBabbageTxOutDatum"><span class="hs-identifier hs-var">toBabbageTxOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TxOutDatumInline</span></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679736815"><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736815"><span class="hs-identifier hs-var">sd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptData -&gt; Datum (ShelleyLedgerEra era)
forall ledgerera. ScriptData -&gt; Datum ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#scriptDataToInlineDatum"><span class="hs-identifier hs-var">scriptDataToInlineDatum</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptData
</span><a href="#local-6989586621679736815"><span class="hs-identifier hs-var">sd</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span id="local-6989586621679737052"><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#scriptDataToInlineDatum"><span class="hs-identifier hs-type">scriptDataToInlineDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ScriptData</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Babbage.Datum</span></span><span> </span><span class="annot"><a href="#local-6989586621679737052"><span class="hs-identifier hs-type">ledgerera</span></a></span></span><span>
</span><span id="line-260"></span><span id="scriptDataToInlineDatum"><span class="annot"><span class="annottext">scriptDataToInlineDatum :: ScriptData -&gt; Datum ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#scriptDataToInlineDatum"><span class="hs-identifier hs-var hs-var">scriptDataToInlineDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinaryData ledgerera -&gt; Datum ledgerera
forall era. BinaryData era -&gt; Datum era
</span><span class="hs-identifier hs-var">Babbage.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BinaryData ledgerera -&gt; Datum ledgerera)
-&gt; (ScriptData -&gt; BinaryData ledgerera)
-&gt; ScriptData
-&gt; Datum ledgerera
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Data ledgerera -&gt; BinaryData ledgerera
forall era. Data era -&gt; BinaryData era
</span><span class="hs-identifier hs-var">Alonzo.dataToBinaryData</span></span><span> </span><span class="annot"><span class="annottext">(Data ledgerera -&gt; BinaryData ledgerera)
-&gt; (ScriptData -&gt; Data ledgerera)
-&gt; ScriptData
-&gt; BinaryData ledgerera
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptData -&gt; Data ledgerera
forall ledgerera. ScriptData -&gt; Data ledgerera
</span><span class="hs-identifier hs-var">toAlonzoData</span></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoLanguage"><span class="hs-identifier hs-type">toAlonzoLanguage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AnyPlutusScriptVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.Language</span></span><span>
</span><span id="line-263"></span><span id="toAlonzoLanguage"><span class="annot"><span class="annottext">toAlonzoLanguage :: AnyPlutusScriptVersion -&gt; Language
</span><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoLanguage"><span class="hs-identifier hs-var hs-var">toAlonzoLanguage</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AnyPlutusScriptVersion</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier hs-var">PlutusScriptV1</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Language
</span><span class="hs-identifier hs-var">Alonzo.PlutusV1</span></span><span>
</span><span id="line-264"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoLanguage"><span class="hs-identifier hs-var">toAlonzoLanguage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AnyPlutusScriptVersion</span></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion lang
</span><span class="hs-identifier hs-var">PlutusScriptV2</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Language
</span><span class="hs-identifier hs-var">Alonzo.PlutusV2</span></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | In the Alonzo and later eras the auxiliary data consists of the tx metadata</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- and the axiliary scripts, and the axiliary script data.</span><span>
</span><span id="line-268"></span><span class="hs-comment">--</span><span>
</span><span id="line-269"></span><span class="annot"><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoAuxiliaryData"><span class="hs-identifier hs-type">toAlonzoAuxiliaryData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679737087"><span class="annot"><a href="#local-6989586621679737087"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679737086"><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-270"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">ShelleyLedgerEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737087"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span>
</span><span id="line-271"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.AuxiliaryData</span></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.AuxiliaryData</span></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span>
</span><span id="line-272"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.Script</span></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Alonzo.Script</span></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span>
</span><span id="line-273"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.Era</span></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span>
</span><span id="line-274"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Word64</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">TxMetadataValue</span></span><span>
</span><span id="line-275"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ScriptInEra</span></span><span> </span><span class="annot"><a href="#local-6989586621679737087"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-276"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.AuxiliaryData</span></span><span> </span><span class="annot"><a href="#local-6989586621679737086"><span class="hs-identifier hs-type">ledgerera</span></a></span><span>
</span><span id="line-277"></span><span id="toAlonzoAuxiliaryData"><span class="annot"><span class="annottext">toAlonzoAuxiliaryData :: Map Word64 TxMetadataValue
-&gt; [ScriptInEra era] -&gt; AuxiliaryData ledgerera
</span><a href="Ledger.Tx.CardanoAPITemp.html#toAlonzoAuxiliaryData"><span class="hs-identifier hs-var hs-var">toAlonzoAuxiliaryData</span></a></span></span><span> </span><span id="local-6989586621679736807"><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736807"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679736806"><span class="annot"><span class="annottext">[ScriptInEra era]
</span><a href="#local-6989586621679736806"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-278"></span><span>    </span><span class="annot"><span class="annottext">Map Word64 Metadatum
-&gt; StrictSeq (Script ledgerera) -&gt; AuxiliaryData ledgerera
forall era.
(Era era, ToCBOR (Script era), Script era ~ Script era,
 Ord (Script era)) =&gt;
Map Word64 Metadatum -&gt; StrictSeq (Script era) -&gt; AuxiliaryData era
</span><span class="hs-identifier hs-var">Alonzo.AuxiliaryData</span></span><span>
</span><span id="line-279"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue -&gt; Map Word64 Metadatum
</span><span class="hs-identifier hs-var">toShelleyMetadata</span></span><span> </span><span class="annot"><span class="annottext">Map Word64 TxMetadataValue
</span><a href="#local-6989586621679736807"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Script ledgerera] -&gt; StrictSeq (Script ledgerera)
forall a. [a] -&gt; StrictSeq a
</span><span class="hs-identifier hs-var">Seq.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ScriptInEra era -&gt; Script ledgerera)
-&gt; [ScriptInEra era] -&gt; [Script ledgerera]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptInEra era -&gt; Script ledgerera
forall era. ScriptInEra era -&gt; Script (ShelleyLedgerEra era)
</span><span class="hs-identifier hs-var">toShelleyScript</span></span><span> </span><span class="annot"><span class="annottext">[ScriptInEra era]
</span><a href="#local-6989586621679736806"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-281"></span></pre></body></html>