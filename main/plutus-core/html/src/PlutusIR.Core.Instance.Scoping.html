<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes            #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans       #-}</span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusIR.Core.Instance.Scoping</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusIR.Core.Type.html"><span class="hs-identifier">PlutusIR.Core.Type</span></a></span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html"><span class="hs-identifier">PlutusCore.Check.Scoping</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.MkPlc.html"><span class="hs-identifier">PlutusCore.MkPlc</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html"><span class="hs-identifier">PlutusCore.Quote</span></a></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&lt;|)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Traversable</span></a></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span id="local-6989586621680951156"><span id="local-6989586621680951157"><span id="local-6989586621680951158"><span id="local-6989586621680951159"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680951159"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951159"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951158"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951157"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951156"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-21"></span><span>    </span><span id="local-6989586621680951153"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951151"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951151"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951150"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951150"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span id="local-6989586621680951149"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951149"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Type tyname uni NameAnn
-&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Term tyname name uni fun a
-&gt; Type tyname uni a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TyInst"><span class="hs-identifier hs-var">TyInst</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951149"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">(Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn)
-&gt; Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951151"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951150"><span class="hs-identifier hs-var">tyname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951150"><span class="hs-identifier hs-var">tyname</span></a></span></span></span></span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span id="local-6989586621680951142"><span id="local-6989586621680951143"><span id="local-6989586621680951144"><span id="local-6989586621680951145"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680951145"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951144"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951145"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951143"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951142"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-24"></span><span>    </span><span id="local-6989586621680951140"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Name
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951140"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951139"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951139"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951138"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951138"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680951137"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951137"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951137"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Term tyname name uni fun NameAnn)
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; Name -&gt; Term tyname Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; name -&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951139"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951138"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951138"><span class="hs-identifier hs-var">name</span></a></span></span></span></span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span id="local-6989586621680951131"><span id="local-6989586621680951132"><span id="local-6989586621680951133"><span id="local-6989586621680951134"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680951134"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951134"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951133"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951132"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951131"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-27"></span><span>    </span><span id="local-6989586621680951129"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; VarDecl tyname name uni fun NameAnn
-&gt; VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680951129"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951128"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951128"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951127"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951127"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span id="local-6989586621680951125"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951125"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951124"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680951124"><span class="hs-identifier hs-var">varName</span></a></span></span><span> </span><span id="local-6989586621680951123"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680951123"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; name
-&gt; Type tyname uni NameAnn
-&gt; VarDecl tyname name uni fun NameAnn
forall k tyname name (uni :: * -&gt; *) (fun :: k) ann.
ann
-&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni fun ann
</span><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-var">VarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951125"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680951124"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="annot"><span class="annottext">(Type tyname uni NameAnn -&gt; VarDecl tyname name uni fun NameAnn)
-&gt; Type tyname uni NameAnn -&gt; VarDecl tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName -&gt; Type tyname uni NameAnn -&gt; Type tyname uni NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951128"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951127"><span class="hs-identifier hs-var">tyname</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680951123"><span class="hs-identifier hs-var">ty</span></a></span></span></span></span></span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-comment">-- | Scoping for data types is hard, so we employ some extra paranoia and reference the provided</span><span>
</span><span id="line-31"></span><span class="hs-comment">-- 'TyName' in the type of every single constructor, and also apply the final head to that 'TyName'.</span><span>
</span><span id="line-32"></span><span id="local-6989586621680951119"><span id="local-6989586621680951120"><span id="local-6989586621680951121"><span id="local-6989586621680951122"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680951122"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951122"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951121"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951120"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951119"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-33"></span><span>    </span><span id="local-6989586621680951117"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; Datatype tyname name uni fun NameAnn
-&gt; Datatype tyname name uni fun NameAnn
</span><a href="#local-6989586621680951117"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951116"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951116"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951115"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951115"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span id="local-6989586621680951113"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951113"><span class="hs-identifier hs-var">dataAnn</span></a></span></span><span> </span><span id="local-6989586621680951112"><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680951112"><span class="hs-identifier hs-var">dataDecl</span></a></span></span><span> </span><span id="local-6989586621680951111"><span class="annot"><span class="annottext">[TyVarDecl tyname NameAnn]
</span><a href="#local-6989586621680951111"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621680951110"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680951110"><span class="hs-identifier hs-var">matchName</span></a></span></span><span> </span><span id="local-6989586621680951109"><span class="annot"><span class="annottext">[VarDecl tyname name uni fun NameAnn]
</span><a href="#local-6989586621680951109"><span class="hs-identifier hs-var">constrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyVarDecl tyname NameAnn
-&gt; [TyVarDecl tyname NameAnn]
-&gt; name
-&gt; [VarDecl tyname name uni fun NameAnn]
-&gt; Datatype tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; TyVarDecl tyname a
-&gt; [TyVarDecl tyname a]
-&gt; name
-&gt; [VarDecl tyname name uni fun a]
-&gt; Datatype tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951113"><span class="hs-identifier hs-var">dataAnn</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680951112"><span class="hs-identifier hs-var">dataDecl</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl tyname NameAnn]
</span><a href="#local-6989586621680951111"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680951110"><span class="hs-identifier hs-var">matchName</span></a></span><span> </span><span class="annot"><span class="annottext">([VarDecl tyname name uni fun NameAnn]
 -&gt; Datatype tyname name uni fun NameAnn)
-&gt; [VarDecl tyname name uni fun NameAnn]
-&gt; Datatype tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(VarDecl TyName name uni fun NameAnn
 -&gt; VarDecl TyName name uni fun NameAnn)
-&gt; [VarDecl TyName name uni fun NameAnn]
-&gt; [VarDecl TyName name uni fun NameAnn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl TyName name uni fun NameAnn
-&gt; VarDecl TyName name uni fun NameAnn
</span><a href="#local-6989586621680951108"><span class="hs-identifier hs-var">goConstr</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl tyname name uni fun NameAnn]
[VarDecl TyName name uni fun NameAnn]
</span><a href="#local-6989586621680951109"><span class="hs-identifier hs-var">constrs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-35"></span><span>            </span><span id="local-6989586621680951107"><span class="annot"><span class="annottext">tyVar :: Type TyName uni NameAnn
</span><a href="#local-6989586621680951107"><span class="hs-identifier hs-var hs-var">tyVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951116"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951115"><span class="hs-identifier hs-var">tyname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951115"><span class="hs-identifier hs-var">tyname</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>            </span><span id="local-6989586621680951108"><span class="annot"><span class="annottext">goConstr :: VarDecl TyName name uni fun NameAnn
-&gt; VarDecl TyName name uni fun NameAnn
</span><a href="#local-6989586621680951108"><span class="hs-identifier hs-var hs-var">goConstr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span id="local-6989586621680951106"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951106"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951105"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680951105"><span class="hs-identifier hs-var">constrName</span></a></span></span><span> </span><span id="local-6989586621680951104"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951104"><span class="hs-identifier hs-var">constrTy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; name
-&gt; Type TyName uni NameAnn
-&gt; VarDecl TyName name uni fun NameAnn
forall k tyname name (uni :: * -&gt; *) (fun :: k) ann.
ann
-&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni fun ann
</span><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-var">VarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951106"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680951105"><span class="hs-identifier hs-var">constrName</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; VarDecl TyName name uni fun NameAnn)
-&gt; Type TyName uni NameAnn -&gt; VarDecl TyName name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951103"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951104"><span class="hs-identifier hs-var">constrTy</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span>            </span><span id="local-6989586621680951103"><span class="annot"><span class="annottext">goSpine :: Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951103"><span class="hs-identifier hs-var hs-var">goSpine</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-type">TyForall</span></a></span><span> </span><span id="local-6989586621680951101"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951101"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951100"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951100"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680951099"><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680951099"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621680951098"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951098"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyName
-&gt; Kind NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-var">TyForall</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951101"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951100"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680951099"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951103"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951098"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-40"></span><span>            </span><span class="annot"><a href="#local-6989586621680951103"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-type">TyFun</span></a></span><span> </span><span id="local-6989586621680951096"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951096"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951095"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951095"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span id="local-6989586621680951094"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951094"><span class="hs-identifier hs-var">cod</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951096"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951095"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951103"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951094"><span class="hs-identifier hs-var">cod</span></a></span><span>
</span><span id="line-41"></span><span>            </span><span class="annot"><a href="#local-6989586621680951103"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span id="local-6989586621680951093"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951093"><span class="hs-identifier hs-var">ty</span></a></span></span><span>                          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951107"><span class="hs-identifier hs-var">tyVar</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951092"><span class="hs-identifier hs-var">goResult</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951093"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span>            </span><span id="local-6989586621680951092"><span class="annot"><span class="annottext">goResult :: Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951092"><span class="hs-identifier hs-var hs-var">goResult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyApp"><span class="hs-identifier hs-type">TyApp</span></a></span><span> </span><span id="local-6989586621680951090"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951090"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951089"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951089"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621680951088"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951088"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyApp"><span class="hs-identifier hs-var">TyApp</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951090"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680951092"><span class="hs-identifier hs-var">goResult</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951089"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951088"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-44"></span><span>            </span><span class="annot"><a href="#local-6989586621680951092"><span class="hs-identifier hs-var">goResult</span></a></span><span> </span><span id="local-6989586621680951087"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951087"><span class="hs-identifier hs-var">ty</span></a></span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyApp"><span class="hs-identifier hs-var">TyApp</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951087"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680951107"><span class="hs-identifier hs-var">tyVar</span></a></span></span></span></span></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span id="local-6989586621680951083"><span id="local-6989586621680951084"><span id="local-6989586621680951085"><span id="local-6989586621680951086"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680951086"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951086"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951085"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951084"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951083"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-47"></span><span>    </span><span id="local-6989586621680951081"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; Binding tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
</span><a href="#local-6989586621680951081"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951080"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951080"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951079"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951079"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-type">TermBind</span></a></span><span> </span><span id="local-6989586621680951077"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951077"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951076"><span class="annot"><span class="annottext">Strictness
</span><a href="#local-6989586621680951076"><span class="hs-identifier hs-var">strictness</span></a></span></span><span> </span><span id="local-6989586621680951075"><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680951075"><span class="hs-identifier hs-var">varDecl</span></a></span></span><span> </span><span id="local-6989586621680951074"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951074"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Strictness
-&gt; VarDecl tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Strictness
-&gt; VarDecl tyname name uni fun a
-&gt; Term tyname name uni fun a
-&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-var">TermBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951077"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Strictness
</span><a href="#local-6989586621680951076"><span class="hs-identifier hs-var">strictness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; VarDecl tyname name uni fun NameAnn
-&gt; VarDecl tyname name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951080"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951079"><span class="hs-identifier hs-var">tyname</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680951075"><span class="hs-identifier hs-var">varDecl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Binding tyname name uni fun NameAnn)
-&gt; Term tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951080"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951079"><span class="hs-identifier hs-var">tyname</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951074"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span id="local-6989586621680951073"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951073"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951072"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951072"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-type">TypeBind</span></a></span><span> </span><span id="local-6989586621680951070"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951070"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951069"><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680951069"><span class="hs-identifier hs-var">tyVarDecl</span></a></span></span><span> </span><span id="local-6989586621680951068"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680951068"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyVarDecl tyname NameAnn
-&gt; Type tyname uni NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; TyVarDecl tyname a
-&gt; Type tyname uni a
-&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-var">TypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951070"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680951069"><span class="hs-identifier hs-var">tyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type tyname uni NameAnn -&gt; Binding tyname name uni fun NameAnn)
-&gt; Type tyname uni NameAnn -&gt; Binding tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName -&gt; Type tyname uni NameAnn -&gt; Type tyname uni NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951073"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951072"><span class="hs-identifier hs-var">tyname</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680951068"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span id="local-6989586621680951067"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951067"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951066"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951066"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-type">DatatypeBind</span></a></span><span> </span><span id="local-6989586621680951064"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951064"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951063"><span class="annot"><span class="annottext">Datatype tyname name uni fun NameAnn
</span><a href="#local-6989586621680951063"><span class="hs-identifier hs-var">datatype</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Datatype tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Datatype tyname name uni fun a -&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-var">DatatypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951064"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">(Datatype tyname name uni fun NameAnn
 -&gt; Binding tyname name uni fun NameAnn)
-&gt; Datatype tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName
-&gt; Datatype tyname name uni fun NameAnn
-&gt; Datatype tyname name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951067"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951066"><span class="hs-identifier hs-var">tyname</span></a></span><span> </span><span class="annot"><span class="annottext">Datatype tyname name uni fun NameAnn
</span><a href="#local-6989586621680951063"><span class="hs-identifier hs-var">datatype</span></a></span></span></span></span></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | Unlike other 'Reference' instances this one does not guarantee that the name will actually be</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- referenced, but it's too convenient to have this instance to give up on it, without it would be</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- awkward to express \&quot;reference this binding in this thing\&quot;.</span><span>
</span><span id="line-57"></span><span id="local-6989586621680951059"><span id="local-6989586621680951060"><span id="local-6989586621680951061"><span id="local-6989586621680951062"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680951062"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951061"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951062"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951060"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951059"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-58"></span><span>    </span><span id="local-6989586621680951057"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Name
-&gt; Binding tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
</span><a href="#local-6989586621680951057"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951056"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951056"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621680951055"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951055"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-type">TermBind</span></a></span><span> </span><span id="local-6989586621680951054"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951054"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680951053"><span class="annot"><span class="annottext">Strictness
</span><a href="#local-6989586621680951053"><span class="hs-identifier hs-var">strictness</span></a></span></span><span> </span><span id="local-6989586621680951052"><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680951052"><span class="hs-identifier hs-var">varDecl</span></a></span></span><span> </span><span id="local-6989586621680951051"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951051"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Strictness
-&gt; VarDecl tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Strictness
-&gt; VarDecl tyname name uni fun a
-&gt; Term tyname name uni fun a
-&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-var">TermBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680951054"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">Strictness
</span><a href="#local-6989586621680951053"><span class="hs-identifier hs-var">strictness</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680951052"><span class="hs-identifier hs-var">varDecl</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Binding tyname name uni fun NameAnn)
-&gt; Term tyname name uni fun NameAnn
-&gt; Binding tyname name uni fun NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Name
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951056"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951055"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680951051"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951050"><span class="annot"><span class="annottext">typeBind :: Binding tyname name uni fun NameAnn
</span><a href="#local-6989586621680951050"><span class="hs-identifier hs-var">typeBind</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-type">TypeBind</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Binding tyname name uni fun NameAnn
</span><a href="#local-6989586621680951050"><span class="hs-identifier hs-var">typeBind</span></a></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951049"><span class="annot"><span class="annottext">datatypeBind :: Binding tyname name uni fun NameAnn
</span><a href="#local-6989586621680951049"><span class="hs-identifier hs-var">datatypeBind</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-type">DatatypeBind</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Binding tyname name uni fun NameAnn
</span><a href="#local-6989586621680951049"><span class="hs-identifier hs-var">datatypeBind</span></a></span></span></span></span></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span id="local-6989586621680951046"><span id="local-6989586621680951047"><span id="local-6989586621680951048"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951048"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951047"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951048"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951046"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680951047"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-64"></span><span>    </span><span id="local-6989586621680951044"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyVarDecl tyname ann -&gt; t NameAnn -&gt; t NameAnn
</span><a href="#local-6989586621680951044"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951043"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951043"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; tyname -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951043"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">(tyname -&gt; t NameAnn -&gt; t NameAnn)
-&gt; (TyVarDecl tyname ann -&gt; tyname)
-&gt; TyVarDecl tyname ann
-&gt; t NameAnn
-&gt; t NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname ann -&gt; tyname
forall tyname ann. TyVarDecl tyname ann -&gt; tyname
</span><a href="PlutusCore.Core.Type.html#_tyVarDeclName"><span class="hs-identifier hs-var hs-var">_tyVarDeclName</span></a></span></span></span></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span id="local-6989586621680951035"><span id="local-6989586621680951036"><span id="local-6989586621680951037"><span id="local-6989586621680951038"><span id="local-6989586621680951039"><span id="local-6989586621680951040"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951040"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951039"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951038"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951040"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951037"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951036"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951035"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680951039"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>    </span><span id="local-6989586621680951033"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; VarDecl tyname name uni fun ann -&gt; t NameAnn -&gt; t NameAnn
</span><a href="#local-6989586621680951033"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951032"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951032"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; name -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951032"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">(name -&gt; t NameAnn -&gt; t NameAnn)
-&gt; (VarDecl tyname name uni fun ann -&gt; name)
-&gt; VarDecl tyname name uni fun ann
-&gt; t NameAnn
-&gt; t NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl tyname name uni fun ann -&gt; name
forall tyname name (uni :: * -&gt; *) k (fun :: k) ann.
VarDecl tyname name uni fun ann -&gt; name
</span><a href="PlutusCore.Core.Type.html#_varDeclName"><span class="hs-identifier hs-var hs-var">_varDeclName</span></a></span></span></span></span></span></span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span id="local-6989586621680951027"><span id="local-6989586621680951028"><span id="local-6989586621680951029"><span id="local-6989586621680951030"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951030"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951030"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951029"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951028"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951027"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680951030"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>    </span><span id="local-6989586621680951025"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Datatype TyName Name uni fun ann -&gt; t NameAnn -&gt; t NameAnn
</span><a href="#local-6989586621680951025"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951024"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951024"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951023"><span class="annot"><span class="annottext">TyVarDecl TyName ann
</span><a href="#local-6989586621680951023"><span class="hs-identifier hs-var">dataDecl</span></a></span></span><span> </span><span id="local-6989586621680951022"><span class="annot"><span class="annottext">[TyVarDecl TyName ann]
</span><a href="#local-6989586621680951022"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621680951021"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951021"><span class="hs-identifier hs-var">matchName</span></a></span></span><span> </span><span id="local-6989586621680951020"><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680951020"><span class="hs-identifier hs-var">constrs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyVarDecl TyName ann -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951024"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl TyName ann
</span><a href="#local-6989586621680951023"><span class="hs-identifier hs-var">dataDecl</span></a></span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-comment">-- Parameters of a data type are not visible outside of the data type no matter what.</span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><span class="annottext">(t NameAnn -&gt; t NameAnn)
-&gt; (t NameAnn -&gt; t NameAnn) -&gt; t NameAnn -&gt; t NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName ann] -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceOutOfScope"><span class="hs-identifier hs-var">referenceOutOfScope</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName ann]
</span><a href="#local-6989586621680951022"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-74"></span><span>        </span><span class="annot"><span class="annottext">(t NameAnn -&gt; t NameAnn)
-&gt; (t NameAnn -&gt; t NameAnn) -&gt; t NameAnn -&gt; t NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Name -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951024"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680951021"><span class="hs-identifier hs-var">matchName</span></a></span><span>
</span><span id="line-75"></span><span>        </span><span class="annot"><span class="annottext">(t NameAnn -&gt; t NameAnn)
-&gt; (t NameAnn -&gt; t NameAnn) -&gt; t NameAnn -&gt; t NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; [VarDecl TyName Name uni fun ann] -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951024"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680951020"><span class="hs-identifier hs-var">constrs</span></a></span></span></span></span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span id="local-6989586621680951015"><span id="local-6989586621680951016"><span id="local-6989586621680951017"><span id="local-6989586621680951018"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951018"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951018"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#Reference"><span class="hs-identifier hs-type">Reference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951017"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951016"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951015"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680951018"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621680951013"><span class="annot"><span class="annottext">referenceVia :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Binding TyName Name uni fun ann -&gt; t NameAnn -&gt; t NameAnn
</span><a href="#local-6989586621680951013"><span class="hs-identifier hs-var hs-var hs-var hs-var">referenceVia</span></a></span></span><span> </span><span id="local-6989586621680951012"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951012"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-type">TermBind</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Strictness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951011"><span class="annot"><span class="annottext">VarDecl TyName Name uni fun ann
</span><a href="#local-6989586621680951011"><span class="hs-identifier hs-var">varDecl</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; VarDecl TyName Name uni fun ann -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951012"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl TyName Name uni fun ann
</span><a href="#local-6989586621680951011"><span class="hs-identifier hs-var">varDecl</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span id="local-6989586621680951010"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951010"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-type">TypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951009"><span class="annot"><span class="annottext">TyVarDecl TyName ann
</span><a href="#local-6989586621680951009"><span class="hs-identifier hs-var">tyVarDecl</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyVarDecl TyName ann -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951010"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl TyName ann
</span><a href="#local-6989586621680951009"><span class="hs-identifier hs-var">tyVarDecl</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span id="local-6989586621680951008"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951008"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-type">DatatypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951007"><span class="annot"><span class="annottext">Datatype TyName Name uni fun ann
</span><a href="#local-6989586621680951007"><span class="hs-identifier hs-var">datatype</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Datatype TyName Name uni fun ann -&gt; t NameAnn -&gt; t NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680951008"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">Datatype TyName Name uni fun ann
</span><a href="#local-6989586621680951007"><span class="hs-identifier hs-var">datatype</span></a></span></span></span></span></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-comment">-- | Establish scoping for each of the parameters of a datatype by only annotating every parameter</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- with 'introduceBound'.</span><span>
</span><span id="line-84"></span><span id="local-6989586621680951244"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingParams"><span class="hs-identifier hs-type">establishScopingParams</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951244"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#Quote"><span class="hs-identifier hs-type">Quote</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-85"></span><span id="establishScopingParams"><span class="annot"><span class="annottext">establishScopingParams :: [TyVarDecl TyName ann] -&gt; Quote [TyVarDecl TyName NameAnn]
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingParams"><span class="hs-identifier hs-var hs-var">establishScopingParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><span class="annottext">(TyVarDecl TyName ann
 -&gt; QuoteT Identity (TyVarDecl TyName NameAnn))
-&gt; [TyVarDecl TyName ann] -&gt; Quote [TyVarDecl TyName NameAnn]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">((TyVarDecl TyName ann
  -&gt; QuoteT Identity (TyVarDecl TyName NameAnn))
 -&gt; [TyVarDecl TyName ann] -&gt; Quote [TyVarDecl TyName NameAnn])
-&gt; (TyVarDecl TyName ann
    -&gt; QuoteT Identity (TyVarDecl TyName NameAnn))
-&gt; [TyVarDecl TyName ann]
-&gt; Quote [TyVarDecl TyName NameAnn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680951003"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951003"><span class="hs-identifier hs-var">paramNameDup</span></a></span></span><span> </span><span id="local-6989586621680951002"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680951002"><span class="hs-identifier hs-var">paramKind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-87"></span><span>        </span><span id="local-6989586621680951001"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951001"><span class="hs-identifier hs-var">paramName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyName -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; TyName -&gt; m TyName
</span><a href="PlutusCore.Quote.html#freshenTyName"><span class="hs-identifier hs-var">freshenTyName</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951003"><span class="hs-identifier hs-var">paramNameDup</span></a></span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Kind NameAnn -&gt; TyVarDecl TyName NameAnn
forall tyname ann.
ann -&gt; tyname -&gt; Kind ann -&gt; TyVarDecl tyname ann
</span><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-var">TyVarDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951001"><span class="hs-identifier hs-var">paramName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680951001"><span class="hs-identifier hs-var">paramName</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind NameAnn -&gt; TyVarDecl TyName NameAnn)
-&gt; QuoteT Identity (Kind NameAnn)
-&gt; QuoteT Identity (TyVarDecl TyName NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann -&gt; QuoteT Identity (Kind NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680951002"><span class="hs-identifier hs-var">paramKind</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">-- See Note [Weird IR data types].</span><span>
</span><span id="line-91"></span><span class="hs-comment">{- | Establish scoping for the type of a constructor. The updated constructor expects an argument
of the \&quot;the data type applied to all its parameters\&quot; type (that argument is the last one) and
always returns that exact type as a result. For example, this functions turns the following
generated type of constructor

    integer -&gt; a -&gt; &lt;a_non_-&gt;_type&gt;

into

    integer -&gt; a -&gt; D a b -&gt; D a b

assuming the constructor is supposed to construct a data type @D@ parameterized by two parameters
@a@ and @b@. Note that @&lt;a_non_-&gt;_type&gt;@ can be anything as the generator is allowed to generate
mess such as a constructor not actually constructing a value of the data type.

Whether the name of the data type is referenced as in-scope or out-of-scope one in the types of
arguments of constructors is controlled by the first argument, which ultimately depends on the
recursivity of the data type.
-}</span><span>
</span><span id="line-110"></span><span id="local-6989586621680951248"><span id="local-6989586621680951249"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingConstrTy"><span class="hs-identifier hs-type">establishScopingConstrTy</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951249"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951248"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#Quote"><span class="hs-identifier hs-type">Quote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951249"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-116"></span><span id="establishScopingConstrTy"><span class="annot"><span class="annottext">establishScopingConstrTy :: (TyName -&gt; NameAnn)
-&gt; TyName
-&gt; [TyVarDecl TyName NameAnn]
-&gt; Type TyName uni ann
-&gt; Quote (Type TyName uni NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingConstrTy"><span class="hs-identifier hs-var hs-var">establishScopingConstrTy</span></a></span></span><span> </span><span id="local-6989586621680950995"><span class="annot"><span class="annottext">TyName -&gt; NameAnn
</span><a href="#local-6989586621680950995"><span class="hs-identifier hs-var">regSelf</span></a></span></span><span> </span><span id="local-6989586621680950994"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950994"><span class="hs-identifier hs-var">dataName</span></a></span></span><span> </span><span id="local-6989586621680950993"><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950993"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Quote (Type TyName uni NameAnn)
</span><a href="#local-6989586621680950992"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-117"></span><span>    </span><span id="local-6989586621680950991"><span class="annot"><span class="annottext">toDataAppliedToParams :: (TyName -&gt; NameAnn) -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680950991"><span class="hs-identifier hs-var hs-var">toDataAppliedToParams</span></a></span></span><span> </span><span id="local-6989586621680950990"><span class="annot"><span class="annottext">TyName -&gt; NameAnn
</span><a href="#local-6989586621680950990"><span class="hs-identifier hs-var">reg</span></a></span></span><span>
</span><span id="line-118"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; [Type TyName uni NameAnn]
-&gt; Type TyName uni NameAnn
forall ann tyname (uni :: * -&gt; *).
ann
-&gt; Type tyname uni ann
-&gt; [Type tyname uni ann]
-&gt; Type tyname uni ann
</span><a href="PlutusCore.MkPlc.html#mkIterTyApp"><span class="hs-identifier hs-var">mkIterTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
</span><a href="#local-6989586621680950990"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950994"><span class="hs-identifier hs-var">dataName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950994"><span class="hs-identifier hs-var">dataName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>        </span><span class="annot"><span class="annottext">([Type TyName uni NameAnn] -&gt; Type TyName uni NameAnn)
-&gt; [Type TyName uni NameAnn] -&gt; Type TyName uni NameAnn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TyVarDecl TyName NameAnn -&gt; Type TyName uni NameAnn)
-&gt; [TyVarDecl TyName NameAnn] -&gt; [Type TyName uni NameAnn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950988"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950988"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerBound"><span class="hs-identifier hs-var">registerBound</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950988"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950988"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950993"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621680950992"><span class="annot"><span class="annottext">goSpine :: Type TyName uni ann -&gt; Quote (Type TyName uni NameAnn)
</span><a href="#local-6989586621680950992"><span class="hs-identifier hs-var hs-var">goSpine</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-type">TyForall</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950986"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950986"><span class="hs-identifier hs-var">nameDup</span></a></span></span><span> </span><span id="local-6989586621680950985"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950985"><span class="hs-identifier hs-var">kindDup</span></a></span></span><span> </span><span id="local-6989586621680950984"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950984"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-122"></span><span>        </span><span class="hs-comment">-- Similar to 'establishScopingBinder', but uses 'TyFun' rather than whatever 'registerVia'</span><span>
</span><span id="line-123"></span><span>        </span><span class="hs-comment">-- uses in order not to break the invariants described in Note [Weird IR data types].</span><span>
</span><span id="line-124"></span><span>        </span><span class="hs-comment">-- Also calls 'goSpine' recursively rather than 'establishScoping'.</span><span>
</span><span id="line-125"></span><span>        </span><span id="local-6989586621680950983"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyName -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; TyName -&gt; m TyName
</span><a href="PlutusCore.Quote.html#freshenTyName"><span class="hs-identifier hs-var">freshenTyName</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950986"><span class="hs-identifier hs-var">nameDup</span></a></span><span>
</span><span id="line-126"></span><span>        </span><span id="local-6989586621680950982"><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680950982"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind ann -&gt; QuoteT Identity (Kind NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950985"><span class="hs-identifier hs-var">kindDup</span></a></span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerOutOfScope"><span class="hs-identifier hs-var">registerOutOfScope</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; (Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-128"></span><span>            </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyName
-&gt; Kind NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; tyname -&gt; Kind ann -&gt; Type tyname uni ann -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyForall"><span class="hs-identifier hs-var">TyForall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680950982"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; (Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-129"></span><span>                </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerBound"><span class="hs-identifier hs-var">registerBound</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950983"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Quote (Type TyName uni NameAnn)
-&gt; Quote (Type TyName uni NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-130"></span><span>                    </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Quote (Type TyName uni NameAnn)
</span><a href="#local-6989586621680950992"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950984"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><a href="#local-6989586621680950992"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-type">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950980"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950980"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span id="local-6989586621680950979"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950979"><span class="hs-identifier hs-var">cod</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn
 -&gt; Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Quote (Type TyName uni NameAnn)
-&gt; QuoteT
     Identity (Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Quote (Type TyName uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950980"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteT
  Identity (Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Quote (Type TyName uni NameAnn)
-&gt; Quote (Type TyName uni NameAnn)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; Quote (Type TyName uni NameAnn)
</span><a href="#local-6989586621680950992"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950979"><span class="hs-identifier hs-var">cod</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="#local-6989586621680950992"><span class="hs-identifier hs-var">goSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="annottext">Type TyName uni NameAnn -&gt; Quote (Type TyName uni NameAnn)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Quote (Type TyName uni NameAnn))
-&gt; (Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn
-&gt; Quote (Type TyName uni NameAnn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Type TyName uni NameAnn
forall tyname (uni :: * -&gt; *) ann.
ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
-&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyFun"><span class="hs-identifier hs-var">TyFun</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TyName -&gt; NameAnn) -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680950991"><span class="hs-identifier hs-var">toDataAppliedToParams</span></a></span><span> </span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
</span><a href="#local-6989586621680950995"><span class="hs-identifier hs-var">regSelf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Quote (Type TyName uni NameAnn))
-&gt; Type TyName uni NameAnn -&gt; Quote (Type TyName uni NameAnn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TyName -&gt; NameAnn) -&gt; Type TyName uni NameAnn
</span><a href="#local-6989586621680950991"><span class="hs-identifier hs-var">toDataAppliedToParams</span></a></span><span> </span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerBound"><span class="hs-identifier hs-var">registerBound</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | Establish scoping for all constructors of a data type by establishing scoping for each of them</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- individually. If there are no constructors, then a dummy one is added, because we need to</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- maintain the invariant that every binding is referenced as an in-scope one somewhere and the only</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- place where parameters of a data type can be referenced this way is a constructor of that data</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- type.</span><span>
</span><span id="line-140"></span><span id="local-6989586621680951241"><span id="local-6989586621680951242"><span id="local-6989586621680951243"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingConstrs"><span class="hs-identifier hs-type">establishScopingConstrs</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680951243"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951242"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951241"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951243"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#Quote"><span class="hs-identifier hs-type">Quote</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951242"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951241"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-147"></span><span id="establishScopingConstrs"><span class="annot"><span class="annottext">establishScopingConstrs :: (TyName -&gt; NameAnn)
-&gt; ann
-&gt; TyName
-&gt; [TyVarDecl TyName NameAnn]
-&gt; [VarDecl TyName Name uni fun ann]
-&gt; Quote [VarDecl TyName Name uni fun NameAnn]
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingConstrs"><span class="hs-identifier hs-var hs-var">establishScopingConstrs</span></a></span></span><span> </span><span id="local-6989586621680950977"><span class="annot"><span class="annottext">TyName -&gt; NameAnn
</span><a href="#local-6989586621680950977"><span class="hs-identifier hs-var">regSelf</span></a></span></span><span> </span><span id="local-6989586621680950976"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680950976"><span class="hs-identifier hs-var">dataAnn</span></a></span></span><span> </span><span id="local-6989586621680950975"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950975"><span class="hs-identifier hs-var">dataName</span></a></span></span><span> </span><span id="local-6989586621680950974"><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950974"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621680950973"><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950973"><span class="hs-identifier hs-var">constrsPossiblyEmpty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-148"></span><span>    </span><span id="local-6989586621680950972"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950972"><span class="hs-identifier hs-var">cons0Name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; QuoteT Identity Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Text -&gt; m Name
</span><a href="PlutusCore.Quote.html#freshName"><span class="hs-identifier hs-var">freshName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cons0&quot;</span></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680950970"><span class="annot"><span class="annottext">cons0 :: VarDecl TyName Name uni fun ann
</span><a href="#local-6989586621680950970"><span class="hs-identifier hs-var hs-var">cons0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ann
-&gt; Name -&gt; Type TyName uni ann -&gt; VarDecl TyName Name uni fun ann
forall k tyname name (uni :: * -&gt; *) (fun :: k) ann.
ann
-&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni fun ann
</span><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-var">VarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680950976"><span class="hs-identifier hs-var">dataAnn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950972"><span class="hs-identifier hs-var">cons0Name</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni ann -&gt; VarDecl TyName Name uni fun ann)
-&gt; Type TyName uni ann -&gt; VarDecl TyName Name uni fun ann
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ann -&gt; TyName -&gt; Type TyName uni ann
forall tyname (uni :: * -&gt; *) ann.
ann -&gt; tyname -&gt; Type tyname uni ann
</span><a href="PlutusCore.Core.Type.html#TyVar"><span class="hs-identifier hs-var">TyVar</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680950976"><span class="hs-identifier hs-var">dataAnn</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950975"><span class="hs-identifier hs-var">dataName</span></a></span><span>
</span><span id="line-150"></span><span>        </span><span id="local-6989586621680950969"><span class="annot"><span class="annottext">constrs :: [VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950969"><span class="hs-identifier hs-var hs-var">constrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950973"><span class="hs-identifier hs-var">constrsPossiblyEmpty</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VarDecl TyName Name uni fun ann
</span><a href="#local-6989586621680950970"><span class="hs-identifier hs-var">cons0</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950973"><span class="hs-identifier hs-var">constrsPossiblyEmpty</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
-&gt; (VarDecl TyName Name uni fun ann
    -&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn))
-&gt; Quote [VarDecl TyName Name uni fun NameAnn]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950969"><span class="hs-identifier hs-var">constrs</span></a></span><span> </span><span class="annot"><span class="annottext">((VarDecl TyName Name uni fun ann
  -&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn))
 -&gt; Quote [VarDecl TyName Name uni fun NameAnn])
-&gt; (VarDecl TyName Name uni fun ann
    -&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn))
-&gt; Quote [VarDecl TyName Name uni fun NameAnn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950966"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950966"><span class="hs-identifier hs-var">constrNameDup</span></a></span></span><span> </span><span id="local-6989586621680950965"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950965"><span class="hs-identifier hs-var">constrTyDup</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-152"></span><span>        </span><span id="local-6989586621680950964"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950964"><span class="hs-identifier hs-var">constrName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; QuoteT Identity Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m Name
</span><a href="PlutusCore.Quote.html#freshenName"><span class="hs-identifier hs-var">freshenName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950966"><span class="hs-identifier hs-var">constrNameDup</span></a></span><span>
</span><span id="line-153"></span><span>        </span><span id="local-6989586621680950962"><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680950962"><span class="hs-identifier hs-var">constrTy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TyName -&gt; NameAnn)
-&gt; TyName
-&gt; [TyVarDecl TyName NameAnn]
-&gt; Type TyName uni ann
-&gt; Quote (Type TyName uni NameAnn)
forall (uni :: * -&gt; *) ann.
(TyName -&gt; NameAnn)
-&gt; TyName
-&gt; [TyVarDecl TyName NameAnn]
-&gt; Type TyName uni ann
-&gt; Quote (Type TyName uni NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingConstrTy"><span class="hs-identifier hs-var">establishScopingConstrTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
</span><a href="#local-6989586621680950977"><span class="hs-identifier hs-var">regSelf</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950975"><span class="hs-identifier hs-var">dataName</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950974"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950965"><span class="hs-identifier hs-var">constrTyDup</span></a></span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><span class="annottext">VarDecl TyName Name uni fun NameAnn
-&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(VarDecl TyName Name uni fun NameAnn
 -&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn))
-&gt; VarDecl TyName Name uni fun NameAnn
-&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Name
-&gt; Type TyName uni NameAnn
-&gt; VarDecl TyName Name uni fun NameAnn
forall k tyname name (uni :: * -&gt; *) (fun :: k) ann.
ann
-&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni fun ann
</span><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-var">VarDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950964"><span class="hs-identifier hs-var">constrName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950964"><span class="hs-identifier hs-var">constrName</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni NameAnn
</span><a href="#local-6989586621680950962"><span class="hs-identifier hs-var">constrTy</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-comment">-- | Establish scoping of a binding. Each bindings gets referenced in its own body either as an</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- in-scope or out-of-scope one, which is controlled by the first argument and ultimately depends on</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- the recursivity of the binding.</span><span>
</span><span id="line-159"></span><span id="local-6989586621680951221"><span id="local-6989586621680951222"><span id="local-6989586621680951223"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBinding"><span class="hs-identifier hs-type">establishScopingBinding</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680950960"><span class="annot"><a href="#local-6989586621680950960"><span class="hs-identifier hs-type">name</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#ToScopedName"><span class="hs-identifier hs-type">ToScopedName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950960"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680950960"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951223"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951222"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951221"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#Quote"><span class="hs-identifier hs-type">Quote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951223"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951222"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-163"></span><span id="establishScopingBinding"><span class="annot"><span class="annottext">establishScopingBinding :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Binding TyName Name uni fun ann
-&gt; Quote (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBinding"><span class="hs-identifier hs-var hs-var">establishScopingBinding</span></a></span></span><span> </span><span id="local-6989586621680950959"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950959"><span class="hs-identifier hs-var">regSelf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-type">TermBind</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950958"><span class="annot"><span class="annottext">Strictness
</span><a href="#local-6989586621680950958"><span class="hs-identifier hs-var">strictness</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950957"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950957"><span class="hs-identifier hs-var">nameDup</span></a></span></span><span> </span><span id="local-6989586621680950956"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950956"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680950955"><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680950955"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621680950954"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950954"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; QuoteT Identity Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m Name
</span><a href="PlutusCore.Quote.html#freshenName"><span class="hs-identifier hs-var">freshenName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950957"><span class="hs-identifier hs-var">nameDup</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621680950953"><span class="annot"><span class="annottext">VarDecl TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950953"><span class="hs-identifier hs-var">varDecl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Name
-&gt; Type TyName uni NameAnn
-&gt; VarDecl TyName Name uni fun NameAnn
forall k tyname name (uni :: * -&gt; *) (fun :: k) ann.
ann
-&gt; name -&gt; Type tyname uni ann -&gt; VarDecl tyname name uni fun ann
</span><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-var">VarDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950954"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950954"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; VarDecl TyName Name uni fun NameAnn)
-&gt; QuoteT Identity (Type TyName uni NameAnn)
-&gt; QuoteT Identity (VarDecl TyName Name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; QuoteT Identity (Type TyName uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950956"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><span class="annottext">NameAnn
-&gt; Strictness
-&gt; VarDecl TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
-&gt; Binding TyName Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Strictness
-&gt; VarDecl tyname name uni fun a
-&gt; Term tyname name uni fun a
-&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-var">TermBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Strictness
</span><a href="#local-6989586621680950958"><span class="hs-identifier hs-var">strictness</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950953"><span class="hs-identifier hs-var">varDecl</span></a></span><span> </span><span class="annot"><span class="annottext">(Term TyName Name uni fun NameAnn
 -&gt; Binding TyName Name uni fun NameAnn)
-&gt; (Term TyName Name uni fun NameAnn
    -&gt; Term TyName Name uni fun NameAnn)
-&gt; Term TyName Name uni fun NameAnn
-&gt; Binding TyName Name uni fun NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Name
-&gt; Term TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950959"><span class="hs-identifier hs-var">regSelf</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950954"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Term TyName Name uni fun NameAnn
 -&gt; Binding TyName Name uni fun NameAnn)
-&gt; QuoteT Identity (Term TyName Name uni fun NameAnn)
-&gt; Quote (Binding TyName Name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
-&gt; QuoteT Identity (Term TyName Name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term TyName Name uni fun ann
</span><a href="#local-6989586621680950955"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-167"></span><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBinding"><span class="hs-identifier hs-var">establishScopingBinding</span></a></span><span> </span><span id="local-6989586621680950952"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950952"><span class="hs-identifier hs-var">regSelf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-type">TypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950951"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950951"><span class="hs-identifier hs-var">nameDup</span></a></span></span><span> </span><span id="local-6989586621680950950"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950950"><span class="hs-identifier hs-var">kind</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680950949"><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950949"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-168"></span><span>    </span><span id="local-6989586621680950948"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950948"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyName -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; TyName -&gt; m TyName
</span><a href="PlutusCore.Quote.html#freshenTyName"><span class="hs-identifier hs-var">freshenTyName</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950951"><span class="hs-identifier hs-var">nameDup</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span id="local-6989586621680950947"><span class="annot"><span class="annottext">TyVarDecl TyName NameAnn
</span><a href="#local-6989586621680950947"><span class="hs-identifier hs-var">tyVarDecl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Kind NameAnn -&gt; TyVarDecl TyName NameAnn
forall tyname ann.
ann -&gt; tyname -&gt; Kind ann -&gt; TyVarDecl tyname ann
</span><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-var">TyVarDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950948"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950948"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind NameAnn -&gt; TyVarDecl TyName NameAnn)
-&gt; QuoteT Identity (Kind NameAnn)
-&gt; QuoteT Identity (TyVarDecl TyName NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann -&gt; QuoteT Identity (Kind NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950950"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyVarDecl TyName NameAnn
-&gt; Type TyName uni NameAnn
-&gt; Binding TyName Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; TyVarDecl tyname a
-&gt; Type tyname uni a
-&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-var">TypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl TyName NameAnn
</span><a href="#local-6989586621680950947"><span class="hs-identifier hs-var">tyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Binding TyName Name uni fun NameAnn)
-&gt; (Type TyName uni NameAnn -&gt; Type TyName uni NameAnn)
-&gt; Type TyName uni NameAnn
-&gt; Binding TyName Name uni fun NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; TyName -&gt; Type TyName uni NameAnn -&gt; Type TyName uni NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950952"><span class="hs-identifier hs-var">regSelf</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950948"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Type TyName uni NameAnn -&gt; Binding TyName Name uni fun NameAnn)
-&gt; QuoteT Identity (Type TyName uni NameAnn)
-&gt; Quote (Binding TyName Name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann -&gt; QuoteT Identity (Type TyName uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type TyName uni ann
</span><a href="#local-6989586621680950949"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-171"></span><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBinding"><span class="hs-identifier hs-var">establishScopingBinding</span></a></span><span> </span><span id="local-6989586621680950946"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950946"><span class="hs-identifier hs-var">regSelf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-type">DatatypeBind</span></a></span><span> </span><span id="local-6989586621680950945"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680950945"><span class="hs-identifier hs-var">dataAnn</span></a></span></span><span> </span><span id="local-6989586621680950944"><span class="annot"><span class="annottext">Datatype TyName Name uni fun ann
</span><a href="#local-6989586621680950944"><span class="hs-identifier hs-var">datatypeDup</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950943"><span class="annot"><span class="annottext">TyVarDecl TyName ann
</span><a href="#local-6989586621680950943"><span class="hs-identifier hs-var">dataDeclDup</span></a></span></span><span> </span><span id="local-6989586621680950942"><span class="annot"><span class="annottext">[TyVarDecl TyName ann]
</span><a href="#local-6989586621680950942"><span class="hs-identifier hs-var">paramsDup</span></a></span></span><span> </span><span id="local-6989586621680950941"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950941"><span class="hs-identifier hs-var">matchNameDup</span></a></span></span><span> </span><span id="local-6989586621680950940"><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950940"><span class="hs-identifier hs-var">constrsDup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Datatype TyName Name uni fun ann
</span><a href="#local-6989586621680950944"><span class="hs-identifier hs-var">datatypeDup</span></a></span><span>
</span><span id="line-173"></span><span>        </span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950939"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950939"><span class="hs-identifier hs-var">dataNameDup</span></a></span></span><span> </span><span id="local-6989586621680950938"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950938"><span class="hs-identifier hs-var">dataKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVarDecl TyName ann
</span><a href="#local-6989586621680950943"><span class="hs-identifier hs-var">dataDeclDup</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span id="local-6989586621680950937"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950937"><span class="hs-identifier hs-var">dataName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyName -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; TyName -&gt; m TyName
</span><a href="PlutusCore.Quote.html#freshenTyName"><span class="hs-identifier hs-var">freshenTyName</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950939"><span class="hs-identifier hs-var">dataNameDup</span></a></span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621680950936"><span class="annot"><span class="annottext">TyVarDecl TyName NameAnn
</span><a href="#local-6989586621680950936"><span class="hs-identifier hs-var">dataDecl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; TyName -&gt; Kind NameAnn -&gt; TyVarDecl TyName NameAnn
forall tyname ann.
ann -&gt; tyname -&gt; Kind ann -&gt; TyVarDecl tyname ann
</span><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-var">TyVarDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950937"><span class="hs-identifier hs-var">dataName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950937"><span class="hs-identifier hs-var">dataName</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind NameAnn -&gt; TyVarDecl TyName NameAnn)
-&gt; QuoteT Identity (Kind NameAnn)
-&gt; QuoteT Identity (TyVarDecl TyName NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann -&gt; QuoteT Identity (Kind NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950938"><span class="hs-identifier hs-var">dataKind</span></a></span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621680950935"><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950935"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName ann] -&gt; Quote [TyVarDecl TyName NameAnn]
forall ann.
[TyVarDecl TyName ann] -&gt; Quote [TyVarDecl TyName NameAnn]
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingParams"><span class="hs-identifier hs-var">establishScopingParams</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName ann]
</span><a href="#local-6989586621680950942"><span class="hs-identifier hs-var">paramsDup</span></a></span><span>
</span><span id="line-177"></span><span>    </span><span id="local-6989586621680950934"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950934"><span class="hs-identifier hs-var">matchName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; QuoteT Identity Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m Name
</span><a href="PlutusCore.Quote.html#freshenName"><span class="hs-identifier hs-var">freshenName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950941"><span class="hs-identifier hs-var">matchNameDup</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621680950933"><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950933"><span class="hs-identifier hs-var">constrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TyName -&gt; NameAnn)
-&gt; ann
-&gt; TyName
-&gt; [TyVarDecl TyName NameAnn]
-&gt; [VarDecl TyName Name uni fun ann]
-&gt; Quote [VarDecl TyName Name uni fun NameAnn]
forall ann (uni :: * -&gt; *) fun.
(TyName -&gt; NameAnn)
-&gt; ann
-&gt; TyName
-&gt; [TyVarDecl TyName NameAnn]
-&gt; [VarDecl TyName Name uni fun ann]
-&gt; Quote [VarDecl TyName Name uni fun NameAnn]
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingConstrs"><span class="hs-identifier hs-var">establishScopingConstrs</span></a></span><span> </span><span class="annot"><span class="annottext">TyName -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950946"><span class="hs-identifier hs-var">regSelf</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680950945"><span class="hs-identifier hs-var">dataAnn</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950937"><span class="hs-identifier hs-var">dataName</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950935"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun ann]
</span><a href="#local-6989586621680950940"><span class="hs-identifier hs-var">constrsDup</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680950932"><span class="annot"><span class="annottext">datatype :: Datatype TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950932"><span class="hs-identifier hs-var hs-var">datatype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyVarDecl TyName NameAnn
-&gt; [TyVarDecl TyName NameAnn]
-&gt; Name
-&gt; [VarDecl TyName Name uni fun NameAnn]
-&gt; Datatype TyName Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; TyVarDecl tyname a
-&gt; [TyVarDecl tyname a]
-&gt; name
-&gt; [VarDecl tyname name uni fun a]
-&gt; Datatype tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#introduceBound"><span class="hs-identifier hs-var">introduceBound</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950934"><span class="hs-identifier hs-var">matchName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyVarDecl TyName NameAnn
</span><a href="#local-6989586621680950936"><span class="hs-identifier hs-var">dataDecl</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl TyName NameAnn]
</span><a href="#local-6989586621680950935"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950934"><span class="hs-identifier hs-var">matchName</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950933"><span class="hs-identifier hs-var">constrs</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
-&gt; Quote (Binding TyName Name uni fun NameAnn)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Binding TyName Name uni fun NameAnn
 -&gt; Quote (Binding TyName Name uni fun NameAnn))
-&gt; Binding TyName Name uni fun NameAnn
-&gt; Quote (Binding TyName Name uni fun NameAnn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Datatype TyName Name uni fun NameAnn
-&gt; Binding TyName Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Datatype tyname name uni fun a -&gt; Binding tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-var">DatatypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Datatype TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950932"><span class="hs-identifier hs-var">datatype</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-comment">-- | Reference each binding in the last one apart from itself.</span><span>
</span><span id="line-183"></span><span id="local-6989586621680951230"><span id="local-6989586621680951231"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#referenceViaBindings"><span class="hs-identifier hs-type">referenceViaBindings</span></a></span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680950930"><span class="annot"><a href="#local-6989586621680950930"><span class="hs-identifier hs-type">name</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#ToScopedName"><span class="hs-identifier hs-type">ToScopedName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950930"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680950930"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951231"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951230"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951231"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951230"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-187"></span><span id="referenceViaBindings"><span class="annot"><span class="annottext">referenceViaBindings :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#referenceViaBindings"><span class="hs-identifier hs-var hs-var">referenceViaBindings</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span id="local-6989586621680950929"><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950929"><span class="hs-identifier hs-var">b0</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950929"><span class="hs-identifier hs-var">b0</span></a></span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">:|</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-188"></span><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#referenceViaBindings"><span class="hs-identifier hs-var">referenceViaBindings</span></a></span><span> </span><span id="local-6989586621680950927"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950927"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680950926"><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950926"><span class="hs-identifier hs-var">b0</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-type">:|</span></a></span><span> </span><span id="local-6989586621680950925"><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950925"><span class="hs-identifier hs-var">bs0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
-&gt; Binding TyName Name uni fun NameAnn
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950924"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950926"><span class="hs-identifier hs-var">b0</span></a></span><span> </span><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950925"><span class="hs-identifier hs-var">bs0</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621680950924"><span class="annot"><span class="annottext">go :: [Binding TyName Name uni fun NameAnn]
-&gt; Binding TyName Name uni fun NameAnn
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950924"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621680950923"><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950923"><span class="hs-identifier hs-var">prevs</span></a></span></span><span> </span><span id="local-6989586621680950922"><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950922"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; Binding TyName Name uni fun NameAnn
-&gt; Binding TyName Name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceVia"><span class="hs-identifier hs-var">referenceVia</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950927"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950923"><span class="hs-identifier hs-var">prevs</span></a></span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950922"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">:|</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="#local-6989586621680950924"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621680950921"><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950921"><span class="hs-identifier hs-var">prevs</span></a></span></span><span> </span><span id="local-6989586621680950920"><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950920"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680950919"><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950919"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621680950918"><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950918"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950920"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall a. a -&gt; NonEmpty a -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;|</span></a></span><span> </span><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
-&gt; Binding TyName Name uni fun NameAnn
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950924"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950920"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
-&gt; [Binding TyName Name uni fun NameAnn]
-&gt; [Binding TyName Name uni fun NameAnn]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950921"><span class="hs-identifier hs-var">prevs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Binding TyName Name uni fun NameAnn
</span><a href="#local-6989586621680950919"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">[Binding TyName Name uni fun NameAnn]
</span><a href="#local-6989586621680950918"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- | Reference each binding in the first one apart from itself and in the last one also apart from</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- itself. Former bindings are always visible in latter ones and whether latter bindings are visible</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- in former ones is controlled by the first argument and ultimately depends on the recursivity</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- of the family of bindings.</span><span>
</span><span id="line-196"></span><span id="local-6989586621680950916"><span id="local-6989586621680950917"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#referenceBindingsBothWays"><span class="hs-identifier hs-type">referenceBindingsBothWays</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680950914"><span class="annot"><a href="#local-6989586621680950914"><span class="hs-identifier hs-type">name</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#ToScopedName"><span class="hs-identifier hs-type">ToScopedName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950914"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680950914"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950917"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950916"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950917"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950916"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-200"></span><span id="referenceBindingsBothWays"><span class="annot"><span class="annottext">referenceBindingsBothWays :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#referenceBindingsBothWays"><span class="hs-identifier hs-var hs-var">referenceBindingsBothWays</span></a></span></span><span> </span><span id="local-6989586621680950913"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950913"><span class="hs-identifier hs-var">regRec</span></a></span></span><span>          </span><span class="hs-comment">-- Whether latter bindings are visible in former ones</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall a. NonEmpty a -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">NonEmpty.reverse</span></a></span><span>                    </span><span class="hs-comment">-- or not depends on the recursivity and so we have</span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><span class="annottext">(NonEmpty (Binding TyName Name uni fun NameAnn)
 -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; (NonEmpty (Binding TyName Name uni fun NameAnn)
    -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall (uni :: * -&gt; *) fun.
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#referenceViaBindings"><span class="hs-identifier hs-var">referenceViaBindings</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950913"><span class="hs-identifier hs-var">regRec</span></a></span><span>         </span><span class="hs-comment">-- the registering function as an argument.</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="annottext">(NonEmpty (Binding TyName Name uni fun NameAnn)
 -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; (NonEmpty (Binding TyName Name uni fun NameAnn)
    -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall a. NonEmpty a -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">NonEmpty.reverse</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">(NonEmpty (Binding TyName Name uni fun NameAnn)
 -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; (NonEmpty (Binding TyName Name uni fun NameAnn)
    -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall (uni :: * -&gt; *) fun.
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#referenceViaBindings"><span class="hs-identifier hs-var">referenceViaBindings</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerBound"><span class="hs-identifier hs-var">registerBound</span></a></span><span>  </span><span class="hs-comment">-- Former bindings are always visible in latter ones.</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-comment">-- | Establish scoping for a family of bindings.</span><span>
</span><span id="line-207"></span><span id="local-6989586621680951211"><span id="local-6989586621680951212"><span id="local-6989586621680951213"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBindings"><span class="hs-identifier hs-type">establishScopingBindings</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680950910"><span class="annot"><a href="#local-6989586621680950910"><span class="hs-identifier hs-type">name</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#ToScopedName"><span class="hs-identifier hs-type">ToScopedName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950910"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680950910"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951213"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951212"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951211"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Quote.html#Quote"><span class="hs-identifier hs-type">Quote</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951213"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951212"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-211"></span><span id="establishScopingBindings"><span class="annot"><span class="annottext">establishScopingBindings :: (forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBindings"><span class="hs-identifier hs-var hs-var">establishScopingBindings</span></a></span></span><span> </span><span id="local-6989586621680950909"><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950909"><span class="hs-identifier hs-var">regRec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-comment">-- Note that mutual recursion and self-recursion are handled separately.</span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">(NonEmpty (Binding TyName Name uni fun NameAnn)
 -&gt; NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
forall (uni :: * -&gt; *) fun.
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#referenceBindingsBothWays"><span class="hs-identifier hs-var">referenceBindingsBothWays</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950909"><span class="hs-identifier hs-var">regRec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
 -&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn)))
-&gt; (NonEmpty (Binding TyName Name uni fun ann)
    -&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn)))
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Binding TyName Name uni fun ann
 -&gt; QuoteT Identity (Binding TyName Name uni fun NameAnn))
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Binding TyName Name uni fun ann
-&gt; QuoteT Identity (Binding TyName Name uni fun NameAnn)
forall (uni :: * -&gt; *) fun ann.
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; Binding TyName Name uni fun ann
-&gt; Quote (Binding TyName Name uni fun NameAnn)
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBinding"><span class="hs-identifier hs-var">establishScopingBinding</span></a></span><span> </span><span class="annot"><span class="annottext">forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="#local-6989586621680950909"><span class="hs-identifier hs-var">regRec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-comment">-- | Return a registering function depending on the recursivity.</span><span>
</span><span id="line-216"></span><span id="local-6989586621680951209"><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#registerByRecursivity"><span class="hs-identifier hs-type">registerByRecursivity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#ToScopedName"><span class="hs-identifier hs-type">ToScopedName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680951209"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusIR.Core.Type.html#Recursivity"><span class="hs-identifier hs-type">Recursivity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680951209"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#NameAnn"><span class="hs-identifier hs-type">NameAnn</span></a></span></span><span>
</span><span id="line-217"></span><span id="registerByRecursivity"><span class="annot"><span class="annottext">registerByRecursivity :: Recursivity -&gt; name -&gt; NameAnn
</span><a href="PlutusIR.Core.Instance.Scoping.html#registerByRecursivity"><span class="hs-identifier hs-var hs-var">registerByRecursivity</span></a></span></span><span> </span><span class="annot"><span class="annottext">Recursivity
</span><a href="PlutusIR.Core.Type.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerBound"><span class="hs-identifier hs-var">registerBound</span></a></span><span>
</span><span id="line-218"></span><span class="annot"><a href="PlutusIR.Core.Instance.Scoping.html#registerByRecursivity"><span class="hs-identifier hs-var">registerByRecursivity</span></a></span><span> </span><span class="annot"><span class="annottext">Recursivity
</span><a href="PlutusIR.Core.Type.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerOutOfScope"><span class="hs-identifier hs-var">registerOutOfScope</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span id="local-6989586621680950902"><span id="local-6989586621680950903"><span id="local-6989586621680950904"><span id="local-6989586621680950905"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950905"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950904"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#EstablishScoping"><span class="hs-identifier hs-type">EstablishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950905"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950904"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950903"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950902"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>    </span><span id="local-6989586621680950899"><span class="annot"><span class="annottext">establishScoping :: Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
</span><a href="#local-6989586621680950899"><span class="hs-identifier hs-var hs-var hs-var hs-var">establishScoping</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950897"><span class="annot"><span class="annottext">Recursivity
</span><a href="#local-6989586621680950897"><span class="hs-identifier hs-var">recy</span></a></span></span><span> </span><span id="local-6989586621680950896"><span class="annot"><span class="annottext">NonEmpty (Binding tyname name uni fun ann)
</span><a href="#local-6989586621680950896"><span class="hs-identifier hs-var">bindingsDup</span></a></span></span><span> </span><span id="local-6989586621680950895"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950895"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>        </span><span id="local-6989586621680950894"><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950894"><span class="hs-identifier hs-var">bindings</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
forall (uni :: * -&gt; *) fun ann.
(forall name. ToScopedName name =&gt; name -&gt; NameAnn)
-&gt; NonEmpty (Binding TyName Name uni fun ann)
-&gt; Quote (NonEmpty (Binding TyName Name uni fun NameAnn))
</span><a href="PlutusIR.Core.Instance.Scoping.html#establishScopingBindings"><span class="hs-identifier hs-var">establishScopingBindings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Recursivity -&gt; name -&gt; NameAnn
forall name. ToScopedName name =&gt; Recursivity -&gt; name -&gt; NameAnn
</span><a href="PlutusIR.Core.Instance.Scoping.html#registerByRecursivity"><span class="hs-identifier hs-var">registerByRecursivity</span></a></span><span> </span><span class="annot"><span class="annottext">Recursivity
</span><a href="#local-6989586621680950897"><span class="hs-identifier hs-var">recy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding tyname name uni fun ann)
NonEmpty (Binding TyName Name uni fun ann)
</span><a href="#local-6989586621680950896"><span class="hs-identifier hs-var">bindingsDup</span></a></span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-comment">-- Follows the shape of 'establishScopingBinder', but subtly differs (for example,</span><span>
</span><span id="line-224"></span><span>        </span><span class="hs-comment">-- does not bind a single name, does not have a @sort@ etc), hence we write things out</span><span>
</span><span id="line-225"></span><span>        </span><span class="hs-comment">-- manually.</span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; Term TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceOutOfScope"><span class="hs-identifier hs-var">referenceOutOfScope</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950894"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">(Term TyName Name uni fun NameAnn
 -&gt; Term TyName Name uni fun NameAnn)
-&gt; (Term TyName Name uni fun NameAnn
    -&gt; Term TyName Name uni fun NameAnn)
-&gt; Term TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-227"></span><span>            </span><span class="annot"><span class="annottext">NameAnn
-&gt; Recursivity
-&gt; NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; Term TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Recursivity
-&gt; NonEmpty (Binding tyname name uni fun a)
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Recursivity
</span><a href="#local-6989586621680950897"><span class="hs-identifier hs-var">recy</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950894"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">(Term TyName Name uni fun NameAnn
 -&gt; Term TyName Name uni fun NameAnn)
-&gt; (Term TyName Name uni fun NameAnn
    -&gt; Term TyName Name uni fun NameAnn)
-&gt; Term TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-228"></span><span>                </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
-&gt; Term TyName Name uni fun NameAnn
-&gt; Term TyName Name uni fun NameAnn
forall n (t :: * -&gt; *).
Reference n t =&gt;
n -&gt; t NameAnn -&gt; t NameAnn
</span><a href="PlutusCore.Check.Scoping.html#referenceBound"><span class="hs-identifier hs-var">referenceBound</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding TyName Name uni fun NameAnn)
</span><a href="#local-6989586621680950894"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">(Term TyName Name uni fun NameAnn
 -&gt; Term TyName Name uni fun NameAnn)
-&gt; QuoteT Identity (Term TyName Name uni fun NameAnn)
-&gt; QuoteT Identity (Term TyName Name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-229"></span><span>                    </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950895"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#LamAbs"><span class="hs-identifier hs-type">LamAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950891"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950891"><span class="hs-identifier hs-var">nameDup</span></a></span></span><span> </span><span id="local-6989586621680950890"><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950890"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680950889"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950889"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-231"></span><span>        </span><span id="local-6989586621680950888"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950888"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; QuoteT Identity Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m Name
</span><a href="PlutusCore.Quote.html#freshenName"><span class="hs-identifier hs-var">freshenName</span></a></span><span> </span><span class="annot"><span class="annottext">name
Name
</span><a href="#local-6989586621680950891"><span class="hs-identifier hs-var">nameDup</span></a></span><span>
</span><span id="line-232"></span><span>        </span><span class="annot"><span class="annottext">(NameAnn
 -&gt; Name
 -&gt; Type tyname uni NameAnn
 -&gt; Term tyname Name uni fun NameAnn
 -&gt; Term tyname Name uni fun NameAnn)
-&gt; Name
-&gt; Type tyname uni ann
-&gt; Term tyname Name uni fun ann
-&gt; Quote (Term tyname Name uni fun NameAnn)
forall name (value :: * -&gt; *) (sort :: * -&gt; *) ann.
(Reference name value, ToScopedName name, Scoping sort,
 Scoping value) =&gt;
(NameAnn -&gt; name -&gt; sort NameAnn -&gt; value NameAnn -&gt; value NameAnn)
-&gt; name -&gt; sort ann -&gt; value ann -&gt; Quote (value NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScopingBinder"><span class="hs-identifier hs-var">establishScopingBinder</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Name
-&gt; Type tyname uni NameAnn
-&gt; Term tyname Name uni fun NameAnn
-&gt; Term tyname Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; name
-&gt; Type tyname uni a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#LamAbs"><span class="hs-identifier hs-var">LamAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950888"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950890"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
Term tyname Name uni fun ann
</span><a href="#local-6989586621680950889"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TyAbs"><span class="hs-identifier hs-type">TyAbs</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950885"><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680950885"><span class="hs-identifier hs-var">nameDup</span></a></span></span><span> </span><span id="local-6989586621680950884"><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950884"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621680950883"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950883"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-234"></span><span>        </span><span id="local-6989586621680950882"><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950882"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyName -&gt; QuoteT Identity TyName
forall (m :: * -&gt; *). MonadQuote m =&gt; TyName -&gt; m TyName
</span><a href="PlutusCore.Quote.html#freshenTyName"><span class="hs-identifier hs-var">freshenTyName</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
TyName
</span><a href="#local-6989586621680950885"><span class="hs-identifier hs-var">nameDup</span></a></span><span>
</span><span id="line-235"></span><span>        </span><span class="annot"><span class="annottext">(NameAnn
 -&gt; TyName
 -&gt; Kind NameAnn
 -&gt; Term TyName name uni fun NameAnn
 -&gt; Term TyName name uni fun NameAnn)
-&gt; TyName
-&gt; Kind ann
-&gt; Term TyName name uni fun ann
-&gt; Quote (Term TyName name uni fun NameAnn)
forall name (value :: * -&gt; *) (sort :: * -&gt; *) ann.
(Reference name value, ToScopedName name, Scoping sort,
 Scoping value) =&gt;
(NameAnn -&gt; name -&gt; sort NameAnn -&gt; value NameAnn -&gt; value NameAnn)
-&gt; name -&gt; sort ann -&gt; value ann -&gt; Quote (value NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScopingBinder"><span class="hs-identifier hs-var">establishScopingBinder</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; TyName
-&gt; Kind NameAnn
-&gt; Term TyName name uni fun NameAnn
-&gt; Term TyName name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; tyname
-&gt; Kind a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TyAbs"><span class="hs-identifier hs-var">TyAbs</span></a></span><span> </span><span class="annot"><span class="annottext">TyName
</span><a href="#local-6989586621680950882"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind ann
</span><a href="#local-6989586621680950884"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
Term TyName name uni fun ann
</span><a href="#local-6989586621680950883"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#IWrap"><span class="hs-identifier hs-type">IWrap</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950880"><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950880"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680950879"><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950879"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621680950878"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950878"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-237"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type tyname uni NameAnn
-&gt; Type tyname uni NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Type tyname uni a
-&gt; Type tyname uni a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#IWrap"><span class="hs-identifier hs-var">IWrap</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Type tyname uni NameAnn
 -&gt; Type tyname uni NameAnn
 -&gt; Term tyname name uni fun NameAnn
 -&gt; Term tyname name uni fun NameAnn)
-&gt; QuoteT Identity (Type tyname uni NameAnn)
-&gt; QuoteT
     Identity
     (Type tyname uni NameAnn
      -&gt; Term tyname name uni fun NameAnn
      -&gt; Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; QuoteT Identity (Type tyname uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950880"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteT
  Identity
  (Type tyname uni NameAnn
   -&gt; Term tyname name uni fun NameAnn
   -&gt; Term tyname name uni fun NameAnn)
-&gt; QuoteT Identity (Type tyname uni NameAnn)
-&gt; QuoteT
     Identity
     (Term tyname name uni fun NameAnn
      -&gt; Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; QuoteT Identity (Type tyname uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950879"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteT
  Identity
  (Term tyname name uni fun NameAnn
   -&gt; Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950878"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950877"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950877"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621680950876"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950876"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Term tyname name uni fun NameAnn
 -&gt; Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
-&gt; QuoteT
     Identity
     (Term tyname name uni fun NameAnn
      -&gt; Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950877"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteT
  Identity
  (Term tyname name uni fun NameAnn
   -&gt; Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950876"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Unwrap"><span class="hs-identifier hs-type">Unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950874"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950874"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; Term tyname name uni fun a -&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Unwrap"><span class="hs-identifier hs-var">Unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950874"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Error"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950872"><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950872"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; Type tyname uni a -&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Error"><span class="hs-identifier hs-var">Error</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn)
-&gt; QuoteT Identity (Type tyname uni NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; QuoteT Identity (Type tyname uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950872"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TyInst"><span class="hs-identifier hs-type">TyInst</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950871"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950871"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span id="local-6989586621680950870"><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950870"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><span class="annottext">NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Type tyname uni NameAnn
-&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a
-&gt; Term tyname name uni fun a
-&gt; Type tyname uni a
-&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#TyInst"><span class="hs-identifier hs-var">TyInst</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
-&gt; QuoteT
     Identity
     (Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950871"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">QuoteT
  Identity
  (Type tyname uni NameAnn -&gt; Term tyname name uni fun NameAnn)
-&gt; QuoteT Identity (Type tyname uni NameAnn)
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; QuoteT Identity (Type tyname uni NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680950870"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950869"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950869"><span class="hs-identifier hs-var">nameDup</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-245"></span><span>        </span><span id="local-6989586621680950868"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950868"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; QuoteT Identity Name
forall (m :: * -&gt; *). MonadQuote m =&gt; Name -&gt; m Name
</span><a href="PlutusCore.Quote.html#freshenName"><span class="hs-identifier hs-var">freshenName</span></a></span><span> </span><span class="annot"><span class="annottext">name
Name
</span><a href="#local-6989586621680950869"><span class="hs-identifier hs-var">nameDup</span></a></span><span>
</span><span id="line-246"></span><span>        </span><span class="annot"><span class="annottext">Term tyname Name uni fun NameAnn
-&gt; Quote (Term tyname Name uni fun NameAnn)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname Name uni fun NameAnn
 -&gt; Quote (Term tyname Name uni fun NameAnn))
-&gt; Term tyname Name uni fun NameAnn
-&gt; Quote (Term tyname Name uni fun NameAnn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; Name -&gt; Term tyname Name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; name -&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; NameAnn
forall name. ToScopedName name =&gt; name -&gt; NameAnn
</span><a href="PlutusCore.Check.Scoping.html#registerFree"><span class="hs-identifier hs-var">registerFree</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950868"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621680950868"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950865"><span class="annot"><span class="annottext">Some (ValueOf uni)
</span><a href="#local-6989586621680950865"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Quote (Term tyname name uni fun NameAnn))
-&gt; Term tyname name uni fun NameAnn
-&gt; Quote (Term tyname name uni fun NameAnn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; Some (ValueOf uni) -&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; Some (ValueOf uni) -&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">Some (ValueOf uni)
</span><a href="#local-6989586621680950865"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Builtin"><span class="hs-identifier hs-type">Builtin</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950863"><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680950863"><span class="hs-identifier hs-var">bi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
-&gt; Quote (Term tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Quote (Term tyname name uni fun NameAnn))
-&gt; Term tyname name uni fun NameAnn
-&gt; Quote (Term tyname name uni fun NameAnn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; fun -&gt; Term tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun a.
a -&gt; fun -&gt; Term tyname name uni fun a
</span><a href="PlutusIR.Core.Type.html#Builtin"><span class="hs-identifier hs-var">Builtin</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">fun
</span><a href="#local-6989586621680950863"><span class="hs-identifier hs-var">bi</span></a></span></span></span></span></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span id="local-6989586621680950859"><span id="local-6989586621680950860"><span id="local-6989586621680950861"><span id="local-6989586621680950862"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950862"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950861"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#EstablishScoping"><span class="hs-identifier hs-type">EstablishScoping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950862"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950861"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950860"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950859"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621680950857"><span class="annot"><span class="annottext">establishScoping :: Program tyname name uni fun ann
-&gt; Quote (Program tyname name uni fun NameAnn)
</span><a href="#local-6989586621680950857"><span class="hs-identifier hs-var hs-var hs-var hs-var">establishScoping</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950855"><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950855"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn
-&gt; Term tyname name uni fun NameAnn
-&gt; Program tyname name uni fun NameAnn
forall tyname name (uni :: * -&gt; *) fun ann.
ann
-&gt; Term tyname name uni fun ann -&gt; Program tyname name uni fun ann
</span><a href="PlutusIR.Core.Type.html#Program"><span class="hs-identifier hs-var">Program</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="PlutusCore.Check.Scoping.html#NotAName"><span class="hs-identifier hs-var">NotAName</span></a></span><span> </span><span class="annot"><span class="annottext">(Term tyname name uni fun NameAnn
 -&gt; Program tyname name uni fun NameAnn)
-&gt; QuoteT Identity (Term tyname name uni fun NameAnn)
-&gt; Quote (Program tyname name uni fun NameAnn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; QuoteT Identity (Term tyname name uni fun NameAnn)
forall (t :: * -&gt; *) ann.
EstablishScoping t =&gt;
t ann -&gt; Quote (t NameAnn)
</span><a href="PlutusCore.Check.Scoping.html#establishScoping"><span class="hs-identifier hs-var">establishScoping</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
</span><a href="#local-6989586621680950855"><span class="hs-identifier hs-var">term</span></a></span></span></span></span></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span id="local-6989586621680950854"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="#local-6989586621680950854"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#CollectScopeInfo"><span class="hs-identifier hs-type">CollectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950854"><span class="hs-identifier hs-type">tyname</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-254"></span><span>    </span><span id="local-6989586621680950851"><span class="annot"><span class="annottext">collectScopeInfo :: TyVarDecl tyname NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectScopeInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#TyVarDecl"><span class="hs-identifier hs-type">TyVarDecl</span></a></span><span> </span><span id="local-6989586621680950849"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950849"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680950848"><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680950848"><span class="hs-identifier hs-var">tyname</span></a></span></span><span> </span><span id="local-6989586621680950847"><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680950847"><span class="hs-identifier hs-var">kind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; tyname -&gt; ScopeErrorOrInfo
forall name.
ToScopedName name =&gt;
NameAnn -&gt; name -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#handleSname"><span class="hs-identifier hs-var">handleSname</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950849"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680950848"><span class="hs-identifier hs-var">tyname</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680950847"><span class="hs-identifier hs-var">kind</span></a></span></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span id="local-6989586621680950842"><span id="local-6989586621680950843"><span id="local-6989586621680950844"><span id="local-6989586621680950845"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950845"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950844"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#CollectScopeInfo"><span class="hs-identifier hs-type">CollectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950845"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950844"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950843"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950842"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-257"></span><span>    </span><span id="local-6989586621680950840"><span class="annot"><span class="annottext">collectScopeInfo :: VarDecl tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
</span><a href="#local-6989586621680950840"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectScopeInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Core.Type.html#VarDecl"><span class="hs-identifier hs-type">VarDecl</span></a></span><span> </span><span id="local-6989586621680950839"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950839"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680950838"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950838"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680950837"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950837"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; name -&gt; ScopeErrorOrInfo
forall name.
ToScopedName name =&gt;
NameAnn -&gt; name -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#handleSname"><span class="hs-identifier hs-var">handleSname</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950839"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950838"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950837"><span class="hs-identifier hs-var">ty</span></a></span></span></span></span></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span id="local-6989586621680950833"><span id="local-6989586621680950834"><span id="local-6989586621680950835"><span id="local-6989586621680950836"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950836"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950835"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#CollectScopeInfo"><span class="hs-identifier hs-type">CollectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950836"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950835"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950834"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950833"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621680950831"><span class="annot"><span class="annottext">collectScopeInfo :: Datatype tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
</span><a href="#local-6989586621680950831"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectScopeInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span id="local-6989586621680950830"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950830"><span class="hs-identifier hs-var">matchAnn</span></a></span></span><span> </span><span id="local-6989586621680950829"><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680950829"><span class="hs-identifier hs-var">dataDecl</span></a></span></span><span> </span><span id="local-6989586621680950828"><span class="annot"><span class="annottext">[TyVarDecl tyname NameAnn]
</span><a href="#local-6989586621680950828"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621680950827"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950827"><span class="hs-identifier hs-var">matchName</span></a></span></span><span> </span><span id="local-6989586621680950826"><span class="annot"><span class="annottext">[VarDecl tyname name uni fun NameAnn]
</span><a href="#local-6989586621680950826"><span class="hs-identifier hs-var">constrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ScopeErrorOrInfo] -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fold</span></a></span><span>
</span><span id="line-261"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680950829"><span class="hs-identifier hs-var">dataDecl</span></a></span><span>
</span><span id="line-262"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(TyVarDecl tyname NameAnn -&gt; ScopeErrorOrInfo)
-&gt; [TyVarDecl tyname NameAnn] -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarDecl tyname NameAnn]
</span><a href="#local-6989586621680950828"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-263"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; name -&gt; ScopeErrorOrInfo
forall name.
ToScopedName name =&gt;
NameAnn -&gt; name -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#handleSname"><span class="hs-identifier hs-var">handleSname</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950830"><span class="hs-identifier hs-var">matchAnn</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950827"><span class="hs-identifier hs-var">matchName</span></a></span><span>
</span><span id="line-264"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(VarDecl tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo)
-&gt; [VarDecl tyname name uni fun NameAnn] -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[VarDecl tyname name uni fun NameAnn]
</span><a href="#local-6989586621680950826"><span class="hs-identifier hs-var">constrs</span></a></span><span>
</span><span id="line-265"></span><span>        </span><span class="hs-special">]</span></span></span></span></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span id="local-6989586621680950820"><span id="local-6989586621680950821"><span id="local-6989586621680950822"><span id="local-6989586621680950823"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950823"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950822"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#CollectScopeInfo"><span class="hs-identifier hs-type">CollectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Binding"><span class="hs-identifier hs-type">Binding</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950823"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950822"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950821"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950820"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-268"></span><span>    </span><span id="local-6989586621680950818"><span class="annot"><span class="annottext">collectScopeInfo :: Binding tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
</span><a href="#local-6989586621680950818"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectScopeInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TermBind"><span class="hs-identifier hs-type">TermBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Strictness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950817"><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680950817"><span class="hs-identifier hs-var">varDecl</span></a></span></span><span> </span><span id="local-6989586621680950816"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950816"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">VarDecl tyname name uni fun NameAnn
</span><a href="#local-6989586621680950817"><span class="hs-identifier hs-var">varDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950816"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TypeBind"><span class="hs-identifier hs-type">TypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950815"><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680950815"><span class="hs-identifier hs-var">tyVarDecl</span></a></span></span><span> </span><span id="local-6989586621680950814"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950814"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarDecl tyname NameAnn
</span><a href="#local-6989586621680950815"><span class="hs-identifier hs-var">tyVarDecl</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950814"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#DatatypeBind"><span class="hs-identifier hs-type">DatatypeBind</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950813"><span class="annot"><span class="annottext">Datatype tyname name uni fun NameAnn
</span><a href="#local-6989586621680950813"><span class="hs-identifier hs-var">datatype</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Datatype tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Datatype tyname name uni fun NameAnn
</span><a href="#local-6989586621680950813"><span class="hs-identifier hs-var">datatype</span></a></span></span></span></span></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span id="local-6989586621680950809"><span id="local-6989586621680950810"><span id="local-6989586621680950811"><span id="local-6989586621680950812"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950812"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950811"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#CollectScopeInfo"><span class="hs-identifier hs-type">CollectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950812"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950811"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950810"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950809"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-273"></span><span>    </span><span id="local-6989586621680950807"><span class="annot"><span class="annottext">collectScopeInfo :: Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
</span><a href="#local-6989586621680950807"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectScopeInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Recursivity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950806"><span class="annot"><span class="annottext">NonEmpty (Binding tyname name uni fun NameAnn)
</span><a href="#local-6989586621680950806"><span class="hs-identifier hs-var">bindings</span></a></span></span><span> </span><span id="local-6989586621680950805"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950805"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-274"></span><span>        </span><span class="annot"><span class="annottext">(Binding tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo)
-&gt; NonEmpty (Binding tyname name uni fun NameAnn)
-&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="annot"><span class="annottext">Binding tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (Binding tyname name uni fun NameAnn)
</span><a href="#local-6989586621680950806"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950805"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#LamAbs"><span class="hs-identifier hs-type">LamAbs</span></a></span><span> </span><span id="local-6989586621680950804"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950804"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680950803"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950803"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680950802"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950802"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680950801"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950801"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-276"></span><span>        </span><span class="annot"><span class="annottext">NameAnn -&gt; name -&gt; ScopeErrorOrInfo
forall name.
ToScopedName name =&gt;
NameAnn -&gt; name -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#handleSname"><span class="hs-identifier hs-var">handleSname</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950804"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950803"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950802"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950801"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TyAbs"><span class="hs-identifier hs-type">TyAbs</span></a></span><span> </span><span id="local-6989586621680950800"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950800"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680950799"><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680950799"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621680950798"><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680950798"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621680950797"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950797"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-278"></span><span>        </span><span class="annot"><span class="annottext">NameAnn -&gt; tyname -&gt; ScopeErrorOrInfo
forall name.
ToScopedName name =&gt;
NameAnn -&gt; name -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#handleSname"><span class="hs-identifier hs-var">handleSname</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950800"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680950799"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Kind NameAnn
</span><a href="#local-6989586621680950798"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950797"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#IWrap"><span class="hs-identifier hs-type">IWrap</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950796"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950796"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680950795"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950795"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621680950794"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950794"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950796"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950795"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950794"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950793"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950793"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621680950792"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950792"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950793"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950792"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Unwrap"><span class="hs-identifier hs-type">Unwrap</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950791"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950791"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950791"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Error"><span class="hs-identifier hs-type">Error</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950790"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950790"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950790"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#TyInst"><span class="hs-identifier hs-type">TyInst</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950789"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950789"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span id="local-6989586621680950788"><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950788"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950789"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo -&gt; ScopeErrorOrInfo -&gt; ScopeErrorOrInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni NameAnn
</span><a href="#local-6989586621680950788"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680950787"><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950787"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680950786"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950786"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAnn -&gt; name -&gt; ScopeErrorOrInfo
forall name.
ToScopedName name =&gt;
NameAnn -&gt; name -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#handleSname"><span class="hs-identifier hs-var">handleSname</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621680950787"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680950786"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Constant"><span class="hs-identifier hs-type">Constant</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Some (ValueOf uni)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Builtin"><span class="hs-identifier hs-type">Builtin</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">fun
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeErrorOrInfo
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span></span></span></span></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="local-6989586621680950782"><span id="local-6989586621680950783"><span id="local-6989586621680950784"><span id="local-6989586621680950785"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680950785"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TyName"><span class="hs-identifier hs-type">TyName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680950784"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-glyph hs-type">~</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Check.Scoping.html#CollectScopeInfo"><span class="hs-identifier hs-type">CollectScopeInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950785"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950784"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950783"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680950782"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-290"></span><span>    </span><span id="local-6989586621680950780"><span class="annot"><span class="annottext">collectScopeInfo :: Program tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
</span><a href="#local-6989586621680950780"><span class="hs-identifier hs-var hs-var hs-var hs-var">collectScopeInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusIR.Core.Type.html#Program"><span class="hs-identifier hs-type">Program</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680950779"><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950779"><span class="hs-identifier hs-var">term</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn -&gt; ScopeErrorOrInfo
forall (t :: * -&gt; *).
CollectScopeInfo t =&gt;
t NameAnn -&gt; ScopeErrorOrInfo
</span><a href="PlutusCore.Check.Scoping.html#collectScopeInfo"><span class="hs-identifier hs-var">collectScopeInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun NameAnn
</span><a href="#local-6989586621680950779"><span class="hs-identifier hs-var">term</span></a></span></span></span></span></span><span>
</span><span id="line-291"></span></pre></body></html>