<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="%24con2tag_XwNnYEPEww8l02T4CrzBr"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- | Definition analysis for Plutus Core.</span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusCore.Analysis.Definitions</span><span>
</span><span id="line-4"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier">UniqueInfos</span></a></span><span>
</span><span id="line-5"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopeType"><span class="hs-identifier">ScopeType</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#termDefs"><span class="hs-identifier">termDefs</span></a></span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier">typeDefs</span></a></span><span>
</span><span id="line-8"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#runTermDefs"><span class="hs-identifier">runTermDefs</span></a></span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#runTypeDefs"><span class="hs-identifier">runTypeDefs</span></a></span><span>
</span><span id="line-10"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier">addDef</span></a></span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#addUsage"><span class="hs-identifier">addUsage</span></a></span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Core.html"><span class="hs-identifier">PlutusCore.Core</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Error.html"><span class="hs-identifier">PlutusCore.Error</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusCore.Name.html"><span class="hs-identifier">PlutusCore.Name</span></a></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor.Foldable</span></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Lens</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">use</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">uses</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Writer</span></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-comment">{- Note [Unique usage errors]
The definitions analysis can find a number of problems with usage of uniques, however
clients may not always want to throw an error on all of them, hence we simply return
them all and allow the client to chose if they want to throw some of them.
-}</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-comment">-- | Information about a unique, a pair of a definition if we have one and a set of uses.</span><span>
</span><span id="line-35"></span><span class="hs-keyword">type</span><span> </span><span id="UniqueInfo"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfo"><span class="hs-identifier hs-var">UniqueInfo</span></a></span></span><span> </span><span id="local-6989586621680938150"><span class="annot"><a href="#local-6989586621680938150"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938150"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938150"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">type</span><span> </span><span id="UniqueInfos"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-var">UniqueInfos</span></a></span></span><span> </span><span id="local-6989586621680938149"><span class="annot"><a href="#local-6989586621680938149"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusCore.Name.html#UniqueMap"><span class="hs-identifier hs-type">UniqueMap</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfo"><span class="hs-identifier hs-type">UniqueInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938149"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">data</span><span> </span><span id="ScopedLoc"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-var">ScopedLoc</span></a></span></span><span> </span><span id="local-6989586621680938268"><span class="annot"><a href="#local-6989586621680938268"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ScopedLoc"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-var">ScopedLoc</span></a></span></span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopeType"><span class="hs-identifier hs-type">ScopeType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938268"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938144"><span id="local-6989586621680938146"><span class="annot"><span class="annottext">ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
(ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool) -&gt; Eq (ScopedLoc ann)
forall ann. Eq ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
$c/= :: forall ann. Eq ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
== :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
$c== :: forall ann. Eq ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680938128"><span id="local-6989586621680938130"><span id="local-6989586621680938132"><span id="local-6989586621680938134"><span id="local-6989586621680938136"><span id="local-6989586621680938138"><span id="local-6989586621680938140"><span class="annot"><span class="annottext">Eq (ScopedLoc ann)
Eq (ScopedLoc ann)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; Ordering)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann)
-&gt; (ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann)
-&gt; Ord (ScopedLoc ann)
ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
ScopedLoc ann -&gt; ScopedLoc ann -&gt; Ordering
ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
forall ann. Ord ann =&gt; Eq (ScopedLoc ann)
forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Ordering
forall ann.
Ord ann =&gt;
ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann
min :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann
$cmin :: forall ann.
Ord ann =&gt;
ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann
max :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann
$cmax :: forall ann.
Ord ann =&gt;
ScopedLoc ann -&gt; ScopedLoc ann -&gt; ScopedLoc ann
&gt;= :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
$c&gt;= :: forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
&gt; :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
$c&gt; :: forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
&lt;= :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
$c&lt;= :: forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
&lt; :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
$c&lt; :: forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Bool
compare :: ScopedLoc ann -&gt; ScopedLoc ann -&gt; Ordering
$ccompare :: forall ann. Ord ann =&gt; ScopedLoc ann -&gt; ScopedLoc ann -&gt; Ordering
$cp1Ord :: forall ann. Ord ann =&gt; Eq (ScopedLoc ann)
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-comment">-- | Tag for distinguishing between whether we are talking about the term scope</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- for variables or the type scope for variables.</span><span>
</span><span id="line-42"></span><span class="hs-keyword">data</span><span> </span><span id="ScopeType"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopeType"><span class="hs-identifier hs-var">ScopeType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TermScope"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#TermScope"><span class="hs-identifier hs-var">TermScope</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="TypeScope"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#TypeScope"><span class="hs-identifier hs-var">TypeScope</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938121"><span id="local-6989586621680938123"><span class="annot"><span class="annottext">ScopeType -&gt; ScopeType -&gt; Bool
(ScopeType -&gt; ScopeType -&gt; Bool)
-&gt; (ScopeType -&gt; ScopeType -&gt; Bool) -&gt; Eq ScopeType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ScopeType -&gt; ScopeType -&gt; Bool
$c/= :: ScopeType -&gt; ScopeType -&gt; Bool
== :: ScopeType -&gt; ScopeType -&gt; Bool
$c== :: ScopeType -&gt; ScopeType -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680938106"><span id="local-6989586621680938108"><span id="local-6989586621680938110"><span id="local-6989586621680938112"><span id="local-6989586621680938114"><span id="local-6989586621680938116"><span id="local-6989586621680938118"><span class="annot"><span class="annottext">Eq ScopeType
Eq ScopeType
-&gt; (ScopeType -&gt; ScopeType -&gt; Ordering)
-&gt; (ScopeType -&gt; ScopeType -&gt; Bool)
-&gt; (ScopeType -&gt; ScopeType -&gt; Bool)
-&gt; (ScopeType -&gt; ScopeType -&gt; Bool)
-&gt; (ScopeType -&gt; ScopeType -&gt; Bool)
-&gt; (ScopeType -&gt; ScopeType -&gt; ScopeType)
-&gt; (ScopeType -&gt; ScopeType -&gt; ScopeType)
-&gt; Ord ScopeType
ScopeType -&gt; ScopeType -&gt; Bool
ScopeType -&gt; ScopeType -&gt; Ordering
ScopeType -&gt; ScopeType -&gt; ScopeType
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: ScopeType -&gt; ScopeType -&gt; ScopeType
$cmin :: ScopeType -&gt; ScopeType -&gt; ScopeType
max :: ScopeType -&gt; ScopeType -&gt; ScopeType
$cmax :: ScopeType -&gt; ScopeType -&gt; ScopeType
&gt;= :: ScopeType -&gt; ScopeType -&gt; Bool
$c&gt;= :: ScopeType -&gt; ScopeType -&gt; Bool
&gt; :: ScopeType -&gt; ScopeType -&gt; Bool
$c&gt; :: ScopeType -&gt; ScopeType -&gt; Bool
&lt;= :: ScopeType -&gt; ScopeType -&gt; Bool
$c&lt;= :: ScopeType -&gt; ScopeType -&gt; Bool
&lt; :: ScopeType -&gt; ScopeType -&gt; Bool
$c&lt; :: ScopeType -&gt; ScopeType -&gt; Bool
compare :: ScopeType -&gt; ScopeType -&gt; Ordering
$ccompare :: ScopeType -&gt; ScopeType -&gt; Ordering
$cp1Ord :: Eq ScopeType
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span id="local-6989586621680938263"><span id="local-6989586621680938265"><span id="local-6989586621680938266"><span id="local-6989586621680938267"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#lookupDef"><span class="hs-identifier hs-type">lookupDef</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938267"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938266"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938265"><span class="hs-identifier hs-type">unique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938267"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680938263"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938266"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938263"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfo"><span class="hs-identifier hs-type">UniqueInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938267"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-50"></span><span id="lookupDef"><span class="annot"><span class="annottext">lookupDef :: name -&gt; m (UniqueInfo ann)
</span><a href="PlutusCore.Analysis.Definitions.html#lookupDef"><span class="hs-identifier hs-var hs-var">lookupDef</span></a></span></span><span> </span><span id="local-6989586621680938104"><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680938104"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-51"></span><span>    </span><span id="local-6989586621680938103"><span class="annot"><span class="annottext">Maybe (UniqueInfo ann)
</span><a href="#local-6989586621680938103"><span class="hs-identifier hs-var">previousDef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(UniqueMap Unique (UniqueInfo ann) -&gt; Maybe (UniqueInfo ann))
-&gt; m (Maybe (UniqueInfo ann))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">((UniqueMap Unique (UniqueInfo ann) -&gt; Maybe (UniqueInfo ann))
 -&gt; m (Maybe (UniqueInfo ann)))
-&gt; (UniqueMap Unique (UniqueInfo ann) -&gt; Maybe (UniqueInfo ann))
-&gt; m (Maybe (UniqueInfo ann))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">name -&gt; UniqueMap Unique (UniqueInfo ann) -&gt; Maybe (UniqueInfo ann)
forall name unique1 unique2 a.
(HasUnique name unique1, Coercible unique2 Unique) =&gt;
name -&gt; UniqueMap unique2 a -&gt; Maybe a
</span><a href="PlutusCore.Name.html#lookupNameIndex"><span class="hs-identifier hs-var">lookupNameIndex</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680938104"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (UniqueInfo ann)
</span><a href="#local-6989586621680938103"><span class="hs-identifier hs-var">previousDef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621680938100"><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938100"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann -&gt; m (UniqueInfo ann)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938100"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><span class="annottext">Maybe (UniqueInfo ann)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-55"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938099"><span class="annot"><span class="annottext">empty :: (Maybe a, Set (ScopedLoc ann))
</span><a href="#local-6989586621680938099"><span class="hs-identifier hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ScopedLoc ann)
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>            </span><span class="annot"><span class="annottext">(UniqueMap Unique (UniqueInfo ann)
 -&gt; UniqueMap Unique (UniqueInfo ann))
-&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((UniqueMap Unique (UniqueInfo ann)
  -&gt; UniqueMap Unique (UniqueInfo ann))
 -&gt; m ())
-&gt; (UniqueMap Unique (UniqueInfo ann)
    -&gt; UniqueMap Unique (UniqueInfo ann))
-&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">name
-&gt; UniqueInfo ann
-&gt; UniqueMap Unique (UniqueInfo ann)
-&gt; UniqueMap Unique (UniqueInfo ann)
forall name unique1 unique2 a.
(HasUnique name unique1, Coercible unique2 Unique) =&gt;
name -&gt; a -&gt; UniqueMap unique2 a -&gt; UniqueMap unique2 a
</span><a href="PlutusCore.Name.html#insertByNameIndex"><span class="hs-identifier hs-var">insertByNameIndex</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680938104"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
forall a. (Maybe a, Set (ScopedLoc ann))
</span><a href="#local-6989586621680938099"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-57"></span><span>            </span><span class="annot"><span class="annottext">UniqueInfo ann -&gt; m (UniqueInfo ann)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
forall a. (Maybe a, Set (ScopedLoc ann))
</span><a href="#local-6989586621680938099"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span id="local-6989586621680938093"><span id="local-6989586621680938094"><span id="local-6989586621680938095"><span id="local-6989586621680938096"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier hs-type">addDef</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938096"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938095"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938094"><span class="hs-identifier hs-type">unique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938096"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680938093"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938096"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938093"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938095"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-comment">-- ^ The variable</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938096"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The annotation of the variable</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopeType"><span class="hs-identifier hs-type">ScopeType</span></a></span><span> </span><span class="hs-comment">-- ^ The scope type</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938093"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-68"></span><span id="addDef"><span class="annot"><span class="annottext">addDef :: n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier hs-var hs-var">addDef</span></a></span></span><span> </span><span id="local-6989586621680938092"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938092"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680938091"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938091"><span class="hs-identifier hs-var">newDef</span></a></span></span><span> </span><span id="local-6989586621680938090"><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938090"><span class="hs-identifier hs-var">tpe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938089"><span class="annot"><span class="annottext">def :: ScopedLoc ann
</span><a href="#local-6989586621680938089"><span class="hs-identifier hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeType -&gt; ann -&gt; ScopedLoc ann
forall ann. ScopeType -&gt; ann -&gt; ScopedLoc ann
</span><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-var">ScopedLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938090"><span class="hs-identifier hs-var">tpe</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938091"><span class="hs-identifier hs-var">newDef</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>    </span><span id="local-6989586621680938088"><span class="annot"><span class="annottext">d :: UniqueInfo ann
</span><a href="#local-6989586621680938088"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680938087"><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><a href="#local-6989586621680938087"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">n -&gt; m (UniqueInfo ann)
forall ann name unique (m :: * -&gt; *).
(Ord ann, HasUnique name unique, MonadState (UniqueInfos ann) m) =&gt;
name -&gt; m (UniqueInfo ann)
</span><a href="PlutusCore.Analysis.Definitions.html#lookupDef"><span class="hs-identifier hs-var">lookupDef</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938092"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="annottext">n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
forall n u ann (m :: * -&gt; *).
(HasUnique n u, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#checkUndefined"><span class="hs-identifier hs-var">checkUndefined</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938092"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann
</span><a href="#local-6989586621680938089"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938088"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><span class="annottext">(UniqueMap Unique (UniqueInfo ann)
 -&gt; UniqueMap Unique (UniqueInfo ann))
-&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((UniqueMap Unique (UniqueInfo ann)
  -&gt; UniqueMap Unique (UniqueInfo ann))
 -&gt; m ())
-&gt; (UniqueMap Unique (UniqueInfo ann)
    -&gt; UniqueMap Unique (UniqueInfo ann))
-&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">n
-&gt; UniqueInfo ann
-&gt; UniqueMap Unique (UniqueInfo ann)
-&gt; UniqueMap Unique (UniqueInfo ann)
forall name unique1 unique2 a.
(HasUnique name unique1, Coercible unique2 Unique) =&gt;
name -&gt; a -&gt; UniqueMap unique2 a -&gt; UniqueMap unique2 a
</span><a href="PlutusCore.Name.html#insertByNameIndex"><span class="hs-identifier hs-var">insertByNameIndex</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938092"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScopedLoc ann -&gt; Maybe (ScopedLoc ann)
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann
</span><a href="#local-6989586621680938089"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><a href="#local-6989586621680938087"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | Check that a variable is currently undefined.</span><span>
</span><span id="line-76"></span><span id="local-6989586621680938259"><span id="local-6989586621680938260"><span id="local-6989586621680938261"><span id="local-6989586621680938262"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#checkUndefined"><span class="hs-identifier hs-type">checkUndefined</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938262"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938261"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938260"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680938259"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938260"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938259"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938262"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-comment">-- ^ The variable</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938260"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The new definition</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfo"><span class="hs-identifier hs-type">UniqueInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938260"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The existing info</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938259"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-84"></span><span id="checkUndefined"><span class="annot"><span class="annottext">checkUndefined :: n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#checkUndefined"><span class="hs-identifier hs-var hs-var">checkUndefined</span></a></span></span><span> </span><span id="local-6989586621680938085"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938085"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938084"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938084"><span class="hs-identifier hs-var">newDef</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680938083"><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938083"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938083"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938082"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938082"><span class="hs-identifier hs-var">prevDef</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[UniqueError ann] -&gt; m ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><span class="hs-identifier hs-var">tell</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Unique -&gt; ann -&gt; ann -&gt; UniqueError ann
forall ann. Unique -&gt; ann -&gt; ann -&gt; UniqueError ann
</span><a href="PlutusCore.Error.html#MultiplyDefined"><span class="hs-identifier hs-var">MultiplyDefined</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938085"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; Getting Unique n Unique -&gt; Unique
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Unique n Unique
forall name unique. HasUnique name unique =&gt; Lens' name Unique
</span><a href="PlutusCore.Name.html#theUnique"><span class="hs-identifier hs-var">theUnique</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938082"><span class="hs-identifier hs-var">prevDef</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938084"><span class="hs-identifier hs-var">newDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><span class="annottext">UniqueInfo ann
</span><span class="hs-identifier">_</span></span><span>                               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span id="local-6989586621680938209"><span id="local-6989586621680938210"><span id="local-6989586621680938211"><span id="local-6989586621680938212"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#addUsage"><span class="hs-identifier hs-type">addUsage</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938212"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938211"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938210"><span class="hs-identifier hs-type">unique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938212"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680938209"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938212"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938209"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938211"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-comment">-- ^ The variable</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938212"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The annotation of the variable</span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopeType"><span class="hs-identifier hs-type">ScopeType</span></a></span><span> </span><span class="hs-comment">-- ^ The scope type</span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938209"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-97"></span><span id="addUsage"><span class="annot"><span class="annottext">addUsage :: n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addUsage"><span class="hs-identifier hs-var hs-var">addUsage</span></a></span></span><span> </span><span id="local-6989586621680938077"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938077"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680938076"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938076"><span class="hs-identifier hs-var">newUse</span></a></span></span><span> </span><span id="local-6989586621680938075"><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938075"><span class="hs-identifier hs-var">tpe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680938074"><span class="annot"><span class="annottext">use :: ScopedLoc ann
</span><a href="#local-6989586621680938074"><span class="hs-identifier hs-var hs-var">use</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeType -&gt; ann -&gt; ScopedLoc ann
forall ann. ScopeType -&gt; ann -&gt; ScopedLoc ann
</span><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-var">ScopedLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938075"><span class="hs-identifier hs-var">tpe</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938076"><span class="hs-identifier hs-var">newUse</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>    </span><span id="local-6989586621680938073"><span class="annot"><span class="annottext">d :: UniqueInfo ann
</span><a href="#local-6989586621680938073"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621680938072"><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="#local-6989586621680938072"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680938071"><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><a href="#local-6989586621680938071"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">n -&gt; m (UniqueInfo ann)
forall ann name unique (m :: * -&gt; *).
(Ord ann, HasUnique name unique, MonadState (UniqueInfos ann) m) =&gt;
name -&gt; m (UniqueInfo ann)
</span><a href="PlutusCore.Analysis.Definitions.html#lookupDef"><span class="hs-identifier hs-var">lookupDef</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938077"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="annottext">n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
forall n u ann (m :: * -&gt; *).
(HasUnique n u, MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#checkCoherency"><span class="hs-identifier hs-var">checkCoherency</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938077"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann
</span><a href="#local-6989586621680938074"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938073"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="annottext">n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
forall n u ann (m :: * -&gt; *).
(HasUnique n u, MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#checkDefined"><span class="hs-identifier hs-var">checkDefined</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938077"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann
</span><a href="#local-6989586621680938074"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">UniqueInfo ann
</span><a href="#local-6989586621680938073"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="annottext">(UniqueMap Unique (UniqueInfo ann)
 -&gt; UniqueMap Unique (UniqueInfo ann))
-&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((UniqueMap Unique (UniqueInfo ann)
  -&gt; UniqueMap Unique (UniqueInfo ann))
 -&gt; m ())
-&gt; (UniqueMap Unique (UniqueInfo ann)
    -&gt; UniqueMap Unique (UniqueInfo ann))
-&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">n
-&gt; UniqueInfo ann
-&gt; UniqueMap Unique (UniqueInfo ann)
-&gt; UniqueMap Unique (UniqueInfo ann)
forall name unique1 unique2 a.
(HasUnique name unique1, Coercible unique2 Unique) =&gt;
name -&gt; a -&gt; UniqueMap unique2 a -&gt; UniqueMap unique2 a
</span><a href="PlutusCore.Name.html#insertByNameIndex"><span class="hs-identifier hs-var">insertByNameIndex</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938077"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="#local-6989586621680938072"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann -&gt; Set (ScopedLoc ann) -&gt; Set (ScopedLoc ann)
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann
</span><a href="#local-6989586621680938074"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><a href="#local-6989586621680938071"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621680938064"><span id="local-6989586621680938065"><span id="local-6989586621680938066"><span id="local-6989586621680938067"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#checkDefined"><span class="hs-identifier hs-type">checkDefined</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938067"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938066"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938065"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938064"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938067"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-comment">-- ^ The variable</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938065"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The new definition</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfo"><span class="hs-identifier hs-type">UniqueInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938065"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The existing info</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938064"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-112"></span><span id="checkDefined"><span class="annot"><span class="annottext">checkDefined :: n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#checkDefined"><span class="hs-identifier hs-var hs-var">checkDefined</span></a></span></span><span> </span><span id="local-6989586621680938063"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938063"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938062"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938062"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938061"><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="#local-6989586621680938061"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="#local-6989586621680938061"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[UniqueError ann] -&gt; m ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><span class="hs-identifier hs-var">tell</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Unique -&gt; ann -&gt; UniqueError ann
forall ann. Unique -&gt; ann -&gt; UniqueError ann
</span><a href="PlutusCore.Error.html#FreeVariable"><span class="hs-identifier hs-var">FreeVariable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938063"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; Getting Unique n Unique -&gt; Unique
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Unique n Unique
forall name unique. HasUnique name unique =&gt; Lens' name Unique
</span><a href="PlutusCore.Name.html#theUnique"><span class="hs-identifier hs-var">theUnique</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938062"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621680938238"><span id="local-6989586621680938239"><span id="local-6989586621680938240"><span id="local-6989586621680938241"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#checkCoherency"><span class="hs-identifier hs-type">checkCoherency</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938241"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938240"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938239"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938238"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938241"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-comment">-- ^ The variable</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938239"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The new definition</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfo"><span class="hs-identifier hs-type">UniqueInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938239"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-comment">-- ^ The existing info</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938238"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-123"></span><span id="checkCoherency"><span class="annot"><span class="annottext">checkCoherency :: n -&gt; ScopedLoc ann -&gt; UniqueInfo ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#checkCoherency"><span class="hs-identifier hs-var hs-var">checkCoherency</span></a></span></span><span> </span><span id="local-6989586621680938059"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938059"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span id="local-6989586621680938058"><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938058"><span class="hs-identifier hs-var">tpe</span></a></span></span><span> </span><span id="local-6989586621680938057"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938057"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680938056"><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="#local-6989586621680938056"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680938055"><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><a href="#local-6989586621680938055"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><span class="annottext">Maybe (ScopedLoc ann) -&gt; (ScopedLoc ann -&gt; m ()) -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">for_</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ScopedLoc ann)
</span><a href="#local-6989586621680938056"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann -&gt; m ()
forall (f :: * -&gt; *).
MonadWriter [UniqueError ann] f =&gt;
ScopedLoc ann -&gt; f ()
</span><a href="#local-6989586621680938053"><span class="hs-identifier hs-var">checkLoc</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><span class="annottext">[ScopedLoc ann] -&gt; (ScopedLoc ann -&gt; m ()) -&gt; m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">for_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set (ScopedLoc ann) -&gt; [ScopedLoc ann]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set (ScopedLoc ann)
</span><a href="#local-6989586621680938055"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ScopedLoc ann -&gt; m ()
forall (f :: * -&gt; *).
MonadWriter [UniqueError ann] f =&gt;
ScopedLoc ann -&gt; f ()
</span><a href="#local-6989586621680938053"><span class="hs-identifier hs-var">checkLoc</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>        </span><span id="local-6989586621680938053"><span class="annot"><span class="annottext">checkLoc :: ScopedLoc ann -&gt; f ()
</span><a href="#local-6989586621680938053"><span class="hs-identifier hs-var hs-var">checkLoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#ScopedLoc"><span class="hs-identifier hs-type">ScopedLoc</span></a></span><span> </span><span id="local-6989586621680938051"><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938051"><span class="hs-identifier hs-var">tpe'</span></a></span></span><span> </span><span id="local-6989586621680938050"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938050"><span class="hs-identifier hs-var">loc'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; f () -&gt; f ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938051"><span class="hs-identifier hs-var">tpe'</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType -&gt; ScopeType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="#local-6989586621680938058"><span class="hs-identifier hs-var">tpe</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(f () -&gt; f ()) -&gt; f () -&gt; f ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-129"></span><span>            </span><span class="annot"><span class="annottext">[UniqueError ann] -&gt; f ()
forall w (m :: * -&gt; *). MonadWriter w m =&gt; w -&gt; m ()
</span><span class="hs-identifier hs-var">tell</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Unique -&gt; ann -&gt; ann -&gt; UniqueError ann
forall ann. Unique -&gt; ann -&gt; ann -&gt; UniqueError ann
</span><a href="PlutusCore.Error.html#IncoherentUsage"><span class="hs-identifier hs-var">IncoherentUsage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621680938059"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">n -&gt; Getting Unique n Unique -&gt; Unique
forall s a. s -&gt; Getting a s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Getting Unique n Unique
forall name unique. HasUnique name unique =&gt; Lens' name Unique
</span><a href="PlutusCore.Name.html#theUnique"><span class="hs-identifier hs-var">theUnique</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938050"><span class="hs-identifier hs-var">loc'</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938057"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span id="local-6989586621680938164"><span id="local-6989586621680938165"><span id="local-6989586621680938166"><span id="local-6989586621680938167"><span id="local-6989586621680938169"><span id="local-6989586621680938170"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#termDefs"><span class="hs-identifier hs-type">termDefs</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938170"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938169"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TermUnique"><span class="hs-identifier hs-type">TermUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938167"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TypeUnique"><span class="hs-identifier hs-type">TypeUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938170"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680938166"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938170"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938166"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938167"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938169"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938165"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938164"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938170"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938166"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-139"></span><span id="termDefs"><span class="annot"><span class="annottext">termDefs :: Term tyname name uni fun ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#termDefs"><span class="hs-identifier hs-var hs-var">termDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Base (Term tyname name uni fun ann) (m ()) -&gt; m ())
-&gt; Term tyname name uni fun ann -&gt; m ()
forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><span class="hs-identifier hs-var">cata</span></span><span> </span><span class="annot"><span class="annottext">((Base (Term tyname name uni fun ann) (m ()) -&gt; m ())
 -&gt; Term tyname name uni fun ann -&gt; m ())
-&gt; (Base (Term tyname name uni fun ann) (m ()) -&gt; m ())
-&gt; Term tyname name uni fun ann
-&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#VarF"><span class="hs-identifier hs-type">VarF</span></a></span><span> </span><span id="local-6989586621680938044"><span class="annot"><a href="#local-6989586621680938044"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680938043"><span class="annot"><a href="#local-6989586621680938043"><span class="hs-identifier hs-var">n</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">name -&gt; ann -&gt; ScopeType -&gt; m ()
forall ann n unique (m :: * -&gt; *).
(Ord ann, HasUnique n unique, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addUsage"><span class="hs-identifier hs-var">addUsage</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680938043"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938044"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="PlutusCore.Analysis.Definitions.html#TermScope"><span class="hs-identifier hs-var">TermScope</span></a></span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#LamAbsF"><span class="hs-identifier hs-type">LamAbsF</span></a></span><span> </span><span id="local-6989586621680938041"><span class="annot"><a href="#local-6989586621680938041"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680938040"><span class="annot"><a href="#local-6989586621680938040"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680938039"><span class="annot"><a href="#local-6989586621680938039"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621680938038"><span class="annot"><a href="#local-6989586621680938038"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">name -&gt; ann -&gt; ScopeType -&gt; m ()
forall ann n unique (m :: * -&gt; *).
(Ord ann, HasUnique n unique, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier hs-var">addDef</span></a></span><span> </span><span class="annot"><span class="annottext">name
</span><a href="#local-6989586621680938040"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938041"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="PlutusCore.Analysis.Definitions.html#TermScope"><span class="hs-identifier hs-var">TermScope</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; m ()
forall ann tyname (m :: * -&gt; *) (uni :: * -&gt; *).
(Ord ann, HasUnique tyname TypeUnique,
 MonadState (UniqueInfos ann) m, MonadWriter [UniqueError ann] m) =&gt;
Type tyname uni ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-var">typeDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680938039"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621680938038"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#IWrapF"><span class="hs-identifier hs-type">IWrapF</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938036"><span class="annot"><a href="#local-6989586621680938036"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621680938035"><span class="annot"><a href="#local-6989586621680938035"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621680938034"><span class="annot"><a href="#local-6989586621680938034"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; m ()
forall ann tyname (m :: * -&gt; *) (uni :: * -&gt; *).
(Ord ann, HasUnique tyname TypeUnique,
 MonadState (UniqueInfos ann) m, MonadWriter [UniqueError ann] m) =&gt;
Type tyname uni ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-var">typeDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680938036"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; m ()
forall ann tyname (m :: * -&gt; *) (uni :: * -&gt; *).
(Ord ann, HasUnique tyname TypeUnique,
 MonadState (UniqueInfos ann) m, MonadWriter [UniqueError ann] m) =&gt;
Type tyname uni ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-var">typeDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680938035"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621680938034"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#TyAbsF"><span class="hs-identifier hs-type">TyAbsF</span></a></span><span> </span><span id="local-6989586621680938032"><span class="annot"><a href="#local-6989586621680938032"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680938031"><span class="annot"><a href="#local-6989586621680938031"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938030"><span class="annot"><a href="#local-6989586621680938030"><span class="hs-identifier hs-var">t</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tyname -&gt; ann -&gt; ScopeType -&gt; m ()
forall ann n unique (m :: * -&gt; *).
(Ord ann, HasUnique n unique, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier hs-var">addDef</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680938031"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938032"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="PlutusCore.Analysis.Definitions.html#TypeScope"><span class="hs-identifier hs-var">TypeScope</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621680938030"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#TyInstF"><span class="hs-identifier hs-type">TyInstF</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938028"><span class="annot"><a href="#local-6989586621680938028"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621680938027"><span class="annot"><a href="#local-6989586621680938027"><span class="hs-identifier hs-var">ty</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621680938028"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann -&gt; m ()
forall ann tyname (m :: * -&gt; *) (uni :: * -&gt; *).
(Ord ann, HasUnique tyname TypeUnique,
 MonadState (UniqueInfos ann) m, MonadWriter [UniqueError ann] m) =&gt;
Type tyname uni ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-var">typeDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
</span><a href="#local-6989586621680938027"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span id="local-6989586621680938026"><span class="annot"><span class="annottext">Base (Term tyname name uni fun ann) (m ())
</span><a href="#local-6989586621680938026"><span class="hs-identifier hs-var">x</span></a></span></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TermF tyname name uni fun ann (m ()) -&gt; m ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="annot"><span class="annottext">Base (Term tyname name uni fun ann) (m ())
TermF tyname name uni fun ann (m ())
</span><a href="#local-6989586621680938026"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="local-6989586621680938200"><span id="local-6989586621680938201"><span id="local-6989586621680938203"><span id="local-6989586621680938204"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-type">typeDefs</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938204"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938203"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TypeUnique"><span class="hs-identifier hs-type">TypeUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938204"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680938201"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">MonadWriter</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938204"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680938201"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938203"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938200"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938204"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938201"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-154"></span><span id="typeDefs"><span class="annot"><span class="annottext">typeDefs :: Type tyname uni ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-var hs-var">typeDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Base (Type tyname uni ann) (m ()) -&gt; m ())
-&gt; Type tyname uni ann -&gt; m ()
forall t a. Recursive t =&gt; (Base t a -&gt; a) -&gt; t -&gt; a
</span><span class="hs-identifier hs-var">cata</span></span><span> </span><span class="annot"><span class="annottext">((Base (Type tyname uni ann) (m ()) -&gt; m ())
 -&gt; Type tyname uni ann -&gt; m ())
-&gt; (Base (Type tyname uni ann) (m ()) -&gt; m ())
-&gt; Type tyname uni ann
-&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#TyVarF"><span class="hs-identifier hs-type">TyVarF</span></a></span><span> </span><span id="local-6989586621680938023"><span class="annot"><a href="#local-6989586621680938023"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680938022"><span class="annot"><a href="#local-6989586621680938022"><span class="hs-identifier hs-var">n</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tyname -&gt; ann -&gt; ScopeType -&gt; m ()
forall ann n unique (m :: * -&gt; *).
(Ord ann, HasUnique n unique, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addUsage"><span class="hs-identifier hs-var">addUsage</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680938022"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938023"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="PlutusCore.Analysis.Definitions.html#TypeScope"><span class="hs-identifier hs-var">TypeScope</span></a></span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#TyForallF"><span class="hs-identifier hs-type">TyForallF</span></a></span><span> </span><span id="local-6989586621680938020"><span class="annot"><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680938019"><span class="annot"><a href="#local-6989586621680938019"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938018"><span class="annot"><a href="#local-6989586621680938018"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tyname -&gt; ann -&gt; ScopeType -&gt; m ()
forall ann n unique (m :: * -&gt; *).
(Ord ann, HasUnique n unique, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier hs-var">addDef</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680938019"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938020"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="PlutusCore.Analysis.Definitions.html#TypeScope"><span class="hs-identifier hs-var">TypeScope</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621680938018"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><a href="PlutusCore.Core.Instance.Recursive.html#TyLamF"><span class="hs-identifier hs-type">TyLamF</span></a></span><span> </span><span id="local-6989586621680938016"><span class="annot"><a href="#local-6989586621680938016"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621680938015"><span class="annot"><a href="#local-6989586621680938015"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680938014"><span class="annot"><a href="#local-6989586621680938014"><span class="hs-identifier hs-var">t</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">tyname -&gt; ann -&gt; ScopeType -&gt; m ()
forall ann n unique (m :: * -&gt; *).
(Ord ann, HasUnique n unique, MonadState (UniqueInfos ann) m,
 MonadWriter [UniqueError ann] m) =&gt;
n -&gt; ann -&gt; ScopeType -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#addDef"><span class="hs-identifier hs-var">addDef</span></a></span><span> </span><span class="annot"><span class="annottext">tyname
</span><a href="#local-6989586621680938015"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621680938016"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeType
</span><a href="PlutusCore.Analysis.Definitions.html#TypeScope"><span class="hs-identifier hs-var">TypeScope</span></a></span><span> </span><span class="annot"><span class="annottext">m () -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621680938014"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621680938013"><span class="annot"><span class="annottext">Base (Type tyname uni ann) (m ())
</span><a href="#local-6989586621680938013"><span class="hs-identifier hs-var">x</span></a></span></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeF tyname uni ann (m ()) -&gt; m ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, Monad m) =&gt;
t (m a) -&gt; m ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">sequence_</span></a></span><span> </span><span class="annot"><span class="annottext">Base (Type tyname uni ann) (m ())
TypeF tyname uni ann (m ())
</span><a href="#local-6989586621680938013"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span id="local-6989586621680938007"><span id="local-6989586621680938008"><span id="local-6989586621680938009"><span id="local-6989586621680938010"><span id="local-6989586621680938011"><span id="local-6989586621680938012"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#runTermDefs"><span class="hs-identifier hs-type">runTermDefs</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938012"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938011"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TermUnique"><span class="hs-identifier hs-type">TermUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938010"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TypeUnique"><span class="hs-identifier hs-type">TypeUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938009"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938010"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938011"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938008"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938007"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938012"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938009"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938012"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938012"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-167"></span><span id="runTermDefs"><span class="annot"><span class="annottext">runTermDefs :: Term tyname name uni fun ann
-&gt; m (UniqueInfos ann, [UniqueError ann])
</span><a href="PlutusCore.Analysis.Definitions.html#runTermDefs"><span class="hs-identifier hs-var hs-var">runTermDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT [UniqueError ann] m (UniqueInfos ann)
-&gt; m (UniqueInfos ann, [UniqueError ann])
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var hs-var">runWriterT</span></span><span> </span><span class="annot"><span class="annottext">(WriterT [UniqueError ann] m (UniqueInfos ann)
 -&gt; m (UniqueInfos ann, [UniqueError ann]))
-&gt; (Term tyname name uni fun ann
    -&gt; WriterT [UniqueError ann] m (UniqueInfos ann))
-&gt; Term tyname name uni fun ann
-&gt; m (UniqueInfos ann, [UniqueError ann])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
 -&gt; UniqueInfos ann
 -&gt; WriterT [UniqueError ann] m (UniqueInfos ann))
-&gt; UniqueInfos ann
-&gt; StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
-&gt; WriterT [UniqueError ann] m (UniqueInfos ann)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
-&gt; UniqueInfos ann -&gt; WriterT [UniqueError ann] m (UniqueInfos ann)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m s
</span><span class="hs-identifier hs-var">execStateT</span></span><span> </span><span class="annot"><span class="annottext">UniqueInfos ann
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
 -&gt; WriterT [UniqueError ann] m (UniqueInfos ann))
-&gt; (Term tyname name uni fun ann
    -&gt; StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ())
-&gt; Term tyname name uni fun ann
-&gt; WriterT [UniqueError ann] m (UniqueInfos ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Term tyname name uni fun ann
-&gt; StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
forall ann name tyname (m :: * -&gt; *) (uni :: * -&gt; *) fun.
(Ord ann, HasUnique name TermUnique, HasUnique tyname TypeUnique,
 MonadState (UniqueInfos ann) m, MonadWriter [UniqueError ann] m) =&gt;
Term tyname name uni fun ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#termDefs"><span class="hs-identifier hs-var">termDefs</span></a></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621680937999"><span id="local-6989586621680938000"><span id="local-6989586621680938001"><span id="local-6989586621680938002"><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#runTypeDefs"><span class="hs-identifier hs-type">runTypeDefs</span></a></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938002"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><a href="PlutusCore.Name.html#HasUnique"><span class="hs-identifier hs-type">HasUnique</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938001"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="PlutusCore.Name.html#TypeUnique"><span class="hs-identifier hs-type">TypeUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938000"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusCore.Core.Type.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938001"><span class="hs-identifier hs-type">tyname</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680937999"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938002"><span class="hs-identifier hs-type">ann</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680938000"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusCore.Analysis.Definitions.html#UniqueInfos"><span class="hs-identifier hs-type">UniqueInfos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938002"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="PlutusCore.Error.html#UniqueError"><span class="hs-identifier hs-type">UniqueError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680938002"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-175"></span><span id="runTypeDefs"><span class="annot"><span class="annottext">runTypeDefs :: Type tyname uni ann -&gt; m (UniqueInfos ann, [UniqueError ann])
</span><a href="PlutusCore.Analysis.Definitions.html#runTypeDefs"><span class="hs-identifier hs-var hs-var">runTypeDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT [UniqueError ann] m (UniqueInfos ann)
-&gt; m (UniqueInfos ann, [UniqueError ann])
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var hs-var">runWriterT</span></span><span> </span><span class="annot"><span class="annottext">(WriterT [UniqueError ann] m (UniqueInfos ann)
 -&gt; m (UniqueInfos ann, [UniqueError ann]))
-&gt; (Type tyname uni ann
    -&gt; WriterT [UniqueError ann] m (UniqueInfos ann))
-&gt; Type tyname uni ann
-&gt; m (UniqueInfos ann, [UniqueError ann])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
 -&gt; UniqueInfos ann
 -&gt; WriterT [UniqueError ann] m (UniqueInfos ann))
-&gt; UniqueInfos ann
-&gt; StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
-&gt; WriterT [UniqueError ann] m (UniqueInfos ann)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
-&gt; UniqueInfos ann -&gt; WriterT [UniqueError ann] m (UniqueInfos ann)
forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m s
</span><span class="hs-identifier hs-var">execStateT</span></span><span> </span><span class="annot"><span class="annottext">UniqueInfos ann
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">(StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
 -&gt; WriterT [UniqueError ann] m (UniqueInfos ann))
-&gt; (Type tyname uni ann
    -&gt; StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ())
-&gt; Type tyname uni ann
-&gt; WriterT [UniqueError ann] m (UniqueInfos ann)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Type tyname uni ann
-&gt; StateT (UniqueInfos ann) (WriterT [UniqueError ann] m) ()
forall ann tyname (m :: * -&gt; *) (uni :: * -&gt; *).
(Ord ann, HasUnique tyname TypeUnique,
 MonadState (UniqueInfos ann) m, MonadWriter [UniqueError ann] m) =&gt;
Type tyname uni ann -&gt; m ()
</span><a href="PlutusCore.Analysis.Definitions.html#typeDefs"><span class="hs-identifier hs-var">typeDefs</span></a></span><span>
</span><span id="line-176"></span></pre></body></html>