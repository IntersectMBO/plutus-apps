<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds             #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass        #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances     #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings     #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE RoleAnnotations       #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies          #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators         #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances  #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns          #-}</span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">PlutusTx.Code</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html"><span class="hs-identifier">PlutusTx.Coverage</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="PlutusTx.Lift.Instances.html"><span class="hs-identifier">PlutusTx.Lift.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusIR</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PIR</span></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusCore</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLC</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusCore.Pretty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PLC</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">UntypedPlutusCore</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UPLC</span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Exception</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Flat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Flat</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unflat</span></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Flat.Decoder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DecodeException</span></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSL</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">ErrorCode</span></span><span>
</span><span id="line-30"></span><span class="hs-comment">-- We do not use qualified import because the whole module contains off-chain code</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Haskell</span></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">-- The final type parameter is inferred to be phantom, but we give it a nominal</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- role, since it corresponds to the Haskell type of the program that was compiled into</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- this 'CompiledCodeIn'. It could be okay to give it a representational role, since</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- we compile newtypes the same as their underlying types, but people probably just</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- shouldn't coerce the final parameter regardless, so we play it safe with a nominal role.</span><span>
</span><span id="line-38"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">role</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><span class="hs-identifier">representational</span></span><span> </span><span class="annot"><span class="hs-identifier">representational</span></span><span> </span><span class="annot"><span class="hs-identifier">nominal</span></span><span>
</span><span id="line-39"></span><span class="hs-comment">-- NOTE: any changes to this type must be paralleled by changes</span><span>
</span><span id="line-40"></span><span class="hs-comment">-- in the plugin code that generates values of this type. That is</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- done by code generation so it's not typechecked normally.</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- | A compiled Plutus Tx program. The last type parameter indicates</span><span>
</span><span id="line-43"></span><span class="hs-comment">-- the type of the Haskell expression that was compiled, and</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- hence the type of the compiled code.</span><span>
</span><span id="line-45"></span><span class="hs-comment">--</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- Note: the compiled PLC program does *not* have normalized types,</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- if you want to put it on the chain you must normalize the types first.</span><span>
</span><span id="line-48"></span><span class="hs-keyword">data</span><span> </span><span id="CompiledCodeIn"><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-var">CompiledCodeIn</span></a></span></span><span> </span><span id="local-6989586621679543583"><span class="annot"><a href="#local-6989586621679543583"><span class="hs-identifier hs-type">uni</span></a></span></span><span> </span><span id="local-6989586621679543582"><span class="annot"><a href="#local-6989586621679543582"><span class="hs-identifier hs-type">fun</span></a></span></span><span> </span><span id="local-6989586621679543581"><span class="annot"><a href="#local-6989586621679543581"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-comment">-- | Serialized UPLC code and possibly serialized PIR code with metadata used for program coverage.</span><span>
</span><span id="line-50"></span><span>    </span><span id="SerializedCode"><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-var">SerializedCode</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html#CoverageIndex"><span class="hs-identifier hs-type">CoverageIndex</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-comment">-- | Deserialized UPLC program, and possibly deserialized PIR program with metadata used for program coverage.</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="DeserializedCode"><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-var">DeserializedCode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">UPLC.Program</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UPLC.NamedDeBruijn</span></span><span> </span><span class="annot"><a href="#local-6989586621679543583"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543582"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIR.Program</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.TyName</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.Name</span></span><span> </span><span class="annot"><a href="#local-6989586621679543583"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543582"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html#CoverageIndex"><span class="hs-identifier hs-type">CoverageIndex</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | 'CompiledCodeIn' instantiated with default built-in types and functions.</span><span>
</span><span id="line-55"></span><span class="hs-keyword">type</span><span> </span><span id="CompiledCode"><span class="annot"><a href="PlutusTx.Code.html#CompiledCode"><span class="hs-identifier hs-var">CompiledCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.DefaultUni</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.DefaultFun</span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | Apply a compiled function to a compiled argument.</span><span>
</span><span id="line-58"></span><span id="local-6989586621679543488"><span id="local-6989586621679543489"><span id="local-6989586621679543490"><span id="local-6989586621679543491"><span class="annot"><a href="PlutusTx.Code.html#applyCode"><span class="hs-identifier hs-type">applyCode</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PLC.Closed</span></span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span> </span><span class="annot"><a href="#local-6989586621679543490"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.PrettyConst</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.GShow</span></span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621679543490"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543490"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679543489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679543488"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543490"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543489"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543491"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543490"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543488"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-61"></span><span id="applyCode"><span class="annot"><span class="annottext">applyCode :: CompiledCodeIn uni fun (a -&gt; b)
-&gt; CompiledCodeIn uni fun a -&gt; CompiledCodeIn uni fun b
</span><a href="PlutusTx.Code.html#applyCode"><span class="hs-identifier hs-var hs-var">applyCode</span></a></span></span><span> </span><span id="local-6989586621679543486"><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679543486"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621679543485"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543485"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
-&gt; Maybe (Program TyName Name uni fun ())
-&gt; CoverageIndex
-&gt; CompiledCodeIn uni fun b
forall (uni :: * -&gt; *) fun a.
Program NamedDeBruijn uni fun ()
-&gt; Maybe (Program TyName Name uni fun ())
-&gt; CoverageIndex
-&gt; CompiledCodeIn uni fun a
</span><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-var">DeserializedCode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
-&gt; Program NamedDeBruijn uni fun ()
-&gt; Program NamedDeBruijn uni fun ()
forall name (uni :: * -&gt; *) fun.
Program name uni fun ()
-&gt; Program name uni fun () -&gt; Program name uni fun ()
</span><span class="hs-identifier hs-var">UPLC.applyProgram</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b) -&gt; Program NamedDeBruijn uni fun ()
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun,
 Everywhere uni PrettyConst, GShow uni, Pretty fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679543486"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun,
 Everywhere uni PrettyConst, GShow uni, Pretty fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543485"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Program TyName Name uni fun ()
-&gt; Program TyName Name uni fun () -&gt; Program TyName Name uni fun ()
forall a tyname name (uni :: * -&gt; *) fun.
Monoid a =&gt;
Program tyname name uni fun a
-&gt; Program tyname name uni fun a -&gt; Program tyname name uni fun a
</span><span class="hs-identifier hs-var">PIR.applyProgram</span></span><span> </span><span class="annot"><span class="annottext">(Program TyName Name uni fun ()
 -&gt; Program TyName Name uni fun ()
 -&gt; Program TyName Name uni fun ())
-&gt; Maybe (Program TyName Name uni fun ())
-&gt; Maybe
     (Program TyName Name uni fun () -&gt; Program TyName Name uni fun ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
-&gt; Maybe (Program TyName Name uni fun ())
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Maybe (Program TyName Name uni fun ())
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var">getPir</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679543486"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe
  (Program TyName Name uni fun () -&gt; Program TyName Name uni fun ())
-&gt; Maybe (Program TyName Name uni fun ())
-&gt; Maybe (Program TyName Name uni fun ())
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; Maybe (Program TyName Name uni fun ())
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun) =&gt;
CompiledCodeIn uni fun a -&gt; Maybe (Program TyName Name uni fun ())
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var">getPir</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543485"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b) -&gt; CoverageIndex
forall (uni :: * -&gt; *) fun a.
CompiledCodeIn uni fun a -&gt; CoverageIndex
</span><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-var">getCovIdx</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun (a -&gt; b)
</span><a href="#local-6989586621679543486"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">CoverageIndex -&gt; CoverageIndex -&gt; CoverageIndex
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; CoverageIndex
forall (uni :: * -&gt; *) fun a.
CompiledCodeIn uni fun a -&gt; CoverageIndex
</span><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-var">getCovIdx</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543485"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-comment">-- | The size of a 'CompiledCodeIn', in AST nodes.</span><span>
</span><span id="line-64"></span><span id="local-6989586621679543476"><span id="local-6989586621679543477"><span id="local-6989586621679543478"><span class="annot"><a href="PlutusTx.Code.html#sizePlc"><span class="hs-identifier hs-type">sizePlc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PLC.Closed</span></span><span> </span><span class="annot"><a href="#local-6989586621679543478"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543478"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span> </span><span class="annot"><a href="#local-6989586621679543477"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543478"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.PrettyConst</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.GShow</span></span><span> </span><span class="annot"><a href="#local-6989586621679543478"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621679543477"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543478"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543477"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543476"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/integer-gmp-1.0.3.0/src"><span class="hs-identifier hs-type">Integer</span></a></span></span></span></span><span>
</span><span id="line-65"></span><span id="sizePlc"><span class="annot"><span class="annottext">sizePlc :: CompiledCodeIn uni fun a -&gt; Integer
</span><a href="PlutusTx.Code.html#sizePlc"><span class="hs-identifier hs-var hs-var">sizePlc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun () -&gt; Integer
forall name (uni :: * -&gt; *) fun ann.
Program name uni fun ann -&gt; Integer
</span><span class="hs-identifier hs-var">UPLC.programSize</span></span><span> </span><span class="annot"><span class="annottext">(Program NamedDeBruijn uni fun () -&gt; Integer)
-&gt; (CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ())
-&gt; CompiledCodeIn uni fun a
-&gt; Integer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun,
 Everywhere uni PrettyConst, GShow uni, Pretty fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span id="local-6989586621679543470"><span id="local-6989586621679543471"><span id="local-6989586621679543472"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PLC.Closed</span></span><span> </span><span class="annot"><a href="#local-6989586621679543472"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543472"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span> </span><span class="annot"><a href="#local-6989586621679543471"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543472"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.PrettyConst</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.GShow</span></span><span> </span><span class="annot"><a href="#local-6989586621679543472"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621679543471"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543472"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543471"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543470"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>    </span><span id="local-6989586621679543465"><span class="annot"><span class="annottext">encode :: CompiledCodeIn uni fun a -&gt; Encoding
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">encode</span></span></span><span> </span><span id="local-6989586621679543463"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543463"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun () -&gt; Encoding
forall a. Flat a =&gt; a -&gt; Encoding
</span><span class="hs-identifier hs-var">encode</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun,
 Everywhere uni PrettyConst, GShow uni, Pretty fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543463"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>    </span><span id="local-6989586621679543462"><span class="annot"><span class="annottext">decode :: Get (CompiledCodeIn uni fun a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">decode</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-72"></span><span>        </span><span id="local-6989586621679543460"><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><a href="#local-6989586621679543460"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Get (Program NamedDeBruijn uni fun ())
forall a. Flat a =&gt; Get a
</span><span class="hs-identifier hs-var">decode</span></span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; Get (CompiledCodeIn uni fun a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(CompiledCodeIn uni fun a -&gt; Get (CompiledCodeIn uni fun a))
-&gt; CompiledCodeIn uni fun a -&gt; Get (CompiledCodeIn uni fun a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
-&gt; Maybe (Program TyName Name uni fun ())
-&gt; CoverageIndex
-&gt; CompiledCodeIn uni fun a
forall (uni :: * -&gt; *) fun a.
Program NamedDeBruijn uni fun ()
-&gt; Maybe (Program TyName Name uni fun ())
-&gt; CoverageIndex
-&gt; CompiledCodeIn uni fun a
</span><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-var">DeserializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><a href="#local-6989586621679543460"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun ())
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
forall a. Monoid a =&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>    </span><span id="local-6989586621679543459"><span class="annot"><span class="annottext">size :: CompiledCodeIn uni fun a -&gt; NumBits -&gt; NumBits
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">size</span></span></span><span> </span><span id="local-6989586621679543457"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543457"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun () -&gt; NumBits -&gt; NumBits
forall a. Flat a =&gt; a -&gt; NumBits -&gt; NumBits
</span><span class="hs-identifier hs-var">size</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
forall (uni :: * -&gt; *) fun a.
(Closed uni, Everywhere uni Flat, Flat fun,
 Everywhere uni PrettyConst, GShow uni, Pretty fun) =&gt;
CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var">getPlc</span></a></span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543457"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-comment">{- Note [Deserializing the AST]
The types suggest that we can fail to deserialize the AST that we embedded in the program.
However, we just did it ourselves, so this should be impossible, and we signal this with an
exception.
-}</span><span>
</span><span id="line-82"></span><span class="hs-keyword">newtype</span><span> </span><span id="ImpossibleDeserialisationFailure"><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpossibleDeserialisationFailure"><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DecodeException</span></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">anyclass</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679543448"><span id="local-6989586621679543450"><span id="local-6989586621679543452"><span class="annot"><span class="annottext">Show ImpossibleDeserialisationFailure
Typeable ImpossibleDeserialisationFailure
Typeable ImpossibleDeserialisationFailure
-&gt; Show ImpossibleDeserialisationFailure
-&gt; (ImpossibleDeserialisationFailure -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe ImpossibleDeserialisationFailure)
-&gt; (ImpossibleDeserialisationFailure -&gt; String)
-&gt; Exception ImpossibleDeserialisationFailure
SomeException -&gt; Maybe ImpossibleDeserialisationFailure
ImpossibleDeserialisationFailure -&gt; String
ImpossibleDeserialisationFailure -&gt; SomeException
forall e.
Typeable e
-&gt; Show e
-&gt; (e -&gt; SomeException)
-&gt; (SomeException -&gt; Maybe e)
-&gt; (e -&gt; String)
-&gt; Exception e
displayException :: ImpossibleDeserialisationFailure -&gt; String
$cdisplayException :: ImpossibleDeserialisationFailure -&gt; String
fromException :: SomeException -&gt; Maybe ImpossibleDeserialisationFailure
$cfromException :: SomeException -&gt; Maybe ImpossibleDeserialisationFailure
toException :: ImpossibleDeserialisationFailure -&gt; SomeException
$ctoException :: ImpossibleDeserialisationFailure -&gt; SomeException
$cp2Exception :: Show ImpossibleDeserialisationFailure
$cp1Exception :: Typeable ImpossibleDeserialisationFailure
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Exception</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679543442"><span id="local-6989586621679543445"><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-type">ImpossibleDeserialisationFailure</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-85"></span><span>    </span><span id="local-6989586621679543440"><span class="annot"><span class="annottext">show :: ImpossibleDeserialisationFailure -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-type">ImpossibleDeserialisationFailure</span></a></span><span> </span><span id="local-6989586621679543438"><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679543438"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to deserialise our own program! This is a bug, please report it. Caused by: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679543438"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasErrorCode</span></span><span> </span><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-type">ImpossibleDeserialisationFailure</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-88"></span><span>      </span><span id="local-6989586621679543435"><span class="annot"><span class="annottext">errorCode :: ImpossibleDeserialisationFailure -&gt; ErrorCode
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">errorCode</span></span></span><span> </span><span class="annot"><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-type">ImpossibleDeserialisationFailure</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; ErrorCode
</span><span class="hs-identifier hs-var">ErrorCode</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">40</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-comment">-- | Get the actual Plutus Core program out of a 'CompiledCodeIn'.</span><span>
</span><span id="line-91"></span><span id="local-6989586621679543569"><span id="local-6989586621679543573"><span id="local-6989586621679543577"><span class="annot"><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-type">getPlc</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PLC.Closed</span></span><span> </span><span class="annot"><a href="#local-6989586621679543577"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543577"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span> </span><span class="annot"><a href="#local-6989586621679543573"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543577"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.PrettyConst</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.GShow</span></span><span> </span><span class="annot"><a href="#local-6989586621679543577"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PLC.Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621679543573"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543577"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543573"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543569"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UPLC.Program</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UPLC.NamedDeBruijn</span></span><span> </span><span class="annot"><a href="#local-6989586621679543577"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543573"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-94"></span><span id="getPlc"><span class="annot"><span class="annottext">getPlc :: CompiledCodeIn uni fun a -&gt; Program NamedDeBruijn uni fun ()
</span><a href="PlutusTx.Code.html#getPlc"><span class="hs-identifier hs-var hs-var">getPlc</span></a></span></span><span> </span><span id="local-6989586621679543432"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543432"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543432"><span class="hs-identifier hs-var">wrapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-type">SerializedCode</span></a></span><span> </span><span id="local-6989586621679543431"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679543431"><span class="hs-identifier hs-var">plc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Decoded (Program NamedDeBruijn uni fun ())
forall a b. (Flat a, AsByteString b) =&gt; b -&gt; Decoded a
</span><span class="hs-identifier hs-var">unflat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.fromStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679543431"><span class="hs-identifier hs-var">plc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679543429"><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679543429"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpossibleDeserialisationFailure
-&gt; Program NamedDeBruijn uni fun ()
forall a e. Exception e =&gt; e -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpossibleDeserialisationFailure
 -&gt; Program NamedDeBruijn uni fun ())
-&gt; ImpossibleDeserialisationFailure
-&gt; Program NamedDeBruijn uni fun ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException -&gt; ImpossibleDeserialisationFailure
</span><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679543429"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679543427"><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><a href="#local-6989586621679543427"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><a href="#local-6989586621679543427"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-type">DeserializedCode</span></a></span><span> </span><span id="local-6989586621679543426"><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><a href="#local-6989586621679543426"><span class="hs-identifier hs-var">plc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun ())
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><a href="#local-6989586621679543426"><span class="hs-identifier hs-var">plc</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- | Get the Plutus IR program, if there is one, out of a 'CompiledCodeIn'.</span><span>
</span><span id="line-101"></span><span id="local-6989586621679543558"><span id="local-6989586621679543559"><span id="local-6989586621679543560"><span class="annot"><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-type">getPir</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PLC.Closed</span></span><span> </span><span class="annot"><a href="#local-6989586621679543560"><span class="hs-identifier hs-type">uni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679543560"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`PLC.Everywhere`</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Flat</span></span><span> </span><span class="annot"><a href="#local-6989586621679543559"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543560"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543559"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543558"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PIR.Program</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIR.TyName</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PIR.Name</span></span><span> </span><span class="annot"><a href="#local-6989586621679543560"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543559"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-104"></span><span id="getPir"><span class="annot"><span class="annottext">getPir :: CompiledCodeIn uni fun a -&gt; Maybe (Program TyName Name uni fun ())
</span><a href="PlutusTx.Code.html#getPir"><span class="hs-identifier hs-var hs-var">getPir</span></a></span></span><span> </span><span id="local-6989586621679543425"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543425"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543425"><span class="hs-identifier hs-var">wrapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-type">SerializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679543424"><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679543424"><span class="hs-identifier hs-var">pir</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="#local-6989586621679543424"><span class="hs-identifier hs-var">pir</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679543423"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679543423"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Decoded (Program TyName Name uni fun ())
forall a b. (Flat a, AsByteString b) =&gt; b -&gt; Decoded a
</span><span class="hs-identifier hs-var">unflat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BSL.fromStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679543423"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-107"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679543422"><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679543422"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpossibleDeserialisationFailure
-&gt; Maybe (Program TyName Name uni fun ())
forall a e. Exception e =&gt; e -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">throw</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpossibleDeserialisationFailure
 -&gt; Maybe (Program TyName Name uni fun ()))
-&gt; ImpossibleDeserialisationFailure
-&gt; Maybe (Program TyName Name uni fun ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException -&gt; ImpossibleDeserialisationFailure
</span><a href="PlutusTx.Code.html#ImpossibleDeserialisationFailure"><span class="hs-identifier hs-var">ImpossibleDeserialisationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">DecodeException
</span><a href="#local-6989586621679543422"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-108"></span><span>            </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679543421"><span class="annot"><span class="annottext">Program TyName Name uni fun ()
</span><a href="#local-6989586621679543421"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Program TyName Name uni fun ()
-&gt; Maybe (Program TyName Name uni fun ())
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Program TyName Name uni fun ()
</span><a href="#local-6989586621679543421"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><span class="annottext">Maybe ByteString
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun ())
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-type">DeserializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679543420"><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun ())
</span><a href="#local-6989586621679543420"><span class="hs-identifier hs-var">pir</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun ())
</span><a href="#local-6989586621679543420"><span class="hs-identifier hs-var">pir</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span id="local-6989586621679543552"><span id="local-6989586621679543553"><span id="local-6989586621679543554"><span class="annot"><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-type">getCovIdx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="PlutusTx.Code.html#CompiledCodeIn"><span class="hs-identifier hs-type">CompiledCodeIn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543554"><span class="hs-identifier hs-type">uni</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543553"><span class="hs-identifier hs-type">fun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679543552"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="PlutusTx.Coverage.html#CoverageIndex"><span class="hs-identifier hs-type">CoverageIndex</span></a></span></span></span></span><span>
</span><span id="line-113"></span><span id="getCovIdx"><span class="annot"><span class="annottext">getCovIdx :: CompiledCodeIn uni fun a -&gt; CoverageIndex
</span><a href="PlutusTx.Code.html#getCovIdx"><span class="hs-identifier hs-var hs-var">getCovIdx</span></a></span></span><span> </span><span id="local-6989586621679543419"><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543419"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CompiledCodeIn uni fun a
</span><a href="#local-6989586621679543419"><span class="hs-identifier hs-var">wrapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="PlutusTx.Code.html#SerializedCode"><span class="hs-identifier hs-type">SerializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679543418"><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679543418"><span class="hs-identifier hs-var">idx</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679543418"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="PlutusTx.Code.html#DeserializedCode"><span class="hs-identifier hs-type">DeserializedCode</span></a></span><span> </span><span class="annot"><span class="annottext">Program NamedDeBruijn uni fun ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Program TyName Name uni fun ())
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679543417"><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679543417"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoverageIndex
</span><a href="#local-6989586621679543417"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-116"></span></pre></body></html>