<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DataKinds         #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts  #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs             #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes        #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications  #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators     #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-deprecations #-}</span><span> </span><span class="hs-comment">-- TODO Remove once TotalFunds gets removed</span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Wallet.LocalClient</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">shelleyAddressInEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api</span></span><span> </span><span class="hs-keyword">qualified</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Node.Types.html"><span class="hs-identifier">Cardano.Node.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Types.html#PABServerConfig"><span class="hs-identifier">PABServerConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Types.html#pscPassphrase"><span class="hs-identifier">pscPassphrase</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Api</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Api.Client</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Api.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ApiWallet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">assets</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">balance</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Api.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Wallet.LocalClient.ExportTx.html"><span class="hs-identifier">Cardano.Wallet.LocalClient.ExportTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Wallet.LocalClient.ExportTx.html#export"><span class="hs-keyword">export</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.AddressDerivation</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.Types</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.Hash</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.TokenMap</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.TokenPolicy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.TokenQuantity</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Primitive.Types.Tx</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Wallet.Shelley.Compatibility</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator">(&gt;=&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Freer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Eff</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LastMember</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Member</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sendM</span></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(~&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Freer.Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Error</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">throwError</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Freer.Extras.Log</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LogMsg</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">logWarn</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Freer.Reader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Reader</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ask</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">MonadIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">liftIO</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toJSON</span></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Aeson.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">parseMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.:)</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Bifunctor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">bimap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">void</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier">Proxy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Quantity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Quantity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Quantity</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pack</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromText</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">CardanoAddress</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ledger.Tx.CardanoAPI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">CardanoTx</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">CardanoTx</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToCardanoError</span></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ledger.Tx.Constraints.OffChain</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UnbalancedTx</span></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html"><span class="hs-identifier">Plutus.PAB.Monitoring.PABLogMsg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html#WalletClientMsg"><span class="hs-identifier">WalletClientMsg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html#BalanceTxError"><span class="hs-identifier">BalanceTxError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html#WalletClientError"><span class="hs-identifier">WalletClientError</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Ada</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ada</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Value</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">currencySymbol</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">tokenName</span></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx.AssocMap</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prettyprinter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">pretty</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Servant</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:&lt;|&gt;)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:&lt;|&gt;)</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(:&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Servant.Client</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ClientEnv</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ClientError</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ClientM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">client</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runClientM</span></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Wallet.API</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">WAPI</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Wallet.Effects</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WalletEffect</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BalanceTx</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">OwnAddresses</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SubmitTxn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TotalFunds</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">WalletAddSignature</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">YieldUnbalancedTx</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Wallet.Emulator.Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WalletAPIError</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">OtherError</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ToCardanoError</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Wallet.Emulator.Wallet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Wallet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Wallet</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">WalletId</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WalletId</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#getWalletKey"><span class="hs-identifier hs-type">getWalletKey</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.ApiT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.WalletId</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.ApiT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.Role</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.ApiT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.DerivationIndex</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientM</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.ApiVerificationKeyShelley</span></span><span>
</span><span id="line-65"></span><span id="getWalletKey"><span class="annot"><span class="annottext">ApiT WalletId
-&gt; ApiT Role
-&gt; ApiT DerivationIndex
-&gt; Maybe Bool
-&gt; ClientM ApiVerificationKeyShelley
</span><a href="Cardano.Wallet.LocalClient.html#getWalletKey"><span class="hs-identifier hs-var">getWalletKey</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">ApiT WalletId
-&gt; ApiT Role
-&gt; ApiT DerivationIndex
-&gt; ApiWalletSignData
-&gt; ClientM ByteString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">ApiT WalletId
-&gt; ApiT DerivationIndex
-&gt; ApiPostAccountKeyDataWithPurpose
-&gt; ClientM ApiAccountKey
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ApiT WalletId -&gt; Maybe KeyFormat -&gt; ClientM ApiAccountKey)
:&lt;|&gt; ((ApiT WalletId -&gt; Maybe Bool -&gt; ClientM ApiPolicyKey)
      :&lt;|&gt; ((ApiT WalletId
             -&gt; Maybe Bool -&gt; ApiPostPolicyKeyData -&gt; ClientM ApiPolicyKey)
            :&lt;|&gt; (ApiT WalletId
                  -&gt; ApiPostPolicyIdData -&gt; ClientM ApiPolicyId)))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (&quot;v2&quot; :&gt; WalletKeys) -&gt; Client ClientM (&quot;v2&quot; :&gt; WalletKeys)
forall api.
HasClient ClientM api =&gt;
Proxy api -&gt; Client ClientM api
</span><span class="hs-identifier hs-var">client</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (&quot;v2&quot; :&gt; WalletKeys)
forall k (t :: k). Proxy t
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;v2&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.WalletKeys</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#handleWalletClient"><span class="hs-identifier hs-type">handleWalletClient</span></a></span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621680275744"><span class="annot"><a href="#local-6989586621680275744"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621680275743"><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LastMember</span></span><span> </span><span class="annot"><a href="#local-6989586621680275744"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680275744"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Member</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WAPI.NodeClientEffect</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Member</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientError</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Member</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WalletAPIError</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Member</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reader</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientEnv</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Member</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LogMsg</span></span><span> </span><span class="annot"><a href="Plutus.PAB.Monitoring.PABLogMsg.html#WalletClientMsg"><span class="hs-identifier hs-type">WalletClientMsg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#PABServerConfig"><span class="hs-identifier hs-type">PABServerConfig</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Wallet</span></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">WalletEffect</span></span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">~&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span>
</span><span id="line-81"></span><span id="handleWalletClient"><span class="annot"><span class="annottext">handleWalletClient :: PABServerConfig -&gt; Wallet -&gt; WalletEffect ~&gt; Eff effs
</span><a href="Cardano.Wallet.LocalClient.html#handleWalletClient"><span class="hs-identifier hs-var hs-var">handleWalletClient</span></a></span></span><span> </span><span id="local-6989586621680275742"><span class="annot"><span class="annottext">PABServerConfig
</span><a href="#local-6989586621680275742"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Wallet</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WalletId</span></span><span> </span><span id="local-6989586621680275741"><span class="annot"><span class="annottext">Digest Blake2b_160
</span><a href="#local-6989586621680275741"><span class="hs-identifier hs-var">wId</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621680275740"><span class="annot"><span class="annottext">WalletEffect x
</span><a href="#local-6989586621680275740"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-82"></span><span>    </span><span id="local-6989586621680275739"><span class="annot"><span class="annottext">ClientEnv
</span><a href="#local-6989586621680275739"><span class="hs-identifier hs-var">clientEnv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (effs :: [* -&gt; *]).
Member (Reader ClientEnv) effs =&gt;
Eff effs ClientEnv
forall r (effs :: [* -&gt; *]). Member (Reader r) effs =&gt; Eff effs r
</span><span class="hs-identifier hs-var">ask</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">ClientEnv</span></span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621680275738"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680275738"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff effs Params
forall (effs :: [* -&gt; *]).
Member NodeClientEffect effs =&gt;
Eff effs Params
</span><span class="hs-identifier hs-var">WAPI.getClientParams</span></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680275736"><span class="annot"><span class="annottext">walletId :: WalletId
</span><a href="#local-6989586621680275736"><span class="hs-identifier hs-var hs-var">walletId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Digest Blake2b_160 -&gt; WalletId
</span><span class="hs-identifier hs-var">C.WalletId</span></span><span> </span><span class="annot"><span class="annottext">Digest Blake2b_160
</span><a href="#local-6989586621680275741"><span class="hs-identifier hs-var">wId</span></a></span><span>
</span><span id="line-85"></span><span>        </span><span id="local-6989586621680275734"><span class="annot"><span class="annottext">mpassphrase :: Maybe Text
</span><a href="#local-6989586621680275734"><span class="hs-identifier hs-var hs-var">mpassphrase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PABServerConfig -&gt; Maybe Text
</span><a href="Cardano.Node.Types.html#pscPassphrase"><span class="hs-identifier hs-var hs-var">pscPassphrase</span></a></span><span> </span><span class="annot"><span class="annottext">PABServerConfig
</span><a href="#local-6989586621680275742"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>        </span><span id="local-6989586621680275916"><span class="annot"><a href="#local-6989586621680275733"><span class="hs-identifier hs-type">runClient</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientM</span></span><span> </span><span class="annot"><a href="#local-6989586621680275916"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680275916"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-88"></span><span>        </span><span id="local-6989586621680275733"><span class="annot"><span class="annottext">runClient :: ClientM a -&gt; Eff effs a
</span><a href="#local-6989586621680275733"><span class="hs-identifier hs-var hs-var">runClient</span></a></span></span><span> </span><span id="local-6989586621680275732"><span class="annot"><span class="annottext">ClientM a
</span><a href="#local-6989586621680275732"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-89"></span><span>            </span><span id="local-6989586621680275731"><span class="annot"><span class="annottext">Either ClientError a
</span><a href="#local-6989586621680275731"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ClientM a -&gt; Eff effs (Either ClientError a)
forall a. ClientM a -&gt; Eff effs (Either ClientError a)
</span><a href="#local-6989586621680275730"><span class="hs-identifier hs-var">runClient'</span></a></span><span> </span><span class="annot"><span class="annottext">ClientM a
</span><a href="#local-6989586621680275732"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-90"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ClientError a
</span><a href="#local-6989586621680275731"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-91"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680275729"><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275729"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-92"></span><span>                    </span><span class="annot"><span class="annottext">WalletClientMsg -&gt; Eff effs ()
forall a (effs :: [* -&gt; *]).
Member (LogMsg a) effs =&gt;
a -&gt; Eff effs ()
</span><span class="hs-identifier hs-var">logWarn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; WalletClientMsg
</span><a href="Plutus.PAB.Monitoring.PABLogMsg.html#WalletClientError"><span class="hs-identifier hs-var">WalletClientError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; WalletClientMsg) -&gt; String -&gt; WalletClientMsg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275729"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>                    </span><span class="annot"><span class="annottext">ClientError -&gt; Eff effs a
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275729"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-94"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680275727"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680275727"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Eff effs a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680275727"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-95"></span><span>        </span><span id="local-6989586621680275956"><span class="annot"><a href="#local-6989586621680275730"><span class="hs-identifier hs-type">runClient'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientM</span></span><span> </span><span class="annot"><a href="#local-6989586621680275956"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ClientError</span></span><span> </span><span class="annot"><a href="#local-6989586621680275956"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-96"></span><span>        </span><span id="local-6989586621680275730"><span class="annot"><span class="annottext">runClient' :: ClientM a -&gt; Eff effs (Either ClientError a)
</span><a href="#local-6989586621680275730"><span class="hs-identifier hs-var hs-var">runClient'</span></a></span></span><span> </span><span id="local-6989586621680275726"><span class="annot"><span class="annottext">ClientM a
</span><a href="#local-6989586621680275726"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-97"></span><span>            </span><span id="local-6989586621680275725"><span class="annot"><span class="annottext">Either ClientError a
</span><a href="#local-6989586621680275725"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m (Either ClientError a) -&gt; Eff effs (Either ClientError a)
forall (m :: * -&gt; *) (effs :: [* -&gt; *]) a.
(Monad m, LastMember m effs) =&gt;
m a -&gt; Eff effs a
</span><span class="hs-identifier hs-var">sendM</span></span><span> </span><span class="annot"><span class="annottext">(m (Either ClientError a) -&gt; Eff effs (Either ClientError a))
-&gt; m (Either ClientError a) -&gt; Eff effs (Either ClientError a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either ClientError a) -&gt; m (Either ClientError a)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either ClientError a) -&gt; m (Either ClientError a))
-&gt; IO (Either ClientError a) -&gt; m (Either ClientError a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientM a -&gt; ClientEnv -&gt; IO (Either ClientError a)
forall a. ClientM a -&gt; ClientEnv -&gt; IO (Either ClientError a)
</span><span class="hs-identifier hs-var">runClientM</span></span><span> </span><span class="annot"><span class="annottext">ClientM a
</span><a href="#local-6989586621680275726"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">ClientEnv
</span><a href="#local-6989586621680275739"><span class="hs-identifier hs-var">clientEnv</span></a></span><span>
</span><span id="line-98"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ClientError a
</span><a href="#local-6989586621680275725"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-99"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680275724"><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275724"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-100"></span><span>                    </span><span class="annot"><span class="annottext">WalletClientMsg -&gt; Eff effs ()
forall a (effs :: [* -&gt; *]).
Member (LogMsg a) effs =&gt;
a -&gt; Eff effs ()
</span><span class="hs-identifier hs-var">logWarn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; WalletClientMsg
</span><a href="Plutus.PAB.Monitoring.PABLogMsg.html#WalletClientError"><span class="hs-identifier hs-var">WalletClientError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; WalletClientMsg) -&gt; String -&gt; WalletClientMsg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275724"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>                    </span><span class="annot"><span class="annottext">Either ClientError a -&gt; Eff effs (Either ClientError a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either ClientError a -&gt; Eff effs (Either ClientError a))
-&gt; (ClientError -&gt; Either ClientError a)
-&gt; ClientError
-&gt; Eff effs (Either ClientError a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError -&gt; Either ClientError a
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientError -&gt; Eff effs (Either ClientError a))
-&gt; ClientError -&gt; Eff effs (Either ClientError a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275724"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-102"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either ClientError a -&gt; Eff effs (Either ClientError a)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Either ClientError a
</span><a href="#local-6989586621680275725"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><a href="#local-6989586621680275722"><span class="hs-identifier hs-type">submitTxnH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>        </span><span id="local-6989586621680275722"><span class="annot"><span class="annottext">submitTxnH :: CardanoTx -&gt; Eff effs ()
</span><a href="#local-6989586621680275722"><span class="hs-identifier hs-var hs-var">submitTxnH</span></a></span></span><span> </span><span id="local-6989586621680275721"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275721"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-106"></span><span>            </span><span id="local-6989586621680275720"><span class="annot"><span class="annottext">SealedTx
</span><a href="#local-6989586621680275720"><span class="hs-identifier hs-var">sealedTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; Eff effs SealedTx)
-&gt; (SealedTx -&gt; Eff effs SealedTx)
-&gt; Either ToCardanoError SealedTx
-&gt; Eff effs SealedTx
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletAPIError -&gt; Eff effs SealedTx
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; Eff effs SealedTx)
-&gt; (ToCardanoError -&gt; WalletAPIError)
-&gt; ToCardanoError
-&gt; Eff effs SealedTx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ToCardanoError -&gt; WalletAPIError
</span><span class="hs-identifier hs-var">ToCardanoError</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Eff effs SealedTx
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either ToCardanoError SealedTx -&gt; Eff effs SealedTx)
-&gt; Either ToCardanoError SealedTx -&gt; Eff effs SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Either ToCardanoError SealedTx
</span><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275721"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-107"></span><span>            </span><span class="annot"><span class="annottext">Eff effs ApiTxId -&gt; Eff effs ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs ApiTxId -&gt; Eff effs ())
-&gt; (ClientM ApiTxId -&gt; Eff effs ApiTxId)
-&gt; ClientM ApiTxId
-&gt; Eff effs ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ClientM ApiTxId -&gt; Eff effs ApiTxId
forall a. ClientM a -&gt; Eff effs a
</span><a href="#local-6989586621680275733"><span class="hs-identifier hs-var">runClient</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientM ApiTxId -&gt; Eff effs ()) -&gt; ClientM ApiTxId -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionClient
-&gt; ApiBytesT 'Base64 SerialisedTx -&gt; ClientM ApiTxId
</span><span class="hs-identifier hs-var hs-var">C.postExternalTransaction</span></span><span> </span><span class="annot"><span class="annottext">TransactionClient
</span><span class="hs-identifier hs-var">C.transactionClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SerialisedTx -&gt; ApiBytesT 'Base64 SerialisedTx
forall (base :: Base) bs. bs -&gt; ApiBytesT base bs
</span><span class="hs-identifier hs-var">C.ApiBytesT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; SerialisedTx
</span><span class="hs-identifier hs-var">C.SerialisedTx</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; SerialisedTx) -&gt; ByteString -&gt; SerialisedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; ByteString
</span><span class="hs-identifier hs-var hs-var">C.serialisedTx</span></span><span> </span><span class="annot"><span class="annottext">SealedTx
</span><a href="#local-6989586621680275720"><span class="hs-identifier hs-var">sealedTx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><a href="#local-6989586621680275712"><span class="hs-identifier hs-type">ownAddressesH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoAddress</span></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>        </span><span id="local-6989586621680275712"><span class="annot"><span class="annottext">ownAddressesH :: Eff effs (NonEmpty CardanoAddress)
</span><a href="#local-6989586621680275712"><span class="hs-identifier hs-var hs-var">ownAddressesH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-111"></span><span>            </span><span id="local-6989586621680275711"><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621680275711"><span class="hs-identifier hs-var">addressValues</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ClientM [Value] -&gt; Eff effs [Value]
forall a. ClientM a -&gt; Eff effs a
</span><a href="#local-6989586621680275733"><span class="hs-identifier hs-var">runClient</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientM [Value] -&gt; Eff effs [Value])
-&gt; ClientM [Value] -&gt; Eff effs [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddressClient
-&gt; ApiT WalletId -&gt; Maybe (ApiT AddressState) -&gt; ClientM [Value]
</span><span class="hs-identifier hs-var hs-var">C.listAddresses</span></span><span>  </span><span class="annot"><span class="annottext">AddressClient
</span><span class="hs-identifier hs-var">C.addressClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletId -&gt; ApiT WalletId
forall a. a -&gt; ApiT a
</span><span class="hs-identifier hs-var">C.ApiT</span></span><span> </span><span class="annot"><span class="annottext">WalletId
</span><a href="#local-6989586621680275736"><span class="hs-identifier hs-var">walletId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ApiT AddressState)
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-112"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty CardanoAddress -&gt; Eff effs (NonEmpty CardanoAddress)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty CardanoAddress -&gt; Eff effs (NonEmpty CardanoAddress))
-&gt; NonEmpty CardanoAddress -&gt; Eff effs (NonEmpty CardanoAddress)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[CardanoAddress] -&gt; NonEmpty CardanoAddress
forall a. [a] -&gt; NonEmpty a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">NonEmpty.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([CardanoAddress] -&gt; NonEmpty CardanoAddress)
-&gt; [CardanoAddress] -&gt; NonEmpty CardanoAddress
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe CardanoAddress) -&gt; [Value] -&gt; [CardanoAddress]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Text
</span><a href="#local-6989586621680275706"><span class="hs-identifier hs-var">decodeApiAddress</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Text)
-&gt; (Text -&gt; Maybe CardanoAddress) -&gt; Value -&gt; Maybe CardanoAddress
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe CardanoAddress
</span><a href="#local-6989586621680275705"><span class="hs-identifier hs-var">fromApiAddress</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Value]
</span><a href="#local-6989586621680275711"><span class="hs-identifier hs-var">addressValues</span></a></span><span>
</span><span id="line-113"></span><span>         </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>             </span><span class="annot"><a href="#local-6989586621680275706"><span class="hs-identifier hs-type">decodeApiAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Aeson.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-115"></span><span>             </span><span id="local-6989586621680275706"><span class="annot"><span class="annottext">decodeApiAddress :: Value -&gt; Maybe Text
</span><a href="#local-6989586621680275706"><span class="hs-identifier hs-var hs-var">decodeApiAddress</span></a></span></span><span> </span><span id="local-6989586621680275704"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680275704"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Parser Text) -&gt; Value -&gt; Maybe Text
forall a b. (a -&gt; Parser b) -&gt; a -&gt; Maybe b
</span><span class="hs-identifier hs-var">parseMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser Text) -&gt; Value -&gt; Parser Text
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><span class="hs-identifier hs-var">Aeson.withObject</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ApiAddress&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621680275702"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680275702"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621680275702"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><span class="hs-operator hs-var">.:</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;id&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621680275704"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>             </span><span class="annot"><a href="#local-6989586621680275705"><span class="hs-identifier hs-type">fromApiAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoAddress</span></span><span>
</span><span id="line-118"></span><span>             </span><span id="local-6989586621680275705"><span class="annot"><span class="annottext">fromApiAddress :: Text -&gt; Maybe CardanoAddress
</span><a href="#local-6989586621680275705"><span class="hs-identifier hs-var hs-var">fromApiAddress</span></a></span></span><span> </span><span id="local-6989586621680275701"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680275701"><span class="hs-identifier hs-var">addrBech32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-119"></span><span>                 </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AsType (Address ShelleyAddr)
-&gt; Text -&gt; Either Bech32DecodeError (Address ShelleyAddr)
forall a.
SerialiseAsBech32 a =&gt;
AsType a -&gt; Text -&gt; Either Bech32DecodeError a
</span><span class="hs-identifier hs-var">Cardano.Api.deserialiseFromBech32</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType ShelleyAddr -&gt; AsType (Address ShelleyAddr)
forall addrtype. AsType addrtype -&gt; AsType (Address addrtype)
</span><span class="hs-identifier hs-var">Cardano.Api.AsAddress</span></span><span> </span><span class="annot"><span class="annottext">AsType ShelleyAddr
</span><span class="hs-identifier hs-var">Cardano.Api.AsShelleyAddr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680275701"><span class="hs-identifier hs-var">addrBech32</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-120"></span><span>                   </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="annot"><span class="annottext">Bech32DecodeError
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe CardanoAddress
forall a. Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-121"></span><span>                   </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680275697"><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621680275697"><span class="hs-identifier hs-var">addrCApi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoAddress -&gt; Maybe CardanoAddress
forall a. a -&gt; Maybe a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(CardanoAddress -&gt; Maybe CardanoAddress)
-&gt; CardanoAddress -&gt; Maybe CardanoAddress
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Address ShelleyAddr -&gt; CardanoAddress
forall era.
IsShelleyBasedEra era =&gt;
Address ShelleyAddr -&gt; AddressInEra era
</span><span class="hs-identifier hs-var">shelleyAddressInEra</span></span><span> </span><span class="annot"><span class="annottext">Address ShelleyAddr
</span><a href="#local-6989586621680275697"><span class="hs-identifier hs-var">addrCApi</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><a href="#local-6989586621680275696"><span class="hs-identifier hs-type">balanceTxH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UnbalancedTx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WalletAPIError</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span>        </span><span id="local-6989586621680275696"><span class="annot"><span class="annottext">balanceTxH :: UnbalancedTx -&gt; Eff effs (Either WalletAPIError CardanoTx)
</span><a href="#local-6989586621680275696"><span class="hs-identifier hs-var hs-var">balanceTxH</span></a></span></span><span> </span><span id="local-6989586621680275695"><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275695"><span class="hs-identifier hs-var">utx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-125"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Params -&gt; UnbalancedTx -&gt; Either CardanoLedgerError ExportTx
</span><a href="Cardano.Wallet.LocalClient.ExportTx.html#export"><span class="hs-keyword hs-var">export</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621680275738"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275695"><span class="hs-identifier hs-var">utx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-126"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680275694"><span class="annot"><span class="annottext">CardanoLedgerError
</span><a href="#local-6989586621680275694"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-127"></span><span>                    </span><span class="annot"><span class="annottext">WalletClientMsg -&gt; Eff effs ()
forall a (effs :: [* -&gt; *]).
Member (LogMsg a) effs =&gt;
a -&gt; Eff effs ()
</span><span class="hs-identifier hs-var">logWarn</span></span><span> </span><span class="annot"><span class="annottext">(WalletClientMsg -&gt; Eff effs ()) -&gt; WalletClientMsg -&gt; Eff effs ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; WalletClientMsg
</span><a href="Plutus.PAB.Monitoring.PABLogMsg.html#BalanceTxError"><span class="hs-identifier hs-var">BalanceTxError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; WalletClientMsg) -&gt; String -&gt; WalletClientMsg
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Doc Any -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc Any -&gt; String) -&gt; Doc Any -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoLedgerError -&gt; Doc Any
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">CardanoLedgerError
</span><a href="#local-6989586621680275694"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-128"></span><span>                    </span><span class="annot"><span class="annottext">Doc Any -&gt; Eff effs (Either WalletAPIError CardanoTx)
forall (effs :: [* -&gt; *]) err a.
(Member (Error WalletAPIError) effs, Show err) =&gt;
err -&gt; Eff effs a
</span><a href="Cardano.Wallet.LocalClient.html#throwOtherError"><span class="hs-identifier hs-var">throwOtherError</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc Any -&gt; Eff effs (Either WalletAPIError CardanoTx))
-&gt; Doc Any -&gt; Eff effs (Either WalletAPIError CardanoTx)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoLedgerError -&gt; Doc Any
forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><span class="hs-identifier hs-var">pretty</span></span><span> </span><span class="annot"><span class="annottext">CardanoLedgerError
</span><a href="#local-6989586621680275694"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-129"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680275692"><span class="annot"><span class="annottext">ExportTx
</span><a href="#local-6989586621680275692"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>                    </span><span id="local-6989586621680275691"><span class="annot"><span class="annottext">Either ClientError ApiSerialisedTransaction
</span><a href="#local-6989586621680275691"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ClientM ApiSerialisedTransaction
-&gt; Eff effs (Either ClientError ApiSerialisedTransaction)
forall a. ClientM a -&gt; Eff effs (Either ClientError a)
</span><a href="#local-6989586621680275730"><span class="hs-identifier hs-var">runClient'</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientM ApiSerialisedTransaction
 -&gt; Eff effs (Either ClientError ApiSerialisedTransaction))
-&gt; ClientM ApiSerialisedTransaction
-&gt; Eff effs (Either ClientError ApiSerialisedTransaction)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionClient
-&gt; ApiT WalletId
-&gt; ApiBalanceTransactionPostDataT Value
-&gt; ClientM ApiSerialisedTransaction
</span><span class="hs-identifier hs-var hs-var">C.balanceTransaction</span></span><span> </span><span class="annot"><span class="annottext">TransactionClient
</span><span class="hs-identifier hs-var">C.transactionClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletId -&gt; ApiT WalletId
forall a. a -&gt; ApiT a
</span><span class="hs-identifier hs-var">C.ApiT</span></span><span> </span><span class="annot"><span class="annottext">WalletId
</span><a href="#local-6989586621680275736"><span class="hs-identifier hs-var">walletId</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExportTx -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">ExportTx
</span><a href="#local-6989586621680275692"><span class="hs-identifier hs-var">ex</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ClientError ApiSerialisedTransaction
</span><a href="#local-6989586621680275691"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-132"></span><span>                        </span><span class="hs-comment">-- TODO: use the right error case based on http error code</span><span>
</span><span id="line-133"></span><span>                        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680275689"><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275689"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either WalletAPIError CardanoTx
-&gt; Eff effs (Either WalletAPIError CardanoTx)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either WalletAPIError CardanoTx
 -&gt; Eff effs (Either WalletAPIError CardanoTx))
-&gt; Either WalletAPIError CardanoTx
-&gt; Eff effs (Either WalletAPIError CardanoTx)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WalletAPIError -&gt; Either WalletAPIError CardanoTx
forall a b. a -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; Either WalletAPIError CardanoTx)
-&gt; WalletAPIError -&gt; Either WalletAPIError CardanoTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; WalletAPIError
</span><span class="hs-identifier hs-var">OtherError</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; WalletAPIError) -&gt; Text -&gt; WalletAPIError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">ClientError
</span><a href="#local-6989586621680275689"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-134"></span><span>                        </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680275688"><span class="annot"><span class="annottext">ApiSerialisedTransaction
</span><a href="#local-6989586621680275688"><span class="hs-identifier hs-var">r</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-135"></span><span>                            </span><span class="annot"><span class="annottext">Either WalletAPIError CardanoTx
-&gt; Eff effs (Either WalletAPIError CardanoTx)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoTx -&gt; Either WalletAPIError CardanoTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(CardanoTx -&gt; Either WalletAPIError CardanoTx)
-&gt; CardanoTx -&gt; Either WalletAPIError CardanoTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ApiSerialisedTransaction -&gt; CardanoTx
</span><a href="Cardano.Wallet.LocalClient.html#fromApiSerialisedTransaction"><span class="hs-identifier hs-var">fromApiSerialisedTransaction</span></a></span><span> </span><span class="annot"><span class="annottext">ApiSerialisedTransaction
</span><a href="#local-6989586621680275688"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><a href="#local-6989586621680275686"><span class="hs-identifier hs-type">walletAddSignatureH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span>
</span><span id="line-138"></span><span>        </span><span id="local-6989586621680275686"><span class="annot"><span class="annottext">walletAddSignatureH :: CardanoTx -&gt; Eff effs CardanoTx
</span><a href="#local-6989586621680275686"><span class="hs-identifier hs-var hs-var">walletAddSignatureH</span></a></span></span><span> </span><span id="local-6989586621680275685"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275685"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-139"></span><span>            </span><span id="local-6989586621680275684"><span class="annot"><span class="annottext">SealedTx
</span><a href="#local-6989586621680275684"><span class="hs-identifier hs-var">sealedTx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; Eff effs SealedTx)
-&gt; (SealedTx -&gt; Eff effs SealedTx)
-&gt; Either ToCardanoError SealedTx
-&gt; Eff effs SealedTx
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletAPIError -&gt; Eff effs SealedTx
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; Eff effs SealedTx)
-&gt; (ToCardanoError -&gt; WalletAPIError)
-&gt; ToCardanoError
-&gt; Eff effs SealedTx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ToCardanoError -&gt; WalletAPIError
</span><span class="hs-identifier hs-var">ToCardanoError</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Eff effs SealedTx
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either ToCardanoError SealedTx -&gt; Eff effs SealedTx)
-&gt; Either ToCardanoError SealedTx -&gt; Eff effs SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Either ToCardanoError SealedTx
</span><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275685"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-140"></span><span>            </span><span id="local-6989586621680275683"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680275683"><span class="hs-identifier hs-var">passphrase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Eff effs Text
-&gt; (Text -&gt; Eff effs Text) -&gt; Maybe Text -&gt; Eff effs Text
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletAPIError -&gt; Eff effs Text
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; Eff effs Text)
-&gt; WalletAPIError -&gt; Eff effs Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; WalletAPIError
</span><span class="hs-identifier hs-var">OtherError</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Wallet passphrase required&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Eff effs Text
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621680275734"><span class="hs-identifier hs-var">mpassphrase</span></a></span><span>
</span><span id="line-141"></span><span>            </span><span id="local-6989586621680275681"><span class="annot"><span class="annottext">Passphrase &quot;lenient&quot;
</span><a href="#local-6989586621680275681"><span class="hs-identifier hs-var">lenientPP</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TextDecodingError -&gt; Eff effs (Passphrase &quot;lenient&quot;))
-&gt; (Passphrase &quot;lenient&quot; -&gt; Eff effs (Passphrase &quot;lenient&quot;))
-&gt; Either TextDecodingError (Passphrase &quot;lenient&quot;)
-&gt; Eff effs (Passphrase &quot;lenient&quot;)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">TextDecodingError -&gt; Eff effs (Passphrase &quot;lenient&quot;)
forall (effs :: [* -&gt; *]) err a.
(Member (Error WalletAPIError) effs, Show err) =&gt;
err -&gt; Eff effs a
</span><a href="Cardano.Wallet.LocalClient.html#throwOtherError"><span class="hs-identifier hs-var">throwOtherError</span></a></span><span> </span><span class="annot"><span class="annottext">Passphrase &quot;lenient&quot; -&gt; Eff effs (Passphrase &quot;lenient&quot;)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either TextDecodingError (Passphrase &quot;lenient&quot;)
 -&gt; Eff effs (Passphrase &quot;lenient&quot;))
-&gt; Either TextDecodingError (Passphrase &quot;lenient&quot;)
-&gt; Eff effs (Passphrase &quot;lenient&quot;)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TextDecodingError (Passphrase &quot;lenient&quot;)
forall a. FromText a =&gt; Text -&gt; Either TextDecodingError a
</span><span class="hs-identifier hs-var">fromText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621680275683"><span class="hs-identifier hs-var">passphrase</span></a></span><span>
</span><span id="line-142"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680275680"><span class="annot"><span class="annottext">postData :: ApiSignTransactionPostData
</span><a href="#local-6989586621680275680"><span class="hs-identifier hs-var hs-var">postData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ApiT SealedTx
-&gt; ApiT (Passphrase &quot;lenient&quot;) -&gt; ApiSignTransactionPostData
</span><span class="hs-identifier hs-var">C.ApiSignTransactionPostData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SealedTx -&gt; ApiT SealedTx
forall a. a -&gt; ApiT a
</span><span class="hs-identifier hs-var">C.ApiT</span></span><span> </span><span class="annot"><span class="annottext">SealedTx
</span><a href="#local-6989586621680275684"><span class="hs-identifier hs-var">sealedTx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Passphrase &quot;lenient&quot; -&gt; ApiT (Passphrase &quot;lenient&quot;)
forall a. a -&gt; ApiT a
</span><span class="hs-identifier hs-var">C.ApiT</span></span><span> </span><span class="annot"><span class="annottext">Passphrase &quot;lenient&quot;
</span><a href="#local-6989586621680275681"><span class="hs-identifier hs-var">lenientPP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>            </span><span class="annot"><span class="annottext">(ApiSerialisedTransaction -&gt; CardanoTx)
-&gt; Eff effs ApiSerialisedTransaction -&gt; Eff effs CardanoTx
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">ApiSerialisedTransaction -&gt; CardanoTx
</span><a href="Cardano.Wallet.LocalClient.html#fromApiSerialisedTransaction"><span class="hs-identifier hs-var">fromApiSerialisedTransaction</span></a></span><span> </span><span class="annot"><span class="annottext">(Eff effs ApiSerialisedTransaction -&gt; Eff effs CardanoTx)
-&gt; (ClientM ApiSerialisedTransaction
    -&gt; Eff effs ApiSerialisedTransaction)
-&gt; ClientM ApiSerialisedTransaction
-&gt; Eff effs CardanoTx
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ClientM ApiSerialisedTransaction
-&gt; Eff effs ApiSerialisedTransaction
forall a. ClientM a -&gt; Eff effs a
</span><a href="#local-6989586621680275733"><span class="hs-identifier hs-var">runClient</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientM ApiSerialisedTransaction -&gt; Eff effs CardanoTx)
-&gt; ClientM ApiSerialisedTransaction -&gt; Eff effs CardanoTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TransactionClient
-&gt; ApiT WalletId
-&gt; ApiSignTransactionPostData
-&gt; ClientM ApiSerialisedTransaction
</span><span class="hs-identifier hs-var hs-var">C.signTransaction</span></span><span> </span><span class="annot"><span class="annottext">TransactionClient
</span><span class="hs-identifier hs-var">C.transactionClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletId -&gt; ApiT WalletId
forall a. a -&gt; ApiT a
</span><span class="hs-identifier hs-var">C.ApiT</span></span><span> </span><span class="annot"><span class="annottext">WalletId
</span><a href="#local-6989586621680275736"><span class="hs-identifier hs-var">walletId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ApiSignTransactionPostData
</span><a href="#local-6989586621680275680"><span class="hs-identifier hs-var">postData</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="#local-6989586621680275677"><span class="hs-identifier hs-type">totalFundsH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-146"></span><span>        </span><span id="local-6989586621680275677"><span class="annot"><span class="annottext">totalFundsH :: Eff effs Value
</span><a href="#local-6989586621680275677"><span class="hs-identifier hs-var hs-var">totalFundsH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">C.ApiWallet</span></span><span class="hs-special">{</span><span id="local-6989586621680275675"><span class="annot"><span class="annottext">ApiWalletBalance
balance :: ApiWalletBalance
$sel:balance:ApiWallet :: ApiWallet -&gt; ApiWalletBalance
</span><a href="#local-6989586621680275675"><span class="hs-identifier hs-var hs-var">balance</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680275674"><span class="annot"><span class="annottext">ApiWalletAssetsBalance
assets :: ApiWalletAssetsBalance
$sel:assets:ApiWallet :: ApiWallet -&gt; ApiWalletAssetsBalance
</span><a href="#local-6989586621680275674"><span class="hs-identifier hs-var hs-var">assets</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ClientM ApiWallet -&gt; Eff effs ApiWallet
forall a. ClientM a -&gt; Eff effs a
</span><a href="#local-6989586621680275733"><span class="hs-identifier hs-var">runClient</span></a></span><span> </span><span class="annot"><span class="annottext">(ClientM ApiWallet -&gt; Eff effs ApiWallet)
-&gt; ClientM ApiWallet -&gt; Eff effs ApiWallet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WalletClient ApiWallet -&gt; ApiT WalletId -&gt; ClientM ApiWallet
forall wallet.
WalletClient wallet -&gt; ApiT WalletId -&gt; ClientM wallet
</span><span class="hs-identifier hs-var hs-var">C.getWallet</span></span><span> </span><span class="annot"><span class="annottext">WalletClient ApiWallet
</span><span class="hs-identifier hs-var">C.walletClient</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WalletId -&gt; ApiT WalletId
forall a. a -&gt; ApiT a
</span><span class="hs-identifier hs-var">C.ApiT</span></span><span> </span><span class="annot"><span class="annottext">WalletId
</span><a href="#local-6989586621680275736"><span class="hs-identifier hs-var">walletId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.ApiWalletBalance</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Quantity</span></span><span> </span><span id="local-6989586621680275670"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680275670"><span class="hs-identifier hs-var">avAda</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Quantity &quot;lovelace&quot; Natural
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Quantity &quot;lovelace&quot; Natural
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ApiWalletBalance
</span><a href="#local-6989586621680275675"><span class="hs-identifier hs-var">balance</span></a></span><span>
</span><span id="line-149"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">C.ApiWalletAssetsBalance</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">C.ApiT</span></span><span> </span><span id="local-6989586621680275668"><span class="annot"><span class="annottext">TokenMap
</span><a href="#local-6989586621680275668"><span class="hs-identifier hs-var">avAssets</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ApiT TokenMap
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ApiWalletAssetsBalance
</span><a href="#local-6989586621680275674"><span class="hs-identifier hs-var">assets</span></a></span><span>
</span><span id="line-150"></span><span>            </span><span class="annot"><span class="annottext">Value -&gt; Eff effs Value
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Eff effs Value) -&gt; Value -&gt; Eff effs Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Value
</span><span class="hs-identifier hs-var">Ada.lovelaceValueOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621680275670"><span class="hs-identifier hs-var">avAda</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TokenMap -&gt; Value
</span><a href="Cardano.Wallet.LocalClient.html#tokenMapToValue"><span class="hs-identifier hs-var">tokenMapToValue</span></a></span><span> </span><span class="annot"><span class="annottext">TokenMap
</span><a href="#local-6989586621680275668"><span class="hs-identifier hs-var">avAssets</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><a href="#local-6989586621680275665"><span class="hs-identifier hs-type">yieldUnbalancedTxH</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">UnbalancedTx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275743"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>        </span><span id="local-6989586621680275665"><span class="annot"><span class="annottext">yieldUnbalancedTxH :: UnbalancedTx -&gt; Eff effs ()
</span><a href="#local-6989586621680275665"><span class="hs-identifier hs-var hs-var">yieldUnbalancedTxH</span></a></span></span><span> </span><span id="local-6989586621680275664"><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275664"><span class="hs-identifier hs-var">utx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-154"></span><span>            </span><span id="local-6989586621680275663"><span class="annot"><span class="annottext">Either WalletAPIError CardanoTx
</span><a href="#local-6989586621680275663"><span class="hs-identifier hs-var">balancedTxM</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnbalancedTx -&gt; Eff effs (Either WalletAPIError CardanoTx)
</span><a href="#local-6989586621680275696"><span class="hs-identifier hs-var">balanceTxH</span></a></span><span> </span><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275664"><span class="hs-identifier hs-var">utx</span></a></span><span>
</span><span id="line-155"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either WalletAPIError CardanoTx
</span><a href="#local-6989586621680275663"><span class="hs-identifier hs-var">balancedTxM</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-156"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621680275662"><span class="annot"><span class="annottext">WalletAPIError
</span><a href="#local-6989586621680275662"><span class="hs-identifier hs-var">err</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">WalletAPIError -&gt; Eff effs ()
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">WalletAPIError
</span><a href="#local-6989586621680275662"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-157"></span><span>                </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621680275661"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275661"><span class="hs-identifier hs-var">balancedTx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Eff effs CardanoTx
</span><a href="#local-6989586621680275686"><span class="hs-identifier hs-var">walletAddSignatureH</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275661"><span class="hs-identifier hs-var">balancedTx</span></a></span><span> </span><span class="annot"><span class="annottext">Eff effs CardanoTx -&gt; (CardanoTx -&gt; Eff effs ()) -&gt; Eff effs ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Eff effs ()
</span><a href="#local-6989586621680275722"><span class="hs-identifier hs-var">submitTxnH</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WalletEffect x
</span><a href="#local-6989586621680275740"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">SubmitTxn</span></span><span> </span><span id="local-6989586621680275660"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275660"><span class="hs-identifier hs-var">tx</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Eff effs ()
</span><a href="#local-6989586621680275722"><span class="hs-identifier hs-var">submitTxnH</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275660"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="annottext">WalletEffect x
</span><span class="hs-identifier hs-var">OwnAddresses</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff effs x
Eff effs (NonEmpty CardanoAddress)
</span><a href="#local-6989586621680275712"><span class="hs-identifier hs-var">ownAddressesH</span></a></span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">BalanceTx</span></span><span> </span><span id="local-6989586621680275659"><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275659"><span class="hs-identifier hs-var">utx</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnbalancedTx -&gt; Eff effs (Either WalletAPIError CardanoTx)
</span><a href="#local-6989586621680275696"><span class="hs-identifier hs-var">balanceTxH</span></a></span><span> </span><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275659"><span class="hs-identifier hs-var">utx</span></a></span><span>
</span><span id="line-163"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">WalletAddSignature</span></span><span> </span><span id="local-6989586621680275658"><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275658"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CardanoTx -&gt; Eff effs CardanoTx
</span><a href="#local-6989586621680275686"><span class="hs-identifier hs-var">walletAddSignatureH</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoTx
</span><a href="#local-6989586621680275658"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-164"></span><span>        </span><span class="annot"><span class="annottext">WalletEffect x
</span><span class="hs-identifier hs-var">TotalFunds</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Eff effs x
Eff effs Value
</span><a href="#local-6989586621680275677"><span class="hs-identifier hs-var">totalFundsH</span></a></span><span>
</span><span id="line-165"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">YieldUnbalancedTx</span></span><span> </span><span id="local-6989586621680275657"><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275657"><span class="hs-identifier hs-var">utx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnbalancedTx -&gt; Eff effs ()
</span><a href="#local-6989586621680275665"><span class="hs-identifier hs-var">yieldUnbalancedTxH</span></a></span><span> </span><span class="annot"><span class="annottext">UnbalancedTx
</span><a href="#local-6989586621680275657"><span class="hs-identifier hs-var">utx</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#tokenMapToValue"><span class="hs-identifier hs-type">tokenMapToValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.TokenMap</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Value</span></span><span>
</span><span id="line-168"></span><span id="tokenMapToValue"><span class="annot"><span class="annottext">tokenMapToValue :: TokenMap -&gt; Value
</span><a href="Cardano.Wallet.LocalClient.html#tokenMapToValue"><span class="hs-identifier hs-var hs-var">tokenMapToValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map CurrencySymbol (Map TokenName Integer) -&gt; Value
</span><span class="hs-identifier hs-var">Value</span></span><span> </span><span class="annot"><span class="annottext">(Map CurrencySymbol (Map TokenName Integer) -&gt; Value)
-&gt; (TokenMap -&gt; Map CurrencySymbol (Map TokenName Integer))
-&gt; TokenMap
-&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(CurrencySymbol, Map TokenName Integer)]
-&gt; Map CurrencySymbol (Map TokenName Integer)
forall k v. [(k, v)] -&gt; Map k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(CurrencySymbol, Map TokenName Integer)]
 -&gt; Map CurrencySymbol (Map TokenName Integer))
-&gt; (TokenMap -&gt; [(CurrencySymbol, Map TokenName Integer)])
-&gt; TokenMap
-&gt; Map CurrencySymbol (Map TokenName Integer)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((TokenPolicyId, NonEmpty (TokenName, TokenQuantity))
 -&gt; (CurrencySymbol, Map TokenName Integer))
-&gt; [(TokenPolicyId, NonEmpty (TokenName, TokenQuantity))]
-&gt; [(CurrencySymbol, Map TokenName Integer)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TokenPolicyId -&gt; CurrencySymbol)
-&gt; (NonEmpty (TokenName, TokenQuantity) -&gt; Map TokenName Integer)
-&gt; (TokenPolicyId, NonEmpty (TokenName, TokenQuantity))
-&gt; (CurrencySymbol, Map TokenName Integer)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; CurrencySymbol
</span><span class="hs-identifier hs-var">currencySymbol</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; CurrencySymbol)
-&gt; (TokenPolicyId -&gt; ByteString) -&gt; TokenPolicyId -&gt; CurrencySymbol
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Hash &quot;TokenPolicy&quot; -&gt; ByteString
forall (tag :: Symbol). Hash tag -&gt; ByteString
</span><span class="hs-identifier hs-var hs-var">C.getHash</span></span><span> </span><span class="annot"><span class="annottext">(Hash &quot;TokenPolicy&quot; -&gt; ByteString)
-&gt; (TokenPolicyId -&gt; Hash &quot;TokenPolicy&quot;)
-&gt; TokenPolicyId
-&gt; ByteString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TokenPolicyId -&gt; Hash &quot;TokenPolicy&quot;
</span><span class="hs-identifier hs-var hs-var">C.unTokenPolicyId</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(TokenName, Integer)] -&gt; Map TokenName Integer
forall k v. [(k, v)] -&gt; Map k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(TokenName, Integer)] -&gt; Map TokenName Integer)
-&gt; (NonEmpty (TokenName, TokenQuantity) -&gt; [(TokenName, Integer)])
-&gt; NonEmpty (TokenName, TokenQuantity)
-&gt; Map TokenName Integer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((TokenName, TokenQuantity) -&gt; (TokenName, Integer))
-&gt; [(TokenName, TokenQuantity)] -&gt; [(TokenName, Integer)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TokenName -&gt; TokenName)
-&gt; (TokenQuantity -&gt; Integer)
-&gt; (TokenName, TokenQuantity)
-&gt; (TokenName, Integer)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; TokenName
</span><span class="hs-identifier hs-var">tokenName</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; TokenName)
-&gt; (TokenName -&gt; ByteString) -&gt; TokenName -&gt; TokenName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TokenName -&gt; ByteString
</span><span class="hs-identifier hs-var hs-var">C.unTokenName</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">(Natural -&gt; Integer)
-&gt; (TokenQuantity -&gt; Natural) -&gt; TokenQuantity -&gt; Integer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TokenQuantity -&gt; Natural
</span><span class="hs-identifier hs-var hs-var">C.unTokenQuantity</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(TokenName, TokenQuantity)] -&gt; [(TokenName, Integer)])
-&gt; (NonEmpty (TokenName, TokenQuantity)
    -&gt; [(TokenName, TokenQuantity)])
-&gt; NonEmpty (TokenName, TokenQuantity)
-&gt; [(TokenName, Integer)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (TokenName, TokenQuantity) -&gt; [(TokenName, TokenQuantity)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(TokenPolicyId, NonEmpty (TokenName, TokenQuantity))]
 -&gt; [(CurrencySymbol, Map TokenName Integer)])
-&gt; (TokenMap
    -&gt; [(TokenPolicyId, NonEmpty (TokenName, TokenQuantity))])
-&gt; TokenMap
-&gt; [(CurrencySymbol, Map TokenName Integer)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TokenMap -&gt; [(TokenPolicyId, NonEmpty (TokenName, TokenQuantity))]
</span><span class="hs-identifier hs-var">C.toNestedList</span></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#fromApiSerialisedTransaction"><span class="hs-identifier hs-type">fromApiSerialisedTransaction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.ApiSerialisedTransaction</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span>
</span><span id="line-171"></span><span id="fromApiSerialisedTransaction"><span class="annot"><span class="annottext">fromApiSerialisedTransaction :: ApiSerialisedTransaction -&gt; CardanoTx
</span><a href="Cardano.Wallet.LocalClient.html#fromApiSerialisedTransaction"><span class="hs-identifier hs-var hs-var">fromApiSerialisedTransaction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">C.ApiSerialisedTransaction</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">C.ApiT</span></span><span> </span><span id="local-6989586621680275649"><span class="annot"><span class="annottext">SealedTx
</span><a href="#local-6989586621680275649"><span class="hs-identifier hs-var">sealedTx</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AnyCardanoEra -&gt; SealedTx -&gt; InAnyCardanoEra Tx
</span><span class="hs-identifier hs-var">C.cardanoTxIdeallyNoLaterThan</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra BabbageEra -&gt; AnyCardanoEra
forall era. CardanoEra era -&gt; AnyCardanoEra
</span><span class="hs-identifier hs-var">Cardano.Api.anyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra BabbageEra
</span><span class="hs-identifier hs-var">Cardano.Api.BabbageEra</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SealedTx
</span><a href="#local-6989586621680275649"><span class="hs-identifier hs-var">sealedTx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">Cardano.Api.ByronEra</span></span><span> </span><span id="local-6989586621680275643"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275643"><span class="hs-identifier hs-var">tx</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><span class="hs-identifier hs-var">CardanoTx</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275643"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
EraInMode ByronEra CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.ByronEraInCardanoMode</span></span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">Cardano.Api.ShelleyEra</span></span><span> </span><span id="local-6989586621680275640"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275640"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><span class="hs-identifier hs-var">CardanoTx</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275640"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
EraInMode ShelleyEra CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.ShelleyEraInCardanoMode</span></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">Cardano.Api.AllegraEra</span></span><span> </span><span id="local-6989586621680275637"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275637"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><span class="hs-identifier hs-var">CardanoTx</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275637"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
EraInMode AllegraEra CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.AllegraEraInCardanoMode</span></span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">Cardano.Api.MaryEra</span></span><span> </span><span id="local-6989586621680275634"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275634"><span class="hs-identifier hs-var">tx</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><span class="hs-identifier hs-var">CardanoTx</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275634"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
EraInMode MaryEra CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.MaryEraInCardanoMode</span></span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">Cardano.Api.AlonzoEra</span></span><span> </span><span id="local-6989586621680275631"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275631"><span class="hs-identifier hs-var">tx</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><span class="hs-identifier hs-var">CardanoTx</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275631"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
EraInMode AlonzoEra CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.AlonzoEraInCardanoMode</span></span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra era
</span><span class="hs-identifier hs-var">Cardano.Api.BabbageEra</span></span><span> </span><span id="local-6989586621680275629"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275629"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><span class="hs-identifier hs-var">CardanoTx</span></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275629"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
EraInMode BabbageEra CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.BabbageEraInCardanoMode</span></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-type">toSealedTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToCardanoError</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">C.SealedTx</span></span><span>
</span><span id="line-180"></span><span id="toSealedTx"><span class="annot"><span class="annottext">toSealedTx :: CardanoTx -&gt; Either ToCardanoError SealedTx
</span><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var hs-var">toSealedTx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span id="local-6989586621680275627"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275627"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.ByronEraInCardanoMode</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedTx -&gt; Either ToCardanoError SealedTx)
-&gt; SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyCardanoEra Tx -&gt; SealedTx
</span><span class="hs-identifier hs-var">C.sealedTxFromCardano</span></span><span> </span><span class="annot"><span class="annottext">(InAnyCardanoEra Tx -&gt; SealedTx) -&gt; InAnyCardanoEra Tx -&gt; SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra ByronEra -&gt; Tx ByronEra -&gt; InAnyCardanoEra Tx
forall era (thing :: * -&gt; *).
IsCardanoEra era =&gt;
CardanoEra era -&gt; thing era -&gt; InAnyCardanoEra thing
</span><span class="hs-identifier hs-var">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra ByronEra
</span><span class="hs-identifier hs-var">Cardano.Api.ByronEra</span></span><span> </span><span class="annot"><span class="annottext">Tx era
Tx ByronEra
</span><a href="#local-6989586621680275627"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-181"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span id="local-6989586621680275625"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275625"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.ShelleyEraInCardanoMode</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedTx -&gt; Either ToCardanoError SealedTx)
-&gt; SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyCardanoEra Tx -&gt; SealedTx
</span><span class="hs-identifier hs-var">C.sealedTxFromCardano</span></span><span> </span><span class="annot"><span class="annottext">(InAnyCardanoEra Tx -&gt; SealedTx) -&gt; InAnyCardanoEra Tx -&gt; SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra ShelleyEra -&gt; Tx ShelleyEra -&gt; InAnyCardanoEra Tx
forall era (thing :: * -&gt; *).
IsCardanoEra era =&gt;
CardanoEra era -&gt; thing era -&gt; InAnyCardanoEra thing
</span><span class="hs-identifier hs-var">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra ShelleyEra
</span><span class="hs-identifier hs-var">Cardano.Api.ShelleyEra</span></span><span> </span><span class="annot"><span class="annottext">Tx era
Tx ShelleyEra
</span><a href="#local-6989586621680275625"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-182"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span id="local-6989586621680275624"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275624"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.AllegraEraInCardanoMode</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedTx -&gt; Either ToCardanoError SealedTx)
-&gt; SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyCardanoEra Tx -&gt; SealedTx
</span><span class="hs-identifier hs-var">C.sealedTxFromCardano</span></span><span> </span><span class="annot"><span class="annottext">(InAnyCardanoEra Tx -&gt; SealedTx) -&gt; InAnyCardanoEra Tx -&gt; SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra AllegraEra -&gt; Tx AllegraEra -&gt; InAnyCardanoEra Tx
forall era (thing :: * -&gt; *).
IsCardanoEra era =&gt;
CardanoEra era -&gt; thing era -&gt; InAnyCardanoEra thing
</span><span class="hs-identifier hs-var">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra AllegraEra
</span><span class="hs-identifier hs-var">Cardano.Api.AllegraEra</span></span><span> </span><span class="annot"><span class="annottext">Tx era
Tx AllegraEra
</span><a href="#local-6989586621680275624"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-183"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span id="local-6989586621680275623"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275623"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.MaryEraInCardanoMode</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedTx -&gt; Either ToCardanoError SealedTx)
-&gt; SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyCardanoEra Tx -&gt; SealedTx
</span><span class="hs-identifier hs-var">C.sealedTxFromCardano</span></span><span> </span><span class="annot"><span class="annottext">(InAnyCardanoEra Tx -&gt; SealedTx) -&gt; InAnyCardanoEra Tx -&gt; SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra MaryEra -&gt; Tx MaryEra -&gt; InAnyCardanoEra Tx
forall era (thing :: * -&gt; *).
IsCardanoEra era =&gt;
CardanoEra era -&gt; thing era -&gt; InAnyCardanoEra thing
</span><span class="hs-identifier hs-var">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra MaryEra
</span><span class="hs-identifier hs-var">Cardano.Api.MaryEra</span></span><span> </span><span class="annot"><span class="annottext">Tx era
Tx MaryEra
</span><a href="#local-6989586621680275623"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-184"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span id="local-6989586621680275622"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275622"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.AlonzoEraInCardanoMode</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedTx -&gt; Either ToCardanoError SealedTx)
-&gt; SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyCardanoEra Tx -&gt; SealedTx
</span><span class="hs-identifier hs-var">C.sealedTxFromCardano</span></span><span> </span><span class="annot"><span class="annottext">(InAnyCardanoEra Tx -&gt; SealedTx) -&gt; InAnyCardanoEra Tx -&gt; SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra AlonzoEra -&gt; Tx AlonzoEra -&gt; InAnyCardanoEra Tx
forall era (thing :: * -&gt; *).
IsCardanoEra era =&gt;
CardanoEra era -&gt; thing era -&gt; InAnyCardanoEra thing
</span><span class="hs-identifier hs-var">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra AlonzoEra
</span><span class="hs-identifier hs-var">Cardano.Api.AlonzoEra</span></span><span> </span><span class="annot"><span class="annottext">Tx era
Tx AlonzoEra
</span><a href="#local-6989586621680275622"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-185"></span><span class="annot"><a href="Cardano.Wallet.LocalClient.html#toSealedTx"><span class="hs-identifier hs-var">toSealedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CardanoTx</span></span><span> </span><span id="local-6989586621680275621"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621680275621"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><span class="hs-identifier hs-var">Cardano.Api.BabbageEraInCardanoMode</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. b -&gt; Either a b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(SealedTx -&gt; Either ToCardanoError SealedTx)
-&gt; SealedTx -&gt; Either ToCardanoError SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">InAnyCardanoEra Tx -&gt; SealedTx
</span><span class="hs-identifier hs-var">C.sealedTxFromCardano</span></span><span> </span><span class="annot"><span class="annottext">(InAnyCardanoEra Tx -&gt; SealedTx) -&gt; InAnyCardanoEra Tx -&gt; SealedTx
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra BabbageEra -&gt; Tx BabbageEra -&gt; InAnyCardanoEra Tx
forall era (thing :: * -&gt; *).
IsCardanoEra era =&gt;
CardanoEra era -&gt; thing era -&gt; InAnyCardanoEra thing
</span><span class="hs-identifier hs-var">Cardano.Api.InAnyCardanoEra</span></span><span> </span><span class="annot"><span class="annottext">CardanoEra BabbageEra
</span><span class="hs-identifier hs-var">Cardano.Api.BabbageEra</span></span><span> </span><span class="annot"><span class="annottext">Tx era
Tx BabbageEra
</span><a href="#local-6989586621680275621"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span id="local-6989586621680275867"><span id="local-6989586621680275868"><span id="local-6989586621680275869"><span class="annot"><a href="Cardano.Wallet.LocalClient.html#throwOtherError"><span class="hs-identifier hs-type">throwOtherError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Member</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">WalletAPIError</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680275869"><span class="hs-identifier hs-type">effs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680275868"><span class="hs-identifier hs-type">err</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680275868"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eff</span></span><span> </span><span class="annot"><a href="#local-6989586621680275869"><span class="hs-identifier hs-type">effs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680275867"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-188"></span><span id="throwOtherError"><span class="annot"><span class="annottext">throwOtherError :: err -&gt; Eff effs a
</span><a href="Cardano.Wallet.LocalClient.html#throwOtherError"><span class="hs-identifier hs-var hs-var">throwOtherError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WalletAPIError -&gt; Eff effs a
forall e (effs :: [* -&gt; *]) a.
Member (Error e) effs =&gt;
e -&gt; Eff effs a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(WalletAPIError -&gt; Eff effs a)
-&gt; (err -&gt; WalletAPIError) -&gt; err -&gt; Eff effs a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; WalletAPIError
</span><span class="hs-identifier hs-var">OtherError</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; WalletAPIError) -&gt; (err -&gt; Text) -&gt; err -&gt; WalletAPIError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (err -&gt; String) -&gt; err -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">err -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../../../ghc/html/libraries/base-4.14.3.0/src"><span class="hs-identifier hs-var">show</span></a></span><span>
</span><span id="line-189"></span></pre></body></html>